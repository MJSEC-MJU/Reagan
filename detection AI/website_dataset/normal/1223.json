{
  "url": "https://xbox-mag.net",
  "html": "<html lang=\"fr-FR\" prefix=\"og: http://ogp.me/ns#\"><head>\n\t<meta charset=\"UTF-8\">\n\t<title>Test et News - Xbox Mag - Toute l'actualité Xbox Series X|S, Xbox One, Xbox Game Pass, xCloud. News, tests, tout sur la Xbox</title>\n\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\t<link rel=\"pingback\" href=\"https://xbox-mag.net/wp/xmlrpc.php\">\n\n\t<link rel=\"apple-touch-icon-precomposed\" sizes=\"144x144\" href=\"https://xbox-mag.net/content/themes/xboxmag/images/apple-touch-icon-144-xboxmag.png\">\n\t<link rel=\"apple-touch-icon-precomposed\" sizes=\"114x114\" href=\"https://xbox-mag.net/content/themes/xboxmag/images/apple-touch-icon-114-xboxmag.png\">\n\t<link rel=\"apple-touch-icon-precomposed\" sizes=\"72x72\" href=\"https://xbox-mag.net/content/themes/xboxmag/images/apple-touch-icon-72-xboxmag.png\">\n\t<link rel=\"apple-touch-icon-precomposed\" href=\"https://xbox-mag.net/content/themes/xboxmag/images/apple-touch-icon-57-xboxmag.png\">\n\t<link rel=\"shortcut icon\" href=\"https://xbox-mag.net/content/themes/xboxmag/images/favicon.ico\">\n\t<meta name=\"robots\" content=\"max-snippet:-1, max-video-preview:-1, max-image-preview:large\">\n\t<link href=\"https://fonts.googleapis.com/css?family=Roboto+Condensed:700,400italic,300italic,400,700italic\" rel=\"stylesheet\" type=\"text/css\">\n\t<meta name=\"ir-site-verification-token\" value=\"-71955055\">\n\t\n\t<!-- forum insert -->\n\t\n<!-- This site is optimized with the Yoast WordPress SEO plugin v1.4.22 - http://yoast.com/wordpress/seo/ -->\n<meta name=\"description\" content=\"Toute l'actualité Xbox, les tests et bons plans sur Xbox One et Xbox Series X. Infos sur les jeux Xbox, le Xbox Game Pass et le Xbox Live 7j/7.\">\n<link rel=\"canonical\" href=\"https://xbox-mag.net/\">\n<link rel=\"next\" href=\"https://xbox-mag.net/page/2/\">\n<meta property=\"og:locale\" content=\"fr_FR\">\n<meta property=\"og:type\" content=\"website\">\n<meta property=\"og:title\" content=\"Test et News - Xbox Mag - Toute l'actualité Xbox Series X|S, Xbox One, Xbox Game Pass, xCloud. News, tests, tout sur la Xbox\">\n<meta property=\"og:description\" content=\"Toute l'actualité Xbox, les tests et bons plans sur Xbox One et Xbox Series X. Infos sur les jeux Xbox, le Xbox Game Pass et le Xbox Live 7j/7.\">\n<meta property=\"og:url\" content=\"https://xbox-mag.net/\">\n<meta property=\"og:site_name\" content=\"Test et News - Xbox Mag\">\n<!-- / Yoast WordPress SEO plugin. -->\n\n<link rel=\"alternate\" type=\"application/rss+xml\" title=\"Test et News - Xbox Mag » Flux\" href=\"https://xbox-mag.net/feed/\">\n<link rel=\"alternate\" type=\"application/rss+xml\" title=\"Test et News - Xbox Mag » Flux des commentaires\" href=\"https://xbox-mag.net/comments/feed/\">\n<link rel=\"stylesheet\" id=\"bootstrap-css\" href=\"//xbox-mag.net/content/themes/xboxmag/css/bootstrap.css?ver=3.8.35\" type=\"text/css\" media=\"all\">\n<link rel=\"stylesheet\" id=\"typeahead-css\" href=\"//xbox-mag.net/content/themes/xboxmag/css/typeahead.css?ver=3.8.35\" type=\"text/css\" media=\"all\">\n<link rel=\"stylesheet\" id=\"main-css\" href=\"//xbox-mag.net/content/themes/xboxmag/style.css?ver=3.8.35\" type=\"text/css\" media=\"all\">\n<link rel=\"EditURI\" type=\"application/rsd+xml\" title=\"RSD\" href=\"https://xbox-mag.net/wp/xmlrpc.php?rsd\">\n<link rel=\"wlwmanifest\" type=\"application/wlwmanifest+xml\" href=\"https://xbox-mag.net/wp/wp-includes/wlwmanifest.xml\"> \n\t<!-- Google Tag Manager -->\n<script async=\"\" src=\"https://boot.pbstck.com/v1/adm/b0f8046b-4b55-4f4a-a31a-4403b490a46c\"></script><script async=\"\" src=\"https://www.googletagmanager.com/gtm.js?id=GTM-MFP9GW\"></script><script id=\"spcloader\" type=\"text/javascript\" async=\"\" src=\"https://sdk.privacy-center.org/4d814010-8f72-4612-a3d3-d05d25c678c6/loader.js?target=xbox-mag.net\" charset=\"utf-8\"></script><script async=\"\" src=\"https://www.clarity.ms/s/0.8.9/clarity.js\"></script><script type=\"text/javascript\" async=\"\" src=\"https://www.google-analytics.com/analytics.js\"></script><script type=\"text/javascript\" async=\"\" src=\"https://www.googletagmanager.com/gtag/js?id=G-VH041B43H6&amp;cx=c&amp;gtm=45He55j1v862873061za200&amp;tag_exp=101509157~103116026~103130495~103130497~103136993~103136995~103200004~103233427~103252644~103252646~103301114~103301116\"></script><script async=\"\" src=\"https://www.clarity.ms/tag/ln4djqoo5n\"></script><script async=\"\" src=\"https://www.googletagmanager.com/gtm.js?id=GTM-WMW2Z5G\"></script><script>\n\t(function(w, d, s, l, i) {\n\t\tw[l] = w[l] || [];\n\t\tw[l].push({\n\t\t\t'gtm.start': new Date().getTime(),\n\t\t\tevent: 'gtm.js'\n\t\t});\n\t\tvar f = d.getElementsByTagName(s)[0],\n\t\t\tj = d.createElement(s),\n\t\t\tdl = l != 'dataLayer' ? '&l=' + l : '';\n\t\tj.async = true;\n\t\tj.src =\n\t\t\t'https://www.googletagmanager.com/gtm.js?id=' + i + dl;\n\t\tf.parentNode.insertBefore(j, f);\n\t})(window, document, 'script', 'dataLayer', 'GTM-WMW2Z5G');\n</script>\n<!-- End Google Tag Manager -->\n\n<script type=\"text/javascript\">\n\t(function(c, l, a, r, i, t, y) {\n\t\tc[a] = c[a] || function() {\n\t\t\t(c[a].q = c[a].q || []).push(arguments)\n\t\t};\n\t\tt = l.createElement(r);\n\t\tt.async = 1;\n\t\tt.src = \"https://www.clarity.ms/tag/\" + i;\n\t\ty = l.getElementsByTagName(r)[0];\n\t\ty.parentNode.insertBefore(t, y);\n\t})(window, document, \"clarity\", \"script\", \"ln4djqoo5n\");\n</script><meta name=\"pbstck_context:site_name\" content=\"xbox-mag.net\"><meta name=\"ad:subscriber\" content=\"non\"><meta name=\"ad:siteid\" content=\"6406\"><meta name=\"ad:pageid\" content=\"39522\"><meta name=\"ad:page\" content=\"hp\"><meta name=\"ad:url\" content=\"/\"><meta name=\"ad:keyword_url\" content=\"\"><meta name=\"ad:preview\" content=\"non\"><meta name=\"ad:source_domain\" content=\"unknown\"><meta name=\"ad:source_traffic\" content=\"direct\"><meta name=\"ad:source\" content=\"\"><meta name=\"ad:brandsafe\" content=\"oui\"><meta name=\"ad:targeting\" content=\"xbox\"><meta name=\"ad:control_group\" content=\"1\"><script type=\"text/javascript\" async=\"\" src=\"https://sdk.privacy-center.org/sdk/315e84b10b323eb24c5b8cc00b19ae253b819670/modern/sdk.315e84b10b323eb24c5b8cc00b19ae253b819670.js\" charset=\"utf-8\"></script><script type=\"text/javascript\">(function(){ var kleanads=function(e){\"use strict\";const t=\"adm\";const i=\"kleanads_errors\";class n{constructor(e,t,i,n=1){this.tagId=e,this.kleanadsVersion=t,this.throttling=n,this.device=i||\"na\"}handleMessage(e,t,i){const n={source:t??\"kleanads\",type:\"log\",level:e,tagId:this.tagId,kleanadsVersion:this.kleanadsVersion,href:window.location.href,device:this.device,...i};var s,a;s=n,a=this.throttling,100*Math.random()<a&&navigator.sendBeacon(\"https://intake.pbstck.com/v1/trace\",JSON.stringify(s))}error(e){this.handleMessage(\"error\",i,{message:e})}warn(e){this.handleMessage(\"warn\",i,{message:e})}customLogWithPayload(e,t,i=\"info\"){this.handleMessage(i,e,t)}}const s=/kleanads:debug/.test(window.location.href),a=!!window.localStorage?.getItem&&null!==window.localStorage.getItem(\"kleanads\"),r=!!window.localStorage?.getItem&&null!==window.localStorage.getItem(\"kleanads_refresh\"),o=\"kleanads\";let d,c=\"na\",l=\"na\",u=\"na\";function h(){return s||a}function g(e,t){return`[${e}] [${performance.now().toFixed(2)}] ${t}`}function f(e){u=e}function p(e,...t){h()&&console.log(g(o,e),...t)}function m(e,...t){if(h()){const i=\"background: #4D5E98;color: #fff; padding: 2px 4px;font-weight:bold;text-transform:capitalize;border-radius: 1px; margin:0 2px;\";console.debug(\"%cDEBUG\",i,g(o,e),...t)}}function b(e,...t){h()&&console.warn(g(o,e),...t),d?.warn(e)}function v(e,...t){h()&&console.error(g(o,e),...t),d?.error(e),navigator.sendBeacon(`https://intake.pbstck.com/v1/intake/error?tId=${c}&v=${l}&s=${u}&c=1`,JSON.stringify([{message:e}]))}function y(e,t,i){d?.customLogWithPayload(t,{message:e,...i})}function A(e,t){const i={type:\"customEvent\",eventName:e,message:t};window.postMessage(i,\"*\")}function I(e){const t=document.createElement(\"meta\");t.setAttribute(\"name\",\"pbstck_context:pbstck_ab_test\"),t.content=e,document.head.appendChild(t)}function C(e,t){const i=document.createElement(\"meta\");i.setAttribute(\"name\",`pbstck:${e}`),i.content=t,document.head.appendChild(i)}function S(e,t){const i=document.createElement(\"meta\");i.setAttribute(\"name\",`ad:${e}`),i.content=t,document.head.appendChild(i)}function k(e){const t={};e.document.querySelectorAll('meta[name^=\"ad:\"]').forEach((e=>{const i=function(e){const t=e.attributes.getNamedItem(\"name\")?.value||\"\";return t.startsWith(\"ad:\")?t.slice(3):t}(e);i&&(t[i]=function(e){const t=e.attributes.getNamedItem(\"content\")?.value||\"\";return t.split(\",\")}(e))}));const i=new URLSearchParams(e.location.search);for(const e of i.keys())e.startsWith(\"ad:\")&&(t[e.slice(3)]=i.getAll(e));return t}function w(){const e=document.head.querySelector('meta[name=\"ad:no_cmp\"]');return!!e&&\"true\"===e.content}function E(e){return e.mediaTypes.includes(\"Instream\")&&void 0!==e.instreamParams}function T(e){return e.mediaTypes.includes(\"Banner\")&&void 0!==e.bannerSizes}function $(e){return e.mediaTypes.includes(\"Skin\")}const _=(e,t)=>\"fluid\"===e&&\"fluid\"===t||e[0]===t[0]&&e[1]===t[1];function R(e){const t=e.values?e.values.join(\",\"):\"\";return e.value?e.value:t}function O(e){const t=e.values??[];return e.value?e.value:t}const U=e=>e.map(P),P=e=>({bidder:e.bidder,params:e.params}),L=e=>({banner:{sizes:e}}),x=e=>({video:e}),N=e=>({native:e}),D=e=>({video:{context:\"outstream\",playerSize:[640,480],mimes:[\"video/mp4\",\"video/ogg\",\"video/webm\",\"application/javascript\"],protocols:[1,2,3,4,5,6,7,8,11,12,13,14],api:[1,2,3,5,6,7],playbackmethod:[2,3,4],skip:1,linearity:2,startdelay:0,placement:3,plcmt:4,maxduration:30,minduration:0,playVideoVisibleThreshold:25,nonViewableBehavior:\"pause\",renderer:e}}),j=()=>({url:\"https://acdn.adnxs.com/video/outstream/ANOutstreamVideo.js\",options:{adText:\"\",aspectRatio:\"16:9\",skippable:{enabled:!0,skipButtonText:\"SKIP\"}}}),B=e=>{const t=e.ortb2Imp;return t?(t.ext.data={...t.ext.data,adUnitName:e.adUnitName},t):{ext:{data:{adUnitName:e.adUnitName}}}},M=(e,t)=>{const i=e.floors;i&&t&&(i.values.banner=Math.max(i.values.banner,t));const n={code:e.divId,pubstack:{adUnitName:e.adServerAdUnitName,adUnitPath:W(e)},floors:i,ortb2Imp:B(e)},s=e.getTargetings();if(s.find((e=>\"ad_index\"===e.key))){const e=s.find((e=>\"ad_index\"===e.key))?.value;n.pubstack&&(n.pubstack.tags=[`ad_index:${e}`])}return n};function V(e,t){const i=M(e,t?.newFloor);if(E(e))return[{...i,bids:U(e.bidders),mediaTypes:x(e.instreamParams?.mediaTypeParams)}];const n=(t,n,s)=>{const a=function(e,t){const i={};return t.includes(\"Banner\")&&T(e)&&t.includes(\"Skin\")&&$(e)?i.banner=L([[1800,1e3],...e.bannerSizes]).banner:t.includes(\"Banner\")&&T(e)?i.banner=L(e.bannerSizes).banner:t.includes(\"Skin\")&&$(e)&&(i.banner=L([[1800,1e3]]).banner),t.includes(\"Outstream\")&&function(e){return e.mediaTypes.includes(\"Outstream\")}(e)&&(i.video=D(j()).video),t.includes(\"Native\")&&function(e){return e.mediaTypes.includes(\"Native\")&&void 0!==e.nativeParams}(e)&&(i.native=N(e.nativeParams).native),i}(e,t);if(0===Object.keys(a).length)b(`Bidder ${n.bidder} has no Prebid mediaType ${t} for adUnit ${e.adUnitName}`);else{const e=s.find((e=>JSON.stringify(e.mediaTypes)===JSON.stringify(a)));e?e.bids.push(P(n)):s.push({...i,bids:[P(n)],mediaTypes:a})}};return e.bidders.reduce(((e,i)=>(t?.multiformatBidders?.includes(i.bidder)?n(i.mediaTypes,i,e):i.mediaTypes.forEach((t=>{n([t],i,e)})),e)),[])}function W(e){const t=[...e.getTargetings()],i=(e.pubstackDeclarationTargetingKeys??[]).map((e=>{const i=t.find((t=>t.key===e));if(i)return i;{const t=k(window)[e];return t?{key:e,values:t}:void 0}})).filter((e=>!!e)).map((e=>`${e.key}=${R(e)}`)).join(\"&\"),n=e.adUnitPath.includes(\"?\")?\"&\":\"?\";return i.length>0?`${e.adUnitPath}${n}${i}`:e.adUnitPath}function z(e){return null!==document.getElementById(e)}function F(e){const t=document.getElementById(e);if(t){return t.getBoundingClientRect().top}return p(`[DOM] div ${e} not found during get distance from top`),0}function H(e,t){return new Promise(((i,n)=>e().then(i).catch((i=>{return t>1?(s=100,new Promise((e=>setTimeout(e,s)))).then(H.bind(null,e,t-1)).then((e=>e)).catch(n):n(i);var s}))))}const G=async(e,t=3)=>H((()=>import(e)),t).then((e=>e)).catch((i=>{throw v(`Failed to load module ${e} after ${t} retries`,i),new Error(\"Too many failed attempt to load external module.\")})),K=(e,t)=>{const i=function(e,t){const i=document.createElement(\"script\");return i.setAttribute(\"src\",e),i}(e);i.setAttribute(\"async\",\"true\"),i.setAttribute(\"data-kleanads\",\"true\"),document.head.append(i)};async function q(e,t){const{beforeStart:i}=t,n=function(e,t){return(e.extraScripts??[]).filter((i=>i.tagId===e.tagId&&!!i.beforeStart===t))}(e,i);if(n.length>0){p(\"[extra-script]\",i?\"Loading extraScripts before config\":\"Loading extraScripts after consent\");const e=n.filter((({synchronous:e})=>!e)).flatMap((e=>e.scripts)),t=n.filter((({synchronous:e})=>e)).flatMap((e=>e.scripts));if(e.length>0&&(p(`[extra-script] downloading async extra scripts ${e.join(\"\\n\")}`),e.forEach((e=>K(e)))),t.length>0){p(`[extra-script] downloading sync extra scripts ${t.join(\"\\n\")}`);for(const e of t)try{await G(e)}catch(e){b(\"[extra-script] Error while loading sync extra script\",e)}}}}function Y(e,t){return e.size<t.size?1:e.size>t.size?-1:0}function X(e){if(\"fluid\"===e)return\"fluid\";const[t,i]=e.split(\"x\");return[parseInt(t,10),parseInt(i,10)]}function J(e){return e>=100||e>=Math.floor(100*Math.random())+1}function Q(e){return Array.isArray(e)&&2===e.length&&\"number\"==typeof e[0]&&\"number\"==typeof e[1]}const Z=[\"master\",\"master-1\",\"master-2\",\"master-3\",\"companion\",void 0],ee=(e,t)=>Z.indexOf(e.roadblock)-Z.indexOf(t.roadblock)||F(e.divId)-F(t.divId);class te{constructor(){this.uprEnabled=!0,this.disableGptPreAuction=!1,this.kleanadsRunCount=1}setUprState(e,t){switch(\"true\"===function(e,t){const i=`meta[name=\"${t}\"]`,n=e.document.querySelector(i);return null!==n?n.getAttribute(\"content\"):null}(window,\"adm_feature:upr_disabled\")&&(e=\"disabled\"),e){case\"disabled\":this.uprEnabled=!1;break;case\"tested\":this.uprEnabled=J(t??50),this.uprTested=!0;break;default:this.uprEnabled=!0}}setKleanadsRunCount(e){this.kleanadsRunCount=e}static getInstance(){return te.instance||(te.instance=new te),te.instance}}const ie=\"ad_floor-rule\",ne=\"prkv\";function se(e){if(\"string\"==typeof e)return!0;if(Array.isArray(e)){for(const t of e)if(\"string\"!=typeof t)return!1;return!0}return!1}function ae(e,t){const i=e.getTargeting(t);i&&i.length>0&&e.clearTargeting(t)}const re=\"bid_bidder\",oe=\"bid_size\",de=\"bid_mediatype\",ce=\"[instream] [Dailymotion]\";class le{constructor(e,t,i,n){this.callbackAdded=!1,this.configSetOnce=!1,this.adReadyToFetchReceivedOnce=!1,this.adReadyToFetchCallback=()=>{},this.declaredAdUnit=\"\",this.pubstackWindow=e,this.pageContext=t,this.device=i,this.targetings=he(this.device,this.pubstackWindow),this.instreamType=n??\"dailymotion-v1\"}declareAdUnit(e){\"dailymotion-v3\"===this.instreamType&&\"\"===this.declaredAdUnit&&(this.declaredAdUnit=e.divId,this.executeWhenAdServerReady((()=>{const t=this.pubstackWindow.dailymotion;t?t.getPlayer(e.divId).then((t=>{t.on(this.pubstackWindow.dailymotion?.events.AD_READYTOFETCH,(()=>{p(`${ce} ${e.divId} event AD_READYTOFETCH received`),this.adReadyToFetchReceivedOnce||(this.adReadyToFetchReceivedOnce=!0),this.adReadyToFetchCallback()}))})):v(`${ce} unable to get dailymotion on the page`)})))}setApsTargetings(e){if(0!==e.length){p(`${ce} putting targeting keys for aps auction of winning bidder`,e[0]);try{const t=e[0].helpers?.qsParams();if(t)return void this.targetings.push(t.slice(1));const i=e[0].qsParams;if(i)return void this.targetings.push(i.slice(1))}catch(e){v(`${ce} error setting APS targetings`,e)}}}executeWhenAdServerReady(e){this.pubstackWindow.dailymotion?e():setTimeout(this.executeWhenAdServerReady.bind(this,e),100)}async callAdServer(e,t){const i=e.divId;if(\"dailymotion-v3\"===this.instreamType&&e.divId!==this.declaredAdUnit)return void v(`${ce} ${e.divId} call ad server but it is not the same divId as the one declared ${this.declaredAdUnit}`);if(!E(e))return void v(`${ce} ${i} is not an instream adUnit`);p(`${ce} ${i} call ad server`);const n=await(this.pubstackWindow.dailymotion?.getPlayer(i));if(!n)return void v(`${ce} no player found for ${i}`);p(`${ce} ${i} player:`,n);const s=await n.getState();switch(this.customConfig=function(e,t,i,n){const s=function(e){return e.getTargetings().map(ue)}(e);p(`${ce} adUnitTargetings`,s);const a=Array.from(i.entries()).filter((([,e])=>!!e)).map((([e,t])=>`${e}=${t}`)),r=s.concat(t).concat(a).join(\"&\"),o={...e.instreamParams.vast,vpmute:n.playerIsMuted?1:0},d=Object.keys(o).map((function(e){return`${e}=${o[e]}`})).join(\"&\"),c=e.instreamParams.adDeactivationContext;let l=!1;if(c){const e=i.get(c.key);l=!!e&&c.values.includes(e)}const u={dynamiciu:e.adUnitPath,keyvalues:r,keyvalues2:d};return l?{...u,premium:\"true\"}:u}(e,this.targetings,this.pageContext,s),p(`${ce} generated customConfig`,this.customConfig),this.instreamType){case\"dailymotion-v1\":p(`${ce} ${i} setCustomConfig`,this.customConfig),n.setCustomConfig(this.customConfig),p(`${ce} ad server called ${i}`),document.dispatchEvent(new CustomEvent(\"admDailymotionReady\",{detail:{divId:i}})),p(`${ce} ${i} admDailymotionReady event dispatched`);break;case\"dailymotion-v2\":this.callbackAdded||(p(`${ce} ${i} add callback to event ${this.pubstackWindow.dailymotion?.events.AD_READYTOFETCH}`),n.on(this.pubstackWindow.dailymotion?.events.AD_READYTOFETCH,(()=>{p(`${ce} ${i} event AD_READYTOFETCH received, setCustomConfig`,this.customConfig),this.customConfig&&n.setCustomConfig(this.customConfig),t&&(p(`${ce} ${i} event AD_READYTOFETCH, call \"onCallFinished\"`),t())})),this.callbackAdded=!0);break;case\"dailymotion-v3\":!this.configSetOnce&&this.adReadyToFetchReceivedOnce?(p(`${ce} ${e.divId} event AD_READYTOFETCH already received, setting customConfig\"`,this.customConfig),this.customConfig&&(n.setCustomConfig(this.customConfig),this.configSetOnce=!0),t&&(p(`${ce} ${e.divId} event AD_READYTOFETCH, call \"onCallFinished\"`),t())):this.adReadyToFetchCallback=()=>{p(`${ce} ${e.divId} event AD_READYTOFETCH callback, setting customConfig\"`,this.customConfig),this.customConfig&&n.setCustomConfig(this.customConfig)}}}setPbjsTargetings(e,t){if(e){p(`${ce} put pbjs targeting keys for ${t.divId}`);const i=e.getAdserverTargetingForAdUnitCode(t.divId);for(const e of Object.keys(i)){const n=i[e];se(n)?this.targetings.push(`${e}=${n}`):b(`${ce} [targeting] unable to set targeting ${e}=${n} on adUnit ${t.divId}`)}}else v(`${ce} no pbjs given: unable to put header bidding targetings`)}cleanTargetings(){this.targetings.splice(0),this.targetings.push(...he(this.device,this.pubstackWindow))}}function ue(e){const t=O(e);return`${e.key}=${\"string\"==typeof t?t:t.join(\",\")}`}function he(e,i){const n=[],s=k(i);Object.keys(s).forEach((e=>{const t=s[e].join(\",\");n.push(`${e}=${t}`)})),n.push(`${t}=1`),n.push(`device=${e}`);const a=te.getInstance().grapeshotValues;a?.length&&n.push(`gs_cat=${a.join(\",\")}`);try{const e=JSON.parse(i.localStorage._pdfps).slice(0,250).join(\",\");\"\"!==e?n.push(`permutive=${e}`):p(`[${ce}] no permutive targeting found`)}catch(e){p(`[${ce}] error reading permutive targeting, ${e}`)}return n}var ge,fe,pe;!function(e){e.BEGIN_INIT=\"begin_init\",e.CMP_RESPONSE_AVAILABLE=\"cmp_response_available\",e.MAIN_THREAD_END=\"main_thread_end\",e.GOOGLETAG_READY=\"googletag_ready\",e.APSTAG_READY=\"apstag_ready\",e.PREBID_READY=\"prebid_ready\"}(ge||(ge={})),function(e){e.BEGIN_CONFIGURE=\"begin_configure\",e.BEGIN_START=\"begin_start\",e.SPA_RELOAD=\"spa_reload\"}(fe||(fe={})),function(e){e.START_AUCTION=\"start_auction\",e.END_PBJS_AUCTION=\"end_pbjs_auction\",e.END_APS_AUCTION=\"end_aps_auction\",e.START_AD_SERVER_CALL=\"start_ad_server_call\",e.SLOT_RENDER_ENDED_TIME=\"slot_render_ended_time\",e.SLOT_RESPONSE_RECEIVED_TIME=\"slot_response_received_time\"}(pe||(pe={}));const me=[],be=[],ve=\"getEntriesByName\"in performance&&\"measure\"in performance&&\"mark\"in performance;function ye(e){me.includes(e)||(Ce(e),me.push(e))}function Ae(e){Ce(e)}function Ie(e,t){const i=function(e,t){return`${e}_${t}`}(e,t);be.includes(i)||(Ce(i),be.push(i))}function Ce(e){ve&&(performance.mark(e.toString()),m(`[performance] [mark] ${e}: ${performance.getEntriesByName(e)[0].startTime.toFixed(2)}`))}const Se=\"[consent]\";function ke(e){return new Promise(((t,i)=>{!function(e,t,i){(n=e,new Promise(((e,t)=>we(n,e)))).then((()=>{try{!function(e,t){const i=function(e){return e.__tcfapi}(e);i(\"addEventListener\",2,(e=>{if(e&&(\"useractioncomplete\"===e.eventStatus||\"tcloaded\"===e.eventStatus)){m(`${Se} Consent status`,e.eventStatus),ye(ge.CMP_RESPONSE_AVAILABLE);const i=function(e){if(!e.purpose.consents||0===Object.keys(e.purpose.consents).length)return!1;for(const t in e.purpose.consents)if(!e.purpose.consents[t])return!1;return!0}(e);t(i)}}))}(e,t)}catch(e){v(`${Se} Error while loading tcf api`,e),i(e)}})).catch((e=>{v(`${Se} Error while loading tcf api`,e),i(e)}));var n}(e,t,i)}))}function we(e,t,i){const n=e.__tcfapi;n&&function(e){if(\"function\"!=typeof e)throw new Error(\"__tcfapi is not a function\");return!0}(n)?t():setTimeout((()=>we(e,t)),100)}const Ee=\"[context]\";function Te(e){return e.map((e=>({key:e.key.toLowerCase(),defaultValue:e.defaultValue?e.defaultValue.toLowerCase():void 0,otherValues:e.otherValues?e.otherValues.map((e=>e.toLowerCase())):[]})))}function $e(e,t,i){(function(e,t,i){const n=[],s=Te(t).filter((e=>void 0!==e.defaultValue)).map((e=>e.key.toLowerCase())),a=[];e.document.querySelectorAll('meta[name^=\"pbstck_context:\"]').forEach((e=>{const t=e.attributes.getNamedItem(\"name\")?.value.substring(15).toLowerCase();t&&a.push(t)}));for(const e of i)s.includes(e)&&!a.includes(e)&&n.push(e);return n})(e,t,i).forEach((e=>{b(`[context] Missing ${e} context key used in adunit path`)}))}const _e={pbjsFinished:!1,apsFinished:!1},Re=\"[executor] [instream]\";class Oe{constructor(e,t,i,n){this.rank=1,this.adServer=e,this.pbjs=t,this.aps=i,this.kleanadsRunCount=n}executeAdCallRoadblock(e){this.executeAdCall(e)}executeAdCall(e){if(0===e.length)return void b(`${Re} no adunit to monetize`);e.length>1&&b(`cannot monetize multiple instream adunits, using only the first one ${e[0].divId}`);const t=e[0];this.adServer.declareAdUnit(t),this.adUnitAuctionStatus?b(`${Re} cannot make a new ad call, existing one on ${t.divId}.`):(p(`${Re} executeAdCall for adunit`,t),this.startAuction(t))}executeRefresh(e){this.adServer.cleanTargetings();const t={labels:[\"pubstackRefresh\",`pubstackRefreshRank:${e.rank}`]};this.startAuction(e.adUnit,t)}startAuction(e,t){this.adUnitAuctionStatus=_e,Ie(e.divId,pe.START_AUCTION),p(`${Re} starting auctions for ${e.divId}`);const i=te.getInstance().kleanadsRunCount;if(this.pbjs){const n=this.pbjs.getPbjs();this.pbjs.startPbjsAuction([e],(()=>{this.kleanadsRunCount===i?this.pbjsFinished(n,e):p(`${Re} kleanads run count has changed (from ${this.kleanadsRunCount} to ${i}), avoid calling pbjsFinished`)}),t)}this.aps&&this.aps.startApsAuction([e],(t=>{this.kleanadsRunCount===i?this.apsFinished(e,t):p(`${Re} kleanads run count has changed (from ${this.kleanadsRunCount} to ${i}), avoid calling apsFinished`)})),this.pbjs||this.aps||this.adServer.executeWhenAdServerReady((()=>{this.kleanadsRunCount===i?this.callAdServer(e):p(`${Re} kleanads run count has changed (from ${this.kleanadsRunCount} to ${i}), avoid calling AdServer`)}))}isAlreadyMonetized(){return!!this.adUnitAuctionStatus}pbjsFinished(e,t){p(`${Re} pbjs end callback for ${t.divId}`,e.getAllPrebidWinningBids()),Ie(t.divId,pe.END_PBJS_AUCTION),this.adServer.executeWhenAdServerReady((()=>{p(`${Re} pbjs end callback ad server ready ${t.divId}`),this.adServer.setPbjsTargetings(e,t),this.adUnitAuctionStatus&&(this.adUnitAuctionStatus.pbjsFinished=!0),this.canCallAdServer()&&this.callAdServer(t)}))}apsFinished(e,t){p(`${Re} aps end callback ${e.divId}`,t),Ie(e.divId,pe.END_APS_AUCTION),this.adServer.executeWhenAdServerReady((()=>{p(`${Re} aps end callback ad server ready ${e.divId}`),this.adServer.setApsTargetings(t),this.adUnitAuctionStatus&&(this.adUnitAuctionStatus.apsFinished=!0),this.canCallAdServer()&&this.callAdServer(e)}))}canCallAdServer(){const e=this.adUnitAuctionStatus;return this.aps&&!this.pbjs?e&&e.apsFinished:this.pbjs&&!this.aps?e&&e.pbjsFinished:this.pbjs&&this.aps?e&&e.apsFinished&&e.pbjsFinished:void 0}callAdServer(e){Ie(e.divId,pe.START_AD_SERVER_CALL),this.adServer.callAdServer(e,(()=>{p(`${Re} onCallFinished called, adding setTimeout to a new auction`),setTimeout((()=>{this.executeRefresh({adUnit:e,rank:this.rank}),this.rank++}),5e3)})),p(`${Re} ad server called ${e.divId}`)}}const Ue=\"[ExternalApi-AdServer]\";class Pe{constructor(e,t,i){this.callbacks={},this.pbjsRecords={},this.apsRecords={},this.knownAdUnits=[],this.pubstackWindow=e,this.pageContext=t,this.device=i}init(e,t,i,n){}prebidReady(e){}declareAdUnits(e){return this.knownAdUnits.push(...e.map((e=>e.divId))),Promise.resolve()}clean(){this.knownAdUnits=[],this.callbacks={},this.pbjsRecords={},this.apsRecords={}}registerExternalTargetingDeclaration(e){}addCallback(e,t){return!!this.knownAdUnits.includes(e)&&(p(`${Ue} addCallback - params`,e,t),this.callbacks[e]=t,this.pbjsRecords[e]={},this.apsRecords[e]={},!0)}callAdServer(e){p(`${Ue} callAdServer - START`),e.filter((e=>this.knownAdUnits.includes(e.divId))).forEach((e=>{try{p(`${Ue} callAdServer - inside forEach, run provided callback for divId:${e.divId}`);const i=function(e,i,n,s){const a={};n.forEach(((e,t)=>{e&&(a[t]=e)}));const r=k(i);Object.keys(r).forEach((e=>{a[e]=r[e].join(\",\")})),a[t]=\"1\",a.device=s;const o=te.getInstance().grapeshotValues;o?.length&&(a.gs_cat=o.join(\",\"));e.getTargetings().forEach((e=>{a[e.key]=R(e)}));try{const e=JSON.parse(i.localStorage._pdfps).slice(0,250).join(\",\");\"\"!==e?a.permutive=e:p(`[${Ue}] no permutive targeting found`)}catch(e){p(`[${Ue}] error reading permutive targeting, ${e}`)}return a}(e,this.pubstackWindow,this.pageContext,this.device);this.callbacks[e.divId]({...i,...this.pbjsRecords[e.divId],...this.apsRecords[e.divId]})}catch(e){v(`${Ue} error calling callback, ${e}`)}p(`${Ue} callAdServer - inside forEach, run test callback`)})),p(`${Ue} callAdServer - END`)}executeWhenAdServerReady(e){e()}setPbjsTargetings(e,t){e?(m(`${Ue} try to put pbjs targeting keys for ${t.map((e=>e.divId)).join(\",\")}`),t.forEach((t=>{if(this.pbjsRecords[t.divId]){const i=e.getAdserverTargetingForAdUnitCode(t.divId);for(const[e,n]of Object.entries(i))\"string\"==typeof n&&(this.pbjsRecords[t.divId][e]=n)}}))):v(`${Ue} no pbjs given: unable to put header bidding targetings`)}setApsTargetings(e,t){m(`${Ue} putting targeting keys for aps auction`,t),e.forEach((e=>{if(this.apsRecords[e.divId]){const i=t.find((t=>t.slotID===e.divId));if(i&&i.targeting)for(const[t,n]of Object.entries(i.targeting))\"string\"==typeof n&&(this.apsRecords[e.divId][t]=n)}}))}}let Le=4400;const xe=\"[APS]\";let Ne=!1,De=!1;function je(e){const t=e.apstag;if(t.kleanadsBlocker){p(`${xe} getting apstag from blocker's methods`);const e=t;return{...t,fetchBids:e.fetchBidsKleanads,setDisplayBids:e.setDisplayBidsKleanads}}return t}class Be{constructor(e,t){this.pubstackWindow=e,this.apsPubId=t}setEnableApsForTests(e){!function(e){v(`${xe} this function should be used only for testing purpose`),Ne=e}(e)}load(){!function(e){function t(t,i){je(e)?._Q?.push([t,i])}Ne=!0,e.apstag||(e.apstag={_Q:[]}),e.apstag.init=(...e)=>t(\"i\",e),e.apstag.fetchBids=(...e)=>t(\"f\",e),e.apstag.setDisplayBids=()=>{},e.apstag.targetingKeys=()=>[],K(\"//c.amazon-adsystem.com/aax2/apstag.js\")}(this.pubstackWindow)}startApsAuction(e,t){if(!Ne)return p(`${xe} skipping auction for adunits [${e.map((e=>e.divId)).join(\",\")}]`),void t([]);if(!De)return b(`${xe} cannot start auction: apstag is not initialized`),void t([]);const i=je(this.pubstackWindow);if(!i)return b(`${xe} cannot find apstag on the page`),void t([]);const n=function(e){return e.filter((e=>e.headerBiddingEnabled)).reduce(((e,t)=>{const i=t.mediaTypes;if(i.includes(\"Instream\")){const t={slotID:\"videoSlot\",mediaType:\"video\",sizes:[[640,480]]};return[...e,t]}if(T(t)){const i={slotID:t.divId,slotName:t.slotName,sizes:t.bannerSizes};return i.sizes.length?[...e,i]:e}if(i.includes(\"Outstream\")){const i={slotID:t.divId,mediaType:\"video\",sizes:[[640,480]]};return[...e,i]}return[]}),[])}(e);if(0===n.length)return m(`${xe} no slot created, not calling fetchbids`,n),void t([]);m(`${xe} apsSlots created`,n);let s=!1;setTimeout((()=>{s||(b(`${xe} fetchbids did not response before ${Le}ms, calling callback`),s=!0,t([]))}),Le),i.fetchBids({slots:n},(e=>{s||(s=!0,t(e))})),p(`${xe} called fetchBids`,n)}initAps(e,t){if(Ne){Le=e+1400,m(`${xe} configuring failsafe timeout to ${Le}`);const i=je(this.pubstackWindow);if(!i)return void b(`${xe} cannot find apstag on the page`);const n=t?.config;i.init({pubID:this.apsPubId,adServer:\"googletag\",bidTimeout:e,deals:!0,videoAdServer:\"DFP\",schain:n},(()=>{m(`${xe} apstag init done`),ye(ge.APSTAG_READY)})),De=!0}else p(`${xe} apstag init skipped`)}}function Me(e,t,i,n=(()=>!0)){return new Promise(((s,a)=>Ve(e,t,i,s,a,n)))}function Ve(e,t,i,n,s,a){if(e[t])try{a(e[t])?n():setTimeout((()=>Ve(e,t,i,n,s,a)),i)}catch(e){s(e)}else setTimeout((()=>Ve(e,t,i,n,s,a)),i)}const We=\"[GAM]\",ze=\"pbstck_ab_test\",Fe=\"xp_variant\",He=[3,1];let Ge=!1;const Ke=[],qe=50;function Ye(e,i,n,s,a){(function(e){return Me(e,\"googletag\",qe,(e=>e.apiReady??!1))})(e).then((()=>{p(`${We} googletag ready, starting initialization`),e.googletag.pubads().disableInitialLoad(),s?.disableSingleRequest?m(`${We} single request disabled`):e.googletag.pubads().enableSingleRequest()||v(\"unable to enable single request\"),function(e,i,n){const s=e.googletag.pubads();i.forEach(((e,t)=>{e&&s.setTargeting(t,e)}));const a=k(e);m(\"[targetings] setting page level targetings from meta declaration\",a),Object.keys(a).forEach((e=>{s.setTargeting(e,a[e])})),s.setTargeting(t,\"1\");const r=te.getInstance().grapeshotValues;r?.length&&(m(`${We} grapeshot: setting gs_cat gam targeting values`,r),s.setTargeting(\"gs_cat\",r));const o=n?.filter((e=>e.gamTargeting));o?.length&&(m(`${We} setting ab_test gam targeting values`,o),o.forEach((e=>{s.setTargeting(e.name,e.value)})));if(te.getInstance().uprTested){m(`${We} setting xp_variant/pbstck_ab_test gam targeting value any previous value will be ignored`);const e=`floor_optimization:${te.getInstance().uprEnabled}`;s.setTargeting(Fe,e),s.setTargeting(ze,e)}}(e,i,a),s&&s.ppidValue&&e.googletag.pubads().setPublisherProvidedId(s.ppidValue),s&&s?.threadYieldConfig&&e.googletag.setConfig({threadYield:s.threadYieldConfig}),e.googletag.enableServices(),n?.lazyLoadingGoogle?.googleFetchMarginPercent&&n?.lazyLoadingGoogle?.googleRenderMarginPercent&&e.googletag.pubads().enableLazyLoad({fetchMarginPercent:n.lazyLoadingGoogle.googleFetchMarginPercent,renderMarginPercent:n.lazyLoadingGoogle.googleRenderMarginPercent,mobileScaling:n.lazyLoadingGoogle.googleMobileScaling}),e.googletag.pubads().setCentering(!0),p(\"googletag initialized\"),Ge=!0,Ke.forEach((e=>e())),ye(ge.GOOGLETAG_READY),m(\"GAM\",\"googletag slotRenderEnded listener added\"),e.googletag.pubads().addEventListener(\"slotRenderEnded\",Xe),e.googletag.pubads().addEventListener(\"slotResponseReceived\",Je)}))}const Xe=e=>{const t=e.slot,i=t.getSlotElementId();Ie(i,pe.SLOT_RENDER_ENDED_TIME),function(e,t){ae(t,ie),ae(t,ne),m(`removed price rule targetings (${ne} & ${ie}) from slot ${e}`)}(i,t),m(`slot render ended for ${i}`)},Je=e=>{const t=e.slot.getSlotElementId();m(`slot response received for ${t}`),Ie(t,pe.SLOT_RESPONSE_RECEIVED_TIME)};function Qe(e,t){for(const i of e.getTargetings()){const n=O(i),s=i.key;t.setTargeting(s,n),m(`${We} adding targeting (${s}, ${n}) to adunit ${e.divId}`)}t.setTargeting(\"ad_adunitname\",[e.adServerAdUnitName])}function Ze(e){Ge?e():Ke.push(e)}class et{constructor(e,t){this.externalTargetingDeclarations=[],this.googletagSlotsInitialized={},this.pubstackWindow=e,this.prebidOrderIds=t}prebidReady(){}init(e,t,i,n){Ye(this.pubstackWindow,e,t,i,n)}declareAdUnits(e){return this.declareGoogleSlots(e)}registerExternalTargetingDeclaration(e){this.externalTargetingDeclarations.push(e)}clean(){this.externalTargetingDeclarations=[],this.executeWhenAdServerReady((()=>{p(`${We} cleaning slots`,this.pubstackWindow.googletag.pubads().getSlots().map((e=>e.getSlotElementId())),this.pubstackWindow.googletag.pubads().getSlots());const e=[];this.pubstackWindow.googletag.pubads().getSlots().forEach((t=>{const i=this.pubstackWindow.googletag.destroySlots([t]);m(`${We} slot ${t.getSlotElementId()} destroyed ? ${i}`),i||(e.push(t),p(`${We} slot ${t.getSlotElementId()} not destroyed, retrying later`))})),e.length?v(`${We} unable to destroy slot ${tt(e)}`):m(`${We} all slots destroyed`),this.pubstackWindow.googletag.pubads().removeEventListener(\"slotRenderEnded\",Xe),this.pubstackWindow.googletag.pubads().removeEventListener(\"slotResponseReceived\",Je),Ke.splice(0)}))}setPbjsTargetings(e,t){e?(m(`${We} try to put pbjs targeting keys for ${t.map((e=>e.divId)).join(\",\")}`),t.forEach((t=>{const i=this.getSlot(t,\"setPbjsTargetings\");i&&function(e,t,i){i.getTargetingKeys().forEach((e=>{\"bid_\"!==e.substring(0,4)&&\"hb_\"!==e.substring(0,3)||i.clearTargeting(e)}));const n=t.getAdserverTargetingForAdUnitCode(e.divId);for(const t of Object.keys(n)){const s=n[t];se(s)?i.setTargeting(t,s):b(`[targeting] unable to set targeting ${t}=${s} on adUnit ${e.divId}`)}i.setTargeting(\"kuc_version\",\"2503171622\")}(t,e,i)}))):v(`${We} no pbjs given: unable to put header bidding targetings`)}setApsTargetings(e,t){var i;m(`${We} putting targeting keys for aps auction`,t),i=this.pubstackWindow,je(i)?.setDisplayBids()}setRefreshTargeting(e){const t=this.getSlot(e.adUnit,\"setPbjsTargetings\");var i,n;t&&(i=t,n=e.rank,i.setTargeting(\"ad_refresh\",\"1\"),i.setTargeting(\"pbstck_refresh\",\"1\"),i.setTargeting(\"ad_refresh-rank\",function(e){return e<10?`${e}`:\"10-more\"}(n)))}callAdServer(e){m(`${We} preparing call to GAM for ${e.map((e=>e.divId)).join(\",\")}`,e);const t=this.pubstackWindow.googletag.pubads().getSlots(),i=e.map((e=>({adUnit:e,slot:t.find((t=>t.getSlotElementId()===e.divId))}))).filter((e=>!!e.slot));i.forEach((({adUnit:e,slot:t})=>Qe(e,t)));const n=i.map((({slot:e})=>e));p(`${We} calling GAM with ${n.length} slots`,tt(n)),A(\"googletag:refresh\",{slotIds:n.map((e=>e.getSlotElementId()))}),this.refresh(n)}refresh(e){e.every((e=>this.googletagSlotsInitialized[e.getSlotElementId()]))?this.pubstackWindow.googletag.pubads().refresh(e):setTimeout((()=>this.refresh(e)),50)}executeWhenAdServerReady(e){Ge?e():Ke.push(e)}renderListener(e){Ze((()=>{this.renderListenerCallback=t=>{const i=t.slot,n=t.campaignId,s={divId:i.getSlotElementId(),creativeId:t.creativeId,lineItemId:t.lineItemId??t.sourceAgnosticLineItemId,orderId:n,size:it(t),isEmpty:t.isEmpty,advertiserId:t.advertiserId};if(n&&this.prebidOrderIds.includes(n)){const e=i.getTargeting(re);e&&(s.hb_bidder=Array.isArray(e)?e[0]:e);const t=i.getTargeting(oe);t&&t[0]&&(s.size=X(t[0]));const n=i.getTargeting(de);n&&(s.hb_mediaType=Array.isArray(n)?n[0]:n)}e(s)},this.pubstackWindow.googletag.pubads().addEventListener(\"slotRenderEnded\",this.renderListenerCallback)}))}removeRenderListener(){this.renderListenerCallback&&(m(\"GAM\",\"removing render listener\"),this.pubstackWindow.googletag.pubads().removeEventListener(\"slotRenderEnded\",this.renderListenerCallback))}getSlot(e,t){const i=this.pubstackWindow.googletag.pubads().getSlots().filter((t=>t.getSlotElementId()===e.divId));if(0!==i.length)return i.length>1&&v(`${We} multiple slot found for adunit ${e.divId} on operation ${t}`),i[0];v(`${We} slot not found for adunit ${e.divId} on operation ${t}`)}declareGoogleSlots(e){return new Promise((t=>{Ze((()=>{const i=e.sort(ee),n=[],s=[];i.forEach((e=>{if(\"interstitial\"===e.outOfPageType){const t=window.googletag.defineOutOfPageSlot(e.adUnitPath,googletag.enums.OutOfPageFormat.INTERSTITIAL);t?(t.addService(googletag.pubads()),n.push(t),s.push(t),Qe(e,t)):v(`${We} unable to create interstitial slot for ${e.divId}`)}else if(document.getElementById(e.divId)){let t;if(\"default\"===e.outOfPageType)t=window.googletag.defineOutOfPageSlot(e.adUnitPath,e.divId)?.addService(googletag.pubads());else{const i=[He,...e.bannerSizes??[],...e.extraAdServerSizes??[]];$(e)&&i.push([1800,1e3]),t=window.googletag.defineSlot(e.adUnitPath,i,e.divId)?.addService(googletag.pubads())}t?(m(`${We} slot created, displaying ${e.divId}`),googletag.display(e.divId),s.push(t)):v(`${We} unable to create slot for ${e.divId}`)}else m(`${We} unable to display ${e.divId}, the div does not exist`)}));const a=s.map((e=>`\\n${e.getSlotElementId()} (${e.getAdUnitPath()})`)).join();if(p(`${We} slots defined for ${a}`),n.forEach((e=>{m(`${We} calling googletag.display for interstitial slot`,e),googletag.display(e)})),n.length>0&&googletag.pubads().refresh(n),this.externalTargetingDeclarations.length>0){const e=performance.now();let i;const n=new Promise((e=>{i=setTimeout((()=>{b(`${We} failsafe promise for external targeting declarations, some targetings may be missing`),e()}),3e3)}));Promise.race([Promise.all(this.externalTargetingDeclarations.map((e=>e(s)))).then((()=>{i&&clearTimeout(i)})),n]).then((()=>{const i=performance.now();m(`${We} external targetings declarations took ${i-e}ms`),s.forEach((e=>{this.googletagSlotsInitialized[e.getSlotElementId()]=!0})),t()}))}else s.forEach((e=>{this.googletagSlotsInitialized[e.getSlotElementId()]=!0})),t()}))}))}}function tt(e){return e.map((e=>`{id:${e.getSlotElementId()},path:${e.getAdUnitPath()}}`)).toString()}function it(e){return e.size}const nt=\"[instream] [Dailymotion]\";class st{constructor(e,t,i){this.dmIsInitialized=!1,this.dmInitializedQueue=[],this.declaredAdUnit=new Map,this.renderCallbacks=[],this.pubstackWindow=e,this.pageContext=t,this.device=i}renderListener(e){this.renderCallbacks.push(e)}removeRenderListener(){}setRefreshTargeting(){}init(){(function(e){return Me(e,\"dailymotion\",50)})(this.pubstackWindow).then((()=>{this.dmIsInitialized=!0,this.dmInitializedQueue.forEach((e=>e())),this.dmInitializedQueue=[]}))}prebidReady(){}clean(){this.declaredAdUnit.forEach((e=>e.cleanTargetings())),this.declaredAdUnit.clear()}registerExternalTargetingDeclaration(){}async declareAdUnits(e){for(const t of e)if(this.declaredAdUnit.has(t.divId))b(`${nt} ${t.divId} already declared`);else if(E(t)){const e=new dt(t,this.device,this.pubstackWindow);this.declaredAdUnit.set(t.divId,e),this.executeWhenAdServerReady((()=>{e.prepareAdUnit(),e.onImpression((()=>{this.renderCallbacks.forEach((e=>e({divId:t.divId,size:null,lineItemId:null,orderId:null,isEmpty:!1,advertiserId:null})))}))}))}else b(`${nt} ${t.divId} is not an Instream ad unit`)}setApsTargetings(e,t){if(0===t.length)return;const i=e.map((e=>this.declaredAdUnit.get(e.divId))).filter((e=>void 0!==e));p(`${nt} putting targeting keys for aps auction of winning bidder`,t[0]);try{const e=t[0].helpers?.qsParams();if(e)return void i.forEach((t=>t.pushTargeting(e.slice(1))));const n=t[0].qsParams;if(n)return void i.forEach((e=>e.pushTargeting(n.slice(1))))}catch(e){v(`${nt} error setting APS targetings`,e)}}executeWhenAdServerReady(e){this.dmIsInitialized?e():this.dmInitializedQueue.push(e)}async callAdServer(e){for(const t of e){const e=this.declaredAdUnit.get(t.divId);e?await e.callAdServer(this.pageContext):v(`${nt} no handler found for ${t.divId}`)}}setPbjsTargetings(e,t){if(e)for(const i of t){const t=this.declaredAdUnit.get(i.divId);if(t){p(`${nt} put pbjs targeting keys for ${i.divId}`);const n=e.getAdserverTargetingForAdUnitCode(i.divId);for(const e of Object.keys(n)){const s=n[e];se(s)?t.pushTargeting(`${e}=${s}`):b(`${nt} [targeting] unable to set targeting ${e}=${s} on adUnit ${i}`)}}else v(`${nt} no handler found for ${i.divId}`)}else v(`${nt} no pbjs given: unable to put header bidding targetings`)}cleanTargetings(){this.declaredAdUnit.forEach((e=>e.cleanTargetings()))}}function at(e){const t=O(e);return`${e.key}=${\"string\"==typeof t?t:t.join(\",\")}`}function rt(e,t,i,n){const s=function(e){return e.getTargetings().map(at)}(e);p(`${nt} adUnitTargetings`,s);const a=Array.from(i.entries()).filter((([,e])=>!!e)).map((([e,t])=>`${e}=${t}`)),r=s.concat(t).concat(a).join(\"&\"),o={...e.instreamParams.vast,vpmute:n.playerIsMuted?1:0},d=Object.keys(o).map((function(e){return`${e}=${o[e]}`})).join(\"&\"),c=e.instreamParams?.adDeactivationContext;let l=!1;if(c){const e=i.get(c.key);l=!!e&&c.values.includes(e)}const u={dynamiciu:e.adUnitPath,keyvalues:r,keyvalues2:d};return l?{...u,premium:\"true\"}:u}function ot(e,i){const n=[],s=k(i);Object.keys(s).forEach((e=>{const t=s[e].join(\",\");n.push(`${e}=${t}`)})),n.push(`${t}=1`),n.push(`device=${e}`);const a=te.getInstance().grapeshotValues;a?.length&&n.push(`gs_cat=${a.join(\",\")}`);try{const e=JSON.parse(i.localStorage._pdfps).slice(0,250).join(\",\");\"\"!==e?n.push(`permutive=${e}`):p(`[${nt}] no permutive targeting found`)}catch(e){p(`[${nt}] error reading permutive targeting, ${e}`)}return n}class dt{constructor(e,t,i){this.targetings=[],this.configSetOnce=!1,this.adReadyToFetchReceivedOnce=!1,this.adReadyToFetchCallback=()=>{},this.impressionCallbacks=[],this.adUnit=e,this.device=t,this.pubstackWindow=i,this.targetings=ot(t,i)}pushTargeting(e){this.targetings.push(e)}async callAdServer(e){const t=this.adUnit.divId;p(`${nt} ${t} call ad server`);const i=await(this.pubstackWindow.dailymotion?.getPlayer(t));if(!i)return void v(`${nt} no player found for ${t}`);p(`${nt} ${t} player:`,i);const n=await i.getState();this.customConfig=rt(this.adUnit,this.targetings,e,n),p(`${nt} generated customConfig for ${t}`,this.customConfig),!this.configSetOnce&&this.adReadyToFetchReceivedOnce?(p(`${nt} ${t} event AD_READYTOFETCH already received, setting customConfig\"`,this.customConfig),this.customConfig&&(i.setCustomConfig(this.customConfig),this.configSetOnce=!0)):this.adReadyToFetchCallback=()=>{p(`${nt} ${t} event AD_READYTOFETCH callback, setting customConfig\"`,this.customConfig),this.customConfig&&i.setCustomConfig(this.customConfig)}}prepareAdUnit(){const e=this.pubstackWindow.dailymotion;e?e.getPlayer(this.adUnit.divId).then((e=>{e.on(this.pubstackWindow.dailymotion?.events.AD_READYTOFETCH,(()=>{p(`${nt} ${this.adUnit.divId} event AD_READYTOFETCH received`),this.adReadyToFetchReceivedOnce||(this.adReadyToFetchReceivedOnce=!0),this.adReadyToFetchCallback()})),e.on(this.pubstackWindow.dailymotion?.events.AD_IMPRESSION,(()=>{this.impressionEvent()}))})):v(`${nt} unable to get dailymotion on the page`)}cleanTargetings(){this.targetings.splice(0),this.targetings.push(...ot(this.device,this.pubstackWindow))}impressionEvent(){this.impressionCallbacks.forEach((e=>e()))}onImpression(e){this.impressionCallbacks.push(e)}}const ct=\"[Local-AdServer]\";class lt{constructor(){this.managedDivs=[],this.callbacks=[]}prebidReady(e){this.pbjs=e}callAdServer(e){this.pbjs?(p(`${ct} callAdServer`,e),e.forEach((e=>{if(this.managedDivs.includes(e.divId)){const t=this.pbjs.getHighestCpmBids(e.divId);if(t.length>0){const e=t[0];try{!function(e,t){if(p(`${ct} renderOne`,t),!t||!t.adId)throw new Error(`${ct} no winning bid or adId provided ${t}`);{const i=document.getElementById(t.adUnitCode);if(!i)throw new Error(`${ct} unable to find div ${t.adUnitCode}`);{const n=i.getElementsByTagName(\"iframe\");p(`${ct} found ${n.length} iframe to remove`),Array.from(n).forEach((e=>e.remove()));const s=document.createElement(\"iframe\");s.scrolling=\"no\",s.frameBorder=\"0\",s.marginHeight=\"0\",s.name=`prebid_ads_iframe_${t.adUnitCode}`,s.title=\"3rd party ad content\",s.sandbox?.add(\"allow-forms\",\"allow-popups\",\"allow-popups-to-escape-sandbox\",\"allow-same-origin\",\"allow-scripts\",\"allow-top-navigation-by-user-activation\"),s.setAttribute(\"aria-label\",\"Advertisment\"),s.style.setProperty(\"border\",\"0\"),s.style.setProperty(\"margin\",\"0\"),s.style.setProperty(\"overflow\",\"hidden\"),i.appendChild(s);const a=s.contentWindow?.document;if(!a)throw new Error(`${ct} error while getting document from iframe`);{e.renderAd(a,t.adId);const i=\"/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */button,hr,input{overflow:visible}progress,sub,sup{vertical-align:baseline}[type=checkbox],[type=radio],legend{box-sizing:border-box;padding:0}html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}details,main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:ButtonText dotted 1px}fieldset{padding:.35em .75em .625em}legend{color:inherit;display:table;max-width:100%;white-space:normal}textarea{overflow:auto}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}[hidden],template{display:none}\",n=a.createElement(\"style\");n.appendChild(a.createTextNode(i)),a.head.appendChild(n)}}}}(this.pbjs,e);const t={divId:e.adUnitCode,isEmpty:!1,hb_bidder:e.adserverTargeting.bid_bidder,hb_mediaType:e.adserverTargeting.bid_mediatype,size:e.adserverTargeting.bid_size?X(e.adserverTargeting.bid_size):null,advertiserId:null,lineItemId:null,orderId:null,creativeId:null};this.renderListenerCallback(t)}catch(e){v(`${ct} unable to render: ${e}`)}}else{const t={divId:e.divId,isEmpty:!0,size:null,advertiserId:null,lineItemId:null,orderId:null,creativeId:null};this.renderListenerCallback(t)}}}))):v(`${ct} pbjs is not available`)}clean(){p(`${ct} cleanAdUnits - START`),this.managedDivs.forEach((e=>{const t=document.getElementById(e);if(t){const e=t.getElementsByTagName(\"iframe\");p(`${ct} found ${e.length} iframe to remove`),Array.from(e).forEach((e=>e.remove()))}})),this.managedDivs=[],p(`${ct} cleanAdUnits - END`,this.managedDivs)}declareAdUnits(e){return p(`${ct} declareAdUnits (adUnits, managedDivs)`,e,this.managedDivs),e.forEach((e=>{this.managedDivs.includes(e.divId)?v(`${ct} adUnit already declared ${e.divId}`):this.managedDivs.push(e.divId)})),Promise.resolve(void 0)}executeWhenAdServerReady(e){p(`${ct} executeWhenAdServerReady`,e),e()}init(e,t,i,n){p(`${ct} init (nothing to do), this are the input params:`,e,t,i,n)}removeRenderListener(){p(`${ct} removeRenderListener`),this.callbacks=[]}renderListenerCallback(e){p(`${ct} renderListenerCallback called event:`,e),this.callbacks.forEach((t=>t(e)))}renderListener(e){p(`${ct} renderListener`,e),this.callbacks.push(e)}setApsTargetings(){}setPbjsTargetings(){}setRefreshTargeting(){}registerExternalTargetingDeclaration(){}}function ut(e,t,i,n){navigator.sendBeacon(`https://intake.pbstck.com/v1/intake/gam-impression?sId=${t}&tId=${e}&c=1&s=${n}&v=${i}`)}class ht{constructor(){this.name=\"AdServer\",this.scriptLoaded=!1}get adServer(){return this._adServer}get instreamAdServer(){return this._instreamAdServer}get externalApiAdServer(){return this._externalApiAdServer}async onAfterConsentRefused({config:e}){if(!this._adServer)switch(e.consentlessMode){case\"GAM\":this._adServer=new et(window,e.globalRefreshConfig?.prebidOrderIds||[]),this._adServer.renderListener((t=>{t.isEmpty||ut(e.tagId,e.stack.scopeId,e.kleanadsVersion,e.stackVersion)})),this.scriptLoaded||(K(\"https://pagead2.googlesyndication.com/tag/js/gpt.js\"),this.scriptLoaded=!0);break;case\"local\":this._adServer=new lt;break;default:p(\"AdServerModule - onAfterConsentRefused - no ad server configured for consentless\")}}async onAfterConsentAccepted({config:e}){this._adServer||(this._adServer=new et(window,e.globalRefreshConfig?.prebidOrderIds||[]),this._adServer.renderListener((t=>{t.isEmpty||ut(e.tagId,e.stack.scopeId,e.kleanadsVersion,e.stackVersion)})),this.scriptLoaded||(K(\"https://securepubads.g.doubleclick.net/tag/js/gpt.js\"),this.scriptLoaded=!0))}async onStackConfigLoad({config:e,stackConfig:t}){!this._externalApiAdServer&&t.adUnits.some((e=>e.externalAdServer))&&(this._externalApiAdServer=new Pe(window,e.pageContext,e.device)),this._adServer?(this._adServer.init(e.pageContext,t.lazyLoading,t.gamConfig,t.runningABTest),\"dailymotion-v3\"===e.instreamType&&t.adUnits.find((e=>e.isInstream))&&(this._instreamAdServer=new st(window,e.pageContext,e.device),this._instreamAdServer.init(e.pageContext,t.lazyLoading,t.gamConfig,t.runningABTest))):v(\"AdServerModule - onStackConfigLoad - no ad server configured\")}async onPrepareAdUnits({toPreparedAdUnits:e}){const t=(e??[]).filter((e=>!e.externalAdServer)),i=t.filter((e=>!e.mediaTypes.includes(\"Instream\"))),n=t.filter((e=>e.mediaTypes.includes(\"Instream\"))),s=(e??[]).filter((e=>e.externalAdServer));return this._externalApiAdServer?.declareAdUnits(s),this._instreamAdServer&&n.length>0?Promise.all([this._instreamAdServer.declareAdUnits(n),this._adServer?.declareAdUnits(i)]).then((()=>{})):this._adServer?.declareAdUnits(i)}async onAfterPrebidReady({prebid:e}){const t=e.getPbjs();this._adServer?this._adServer.prebidReady(t):v(\"AdServerModule - onAfterPrebidReady - no ad server configured\")}async clean(){this._externalApiAdServer?.clean(),this._adServer?this._adServer.clean():v(\"AdServerModule - clean - no ad server configured\")}}class gt{constructor(){this.name=\"Aps\"}get aps(){return this._aps}async onStackConfigLoadSync({stackConfig:e}){this._aps=function(e,t){if(e&&t.some((e=>e.headerBiddingEnabled&&(e.isInstream||e.canOutstream||e.sizes.some((e=>\"fluid\"!==e)))))){p(`${xe} downloading amazon apstag`);const t=new Be(window,e);return t.load(),t}}(e.tamConfig?.apsPubId,e.adUnits)}async onStackConfigLoad({config:e,stackConfig:t}){const i=t.tamConfig?.disableSchain,n=i?void 0:t.prebidConfig?.pbjsConfig.schain;this._aps?.initAps(t.prebidConfig?.adCallTimeout??e.adCallTimeout,n)}async clean(){}}const ft=\"[ModuleService]\";class pt{constructor(e,t){this.modules=t,this.lifecycleState={config:e},m(`${ft} ${t.length} modules registered: ${t.map((e=>e.name)).join(\", \")}`);const i=this.modules.filter((e=>!!e.load));m(`${ft} Loading modules, ${i.length} modules to load`),this.loadModules(i)}getModules(){return this.modules}getLoadedModuleInstance(e){return this.modules.find((t=>t instanceof e))}loadModules(e){e.length&&m(`${ft} Loading modules: ${e.map((e=>e.name)).join(\", \")}`);for(const t of e)try{t.load?.(this.lifecycleState)}catch(e){v(`${ft} Error while loading module ${t.name}`,e)}}async modulesDispatchEvent(e,...t){this.lifecycleState={...this.lifecycleState,...t[0]};const i=this.lifecycleState,n=this.modules.filter((t=>t[e]&&\"function\"==typeof t[e]||t[`${e}Sync`]&&\"function\"==typeof t[`${e}Sync`]));m(`${ft} event call: ${e}. ${n.map((e=>e.name)).join(\", \")}`);const s=[];for(const t of n){const n=t[`${e}Sync`]?.(i);n instanceof Promise&&s.push(n)}return await Promise.all(s),new Promise((t=>{const s=[];for(const t of n){const n=t[e]?.(i);n instanceof Promise&&s.push(n)}t(s)}))}async modulesCleanUp(){const e=this.modules;e.length&&m(`${ft} Cleaning modules: ${e.map((e=>e.name)).join(\", \")}`);for(const t of e)await t.clean(this.lifecycleState);this.modules=[]}}const mt=[];for(let e=0;e<256;++e)mt.push((e+256).toString(16).slice(1));let bt;const vt=new Uint8Array(16);var yt={randomUUID:\"undefined\"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function At(e,t,i){if(yt.randomUUID&&!e)return yt.randomUUID();const n=(e=e||{}).random??e.rng?.()??function(){if(!bt){if(\"undefined\"==typeof crypto||!crypto.getRandomValues)throw new Error(\"crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\");bt=crypto.getRandomValues.bind(crypto)}return bt(vt)}();if(n.length<16)throw new Error(\"Random bytes length must be >= 16\");return n[6]=15&n[6]|64,n[8]=63&n[8]|128,function(e,t=0){return(mt[e[t+0]]+mt[e[t+1]]+mt[e[t+2]]+mt[e[t+3]]+\"-\"+mt[e[t+4]]+mt[e[t+5]]+\"-\"+mt[e[t+6]]+mt[e[t+7]]+\"-\"+mt[e[t+8]]+mt[e[t+9]]+\"-\"+mt[e[t+10]]+mt[e[t+11]]+mt[e[t+12]]+mt[e[t+13]]+mt[e[t+14]]+mt[e[t+15]]).toLowerCase()}(n)}const It=\"[pbjs][initPbjs][sublime]\";function Ct(e,t){const i=function(e,t){const i=e.filter((e=>e.bidders.find((e=>kt(e.bidder,t)))));if(0===i.length)return;if(i.length>1)return void b(`${It} Sublime bidder has multiple adUnits ${i.map((e=>e.divId)).join(\"\")}`,i);const n=i[0].bidders.find((e=>kt(e.bidder,t)))?.params;if(n){const e=n.zoneId;if(e&&(\"string\"==typeof e||\"number\"==typeof e))return`${e}`}else b(`${It} unable to extract Sublime zoneId from ${i[0].divId}`,i[0])}(e,t);if(i){const e=`https://sac.ayads.co/sublime/${i}/prebid`;m(`${It} loading sublime script ${e}`),K(e)}}function St(e,t){const i=function(){window.sublime=window.sublime||{};const e=window.sublime.notifyId||At();return window.sublime.notifyId=e,e}();return kt(e.bidder,t)?(m(`${It} generate notify id`),{...e,params:{...e.params,notifyId:i}}):e}function kt(e,t=[]){return\"sublime\"===e||t?.some((t=>\"sublime\"===t.bidderSource&&t.bidderLabel===e))}function wt(e,t){return e.flatMap((e=>Et(e,t)))}function Et(e,t){return[e,...t?.filter((t=>t.bidderSource===e)).map((e=>e.bidderLabel))||[]]}const Tt=(e,t)=>e.delimiter===t.delimiter&&\"|\"===e.delimiter&&e.fields.length+1===t.fields.length&&e.fields.every(((e,i)=>e===t.fields[i]));function $t(e){const t=e.flatMap((e=>e.bidders)).map((e=>e.bidder));return[...new Set(t)]}const _t=1900,Rt=\"[pbjs]\";function Ot(e,t){const i=e.cpm,n=i>0?function(e,t){let i;if(t.forEach((t=>{const n=parseFloat(t.max);n>e&&(i=!i||n<parseFloat(i.max)?t:i)})),!i)return Math.max(...t.map((e=>parseFloat(e.max))));const n=parseFloat(i.increment);return parseFloat((Math.floor(e/n)*n).toFixed(2))}(i,t):0,s=Math.max(...t.map((e=>parseFloat(e.max))));return Math.min(n,s).toFixed(2)}function Ut(e,t,i,n,s){const a=t.filter((e=>e.headerBiddingEnabled&&e.bidders.length>0));m(`${Rt} using only ad units with prebid enabled`,a);const r=a.flatMap((t=>{if(t.dynamicPrebidFloor){const i=e.getHighestCpmBids(t.divId);if(i.length>0){const e=i[0].cpm;return V(t,{newFloor:Math.floor(100*e)/100,multiformatBidders:s})}}return V(t,{multiformatBidders:s})}));if(r.length>0){const t=n?.timeout,s=n?.labels,o=function(e){const t=e.getConfig(\"bidderTimeout\");if(t){if(\"number\"==typeof t)return t+_t;if(parseInt(t))return parseInt(t)+_t}return 3e3+_t}(e);let d=!1;setTimeout((()=>{d||(b(`${Rt} prebid requestBids did not response before ${o}ms, calling callback`),d=!0,i())}),o);const c=()=>{d||(d=!0,i())};if(!(e=>1===new Set(e.map((e=>e.floors)).filter((e=>void 0!==e)).map((e=>[...e.schema.fields,e.schema.delimiter].join(\"\")))).size)(a)){const e=(e=>e.map((e=>e.floors)).filter((e=>void 0!==e)).map((e=>e.schema)).reduce(((e,t)=>(e?t.fields.length>e.fields.length&&(e=t):e=t,e)),void 0))(a);e&&(m(`${Rt} floors schema are not the same, unifying schema`),((e,t)=>{e.forEach((i=>{if(i.floors&&i.floors?.schema!==t){const n=i.floors.schema;if(Tt(n,t)){i.floors.schema=t;const e=i.floors.values;i.floors.values={};for(const t of Object.keys(e))i.floors.values[`${t}|*`]=e[t]}else v(`Unable to unify schema for adUnits ${e.map((e=>e.divId)).join(\", \")}.`,t)}}))})(a,e))}e.requestBids({timeout:t,adUnits:r,bidsBackHandler:c,labels:s}),p(`${Rt} called requestBids`,r)}else p(`${Rt} no prebid auction to start for [${t.map((e=>e.divId)).join(\",\")}]`),i()}function Pt(e,t,i){const n=e.flatMap((e=>e.bidders)).map((e=>e.bidder)),s=[...new Set(n)],a=[t,...i?.filter((e=>e.bidderSource===t)).map((e=>e.bidderLabel))||[]];return s.some((e=>a?.includes(e)))}class Lt{constructor(e){this.pbjs=e.getPbjs()}initPbjs(e,t,i,n,s){this.multiformatBidders=s,function(e,t,i,n,s){m(`${Rt}[initPbjs] Start prebid initialization`);const{currency:a,userSync:r,priceGranularity:o,bidderAdjustments:d,bidderAliases:c,bidderConfigs:l,floors:u,analytics:h,schain:g,outbrain:f,realTimeData:v,allowLocalStorage:y,dsaConfig:A,s2sConfig:I,enableTIDs:C,useBaseGvlid:S}=i;if(e.setConfig(n),a&&(m(`${Rt}[initPbjs] set currency config`,a),e.setConfig({currency:a,priceGranularity:\"dense\"}),o&&(m(`${Rt}[initPbjs] set priceGranularity config`,o),e.setConfig({priceGranularity:o}))),I&&(m(`${Rt}[initPbjs] set prebid server config`,I),e.setConfig({s2sConfig:I})),r){const t=I?.bidders??[],i=wt([\"optidigital\",\"richaudience\",\"justpremium\",\"impactify\",\"smilewanted\",\"onetag\",\"connectad\",\"adagio\",\"appnexus\",\"yobee\",\"equativ\",\"teal\",\"smartadserver\"],c??[]),n=t.reduce(((e,t)=>[...e,(c??[]).find((e=>e.bidderLabel===t))?.bidderSource??t]),[]),s=new Set(i.concat(n));if(e.installedModules?.includes(\"utiqIdSystem\")){const e=r.userIds?.find((e=>\"utiq\"===e.name));e&&(e.name=\"utiqId\")}const a={auctionDelay:50,aliasSyncEnabled:!0,filterSettings:{iframe:{bidders:[...s],filter:\"include\"},image:{bidders:\"*\",filter:\"include\"}},...r};m(`${Rt}[initPbjs] set userSync config`,a),e.setConfig({userSync:a})}else{const t=e.getConfig(\"userSync\")||{};t.auctionDelay=50,e.setConfig({userSync:t})}if(f&&(m(`${Rt}[initPbjs] set Outbrain config:`,f),e.setConfig({outbrain:f})),v&&(m(`${Rt}[initPbjs] set realTimeData config`,v),e.setConfig({realTimeData:v})),u&&(m(`${Rt}[initPbjs] set floors config`,u),e.setConfig({floors:u})),h&&(p(`${Rt}[initPbjs] enable analytics`,h),e.enableAnalytics(h)),g&&(m(`${Rt}[initPbjs] set schain config`,g),e.setConfig({schain:g})),(e.installedModules?.includes(\"paapi\")||e.installedModules?.includes(\"paapiForGpt\"))&&e.setConfig({paapi:{enabled:!0,defaultForSlots:1}}),i.secondaryBidders&&(m(`${Rt}[initPbjs] set secondary bidders config`,i.secondaryBidders),e.setConfig({auctionOptions:{secondaryBidders:i.secondaryBidders.secondaryBidders,suppressStaleRender:i.secondaryBidders.suppressStaleRender||!1,suppressExpiredRender:i.secondaryBidders.suppressExpiredRender||!1}})),l){m(`${Rt}[initPbjs] set bidder config`,l);for(const t of l)e.setBidderConfig(t)}const k={};if(d){m(`${Rt}[initPbjs] set bidder adjustments config`,d);for(const e of d)k[e.bidder]={bidCpmAdjustment:function(t){return t*e.adjustment}}}if(y)for(const e of $t(t))k[e]={...k[e],storageAllowed:!0};if(k.standard={adserverTargeting:[{key:re,val:function(e){return e.bidderCode}},{key:\"bid_id\",val:function(e){return e.adId}},{key:\"bid_cpm\",val:function(e){return e.pbCg}},{key:oe,val:function(e){return e.size}},{key:de,val:function(e){return e.mediaType}},{key:\"bid_videoId\",val:function(e){return e.videoCacheKey}}]},s&&te.getInstance().uprEnabled&&(k.standard={adserverTargeting:[...k.standard.adserverTargeting,{key:\"prkv\",val:e=>Ot(e,s)},{key:\"ad_floor-rule\",val:e=>Ot(e,s)}]}),Object.keys(k).length>0&&(e.bidderSettings=k),c){m(`${Rt}[initPbjs] set alias bidder`,c);for(const t of c)S?e.aliasBidder(t.bidderSource,t.bidderLabel,{useBaseGvlid:!0}):e.aliasBidder(t.bidderSource,t.bidderLabel)}if(Pt(t,\"sublime\",c)&&Ct(t,c),e.installedModules?.includes(\"utiqSystem\")||e.installedModules?.includes(\"utiqIdSystem\")){const t=localStorage.getItem(\"utiqPass\");if(t)try{const i=JSON.parse(t),n=null!==i?.connectId?.idGraph?.[0].atid;m(`${Rt}[initPbjs] set Utiq key values isUtiqPresent=`,n),e.mergeConfig({ortb2:{site:{keywords:\"isUtiqPresent=\"+n}}})}catch(e){b(`${Rt}[initPbjs] Utiq config is not valid JSON, ${e}`,t)}}A&&(m(`${Rt}[initPbjs] set DSA config`,A),e.mergeConfig({ortb2:{regs:{ext:{dsa:A}}}})),Pt(t,\"criteo\",c)&&e.setConfig({criteo:{fastBidVersion:\"latest\"}}),void 0!==C&&(m(`${Rt}[initPbjs] setting enableTIDs to`,C),e.setConfig({enableTIDs:C})),te.getInstance().disableGptPreAuction&&e.setConfig({gptPreAuction:{enabled:!1}}),ye(ge.PREBID_READY),p(`${Rt}[initPbjs] Prebid is initialized`)}(this.pbjs,e,t,i,n)}roundUpToNearestIncrement(e,t){return function(e,t){const i=e.sort(((e,t)=>e.max<t.max?-1:1)),n=i.filter((e=>t<=e.max));if(0===n.length)return p(`${Rt}[Price granularity] round up - initial CpmValue : ${t} // rounded value : ${i[i.length-1].max} `),i[i.length-1].max.toFixed(2);const s=n[0].increment;let a=t%s==0?t:t+(s-t%s);const r=t.toString().split(\".\"),o=r.length>1?r[1].split(\"\").length:0;(a-s).toFixed(o)===t.toFixed(o)&&(a=t);const d=a.toFixed(2);return p(`${Rt}[Price granularity] round up - initial CpmValue : ${t} // rounded value : ${d} `),d}(e,t)}startPbjsAuction(e,t,i){Ut(this.pbjs,e,t,i,this.multiformatBidders)}getPbjs(){return this.pbjs}}class xt{constructor(){this.name=\"Prebid\"}get pbjs(){return this._pbjs}async onStackConfigLoadSync({config:e,stackConfig:t}){this._pbjs=await async function(e,t){if(t.some((e=>e.headerBiddingEnabled&&e.bidders.length)))try{const t=await G(e);return new Lt(t)}catch(e){return void v(\"[config] Error while loading the kleanadsPbjs module\",e)}}(e.newPrebidUrl,t.adUnits),this._pbjs&&this.aliasWindowPbjs(window,this._pbjs.getPbjs())}async onStackConfigLoad({config:e,stackConfig:t}){if(!t.adUnits.some((e=>e.headerBiddingEnabled&&e.bidders.length)))return;if(!this._pbjs)throw new Error(\"PrebidModule is not loaded\");const i=t?.prebidConfig?.adCallTimeout??e.adCallTimeout,n={...t.prebidConfig.pbjsConfig},s={gdpr:{cmpApi:\"iab\",timeout:8e3,defaultGdprScope:!0}},a=this._pbjs.getPbjs().installedModules;let r;a.includes(\"consentManagementUsp\")&&(s.usp={cmpApi:\"iab\",timeout:8e3}),a.includes(\"consentManagementGpp\")&&(s.gpp={cmpApi:\"iab\",timeout:8e3}),a.includes(\"anonymisedRtdProvider\")&&(s.gdpr.rules=[{purpose:\"storage\",enforcePurpose:!0,enforceVendor:!0,vendorExceptions:[\"anonymised\"]}]),t.prebidConfig?.pbjsConfig?.useCanonicalUrl&&(r=window.document.querySelector(\"link[rel='canonical']\")?.getAttribute(\"href\"));const o={bidderTimeout:i,useBidCache:!0,maxRequestsPerOrigin:6,consentManagement:e.noCmp?void 0:s,enableSendAllBids:!1,pageUrl:r||document.location.href,cache:{url:\"https://prebid.adnxs.com/pbc/v1/cache\",ignoreBidderCacheKey:!0},timeoutBuffer:400};this._pbjs.initPbjs(t.adUnits,n,o,e.priceRuleBuckets,t.multiformatBidders)}async clean(){this.setDefaultPbjsConfig();const e=this._pbjs?.getPbjs();e&&(e.bidderSettings={})}aliasWindowPbjs(e,t){e.pbjs=t}setDefaultPbjsConfig(){this._pbjs?.getPbjs().setConfig({bidderTimeout:3e3,enableSendAllBids:!0,useBidCache:!1,deviceAccess:!0,timeoutBuffer:400,disableAjaxTimeout:!1,maxNestedIframes:10,priceGranularity:\"medium\",customPriceBucket:{},mediaTypePriceGranularity:{},bidderSequence:\"random\",auctionOptions:{},userSync:{syncEnabled:!0,filterSettings:{image:{bidders:\"*\",filter:\"include\"}},syncsPerBidder:5,syncDelay:3e3,auctionDelay:50}})}}class Nt{constructor(e,t){this.pubstackWindow=e,this.rule=t}isDivIdMatchingRule(e){const t=document.getElementById(e);if(t){const e=t.getBoundingClientRect();return this.rule(this.pubstackWindow,e)}return!1}}const Dt=(e,t,i)=>{if(function(e){return 0===e.top&&0===e.bottom&&0===e.left&&0===e.right&&0===e.width&&0===e.height}(t))return!1;const n=-i*e.innerHeight,s=(1+i)*e.innerHeight>t.top,a=t.bottom>n;return s&&a};function jt(e,t,i,n){const s=e.filter((e=>e.roadblock)).filter((e=>!e.mediaTypes.includes(\"Instream\"))).filter((e=>!e.externalAdServer)).filter((e=>z(e.divId))),a=e.filter((e=>!e.roadblock)).filter((e=>!e.mediaTypes.includes(\"Instream\"))).filter((e=>!e.externalAdServer)).filter((e=>z(e.divId))),r=e.filter((e=>e.mediaTypes.includes(\"Instream\"))).filter((e=>!e.externalAdServer)).filter((e=>z(e.divId)));t.executeAdCallRoadblock(s),r.length>0&&i?.executeAdCall(r);const o=function(e){if(e&&e.lazyLoadingKleanads){const t=e.lazyLoadingKleanads.viewportPercent/100;return m(`[lazyloading] lazy loading enabled with ${t} viewports`),(e,i)=>Dt(e,i,t)}}(n);if(o){Bt(a,[],new Nt(window,o),t)}else t.executeAdCall(a)}function Bt(e,t,i,n){const s=e.filter((e=>!t.includes(e.divId))).filter((e=>e.anchor?.mode||e.outOfPageType||i.isDivIdMatchingRule(e.divId)));n.executeAdCall(s),t.push(...s.map((e=>e.divId))),e.length>t.length&&setTimeout((()=>Bt(e,t,i,n)),200)}const Mt=\"[optimization]\",Vt=async e=>{try{const t=await Wt();if(e?.prebidConfig.adCallTimeout){const i=t.getTimeout(e?.prebidConfig.adCallTimeout);m(`${Mt} Ad call timeout optimized from ${e?.prebidConfig.adCallTimeout} to ${i}`),e.prebidConfig.adCallTimeout=i}}catch(e){v(`${Mt} Error while loading optimization engine`,e)}return e},Wt=async()=>new Promise(((e,t)=>{try{const i={env:{}};WebAssembly.instantiateStreaming(fetch(\"https://cdn-adm.pbstck.com/kleanads/wasm/volt.wasm\"),i).then((t=>{m(`${Mt} WebAssembly module loaded successfully`,t),e(t.instance.exports)})).catch((e=>{t(e)}))}catch(e){t(e)}}));class zt extends TypeError{constructor(e,t){let i;const{message:n,explanation:s,...a}=e,{path:r}=e,o=0===r.length?n:`At path: ${r.join(\".\")} -- ${n}`;super(s??o),null!=s&&(this.cause=o),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>i??(i=[e,...t()])}}function Ft(e){return\"object\"==typeof e&&null!=e}function Ht(e){return Ft(e)&&!Array.isArray(e)}function Gt(e){if(\"[object Object]\"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function Kt(e){return\"symbol\"==typeof e?e.toString():\"string\"==typeof e?JSON.stringify(e):`${e}`}function qt(e,t,i,n){if(!0===e)return;!1===e?e={}:\"string\"==typeof e&&(e={message:e});const{path:s,branch:a}=t,{type:r}=i,{refinement:o,message:d=`Expected a value of type \\`${r}\\`${o?` with refinement \\`${o}\\``:\"\"}, but received: \\`${Kt(n)}\\``}=e;return{value:n,type:r,refinement:o,key:s[s.length-1],path:s,branch:a,...e,message:d}}function*Yt(e,t,i,n){var s;Ft(s=e)&&\"function\"==typeof s[Symbol.iterator]||(e=[e]);for(const s of e){const e=qt(s,t,i,n);e&&(yield e)}}function*Xt(e,t,i={}){const{path:n=[],branch:s=[e],coerce:a=!1,mask:r=!1}=i,o={path:n,branch:s,mask:r};a&&(e=t.coercer(e,o));let d=\"valid\";for(const n of t.validator(e,o))n.explanation=i.message,d=\"not_valid\",yield[n,void 0];for(let[c,l,u]of t.entries(e,o)){const t=Xt(l,u,{path:void 0===c?n:[...n,c],branch:void 0===c?s:[...s,l],coerce:a,mask:r,message:i.message});for(const i of t)i[0]?(d=null!=i[0].refinement?\"not_refined\":\"not_valid\",yield[i[0],void 0]):a&&(l=i[1],void 0===c?e=l:e instanceof Map?e.set(c,l):e instanceof Set?e.add(l):Ft(e)&&(void 0!==l||c in e)&&(e[c]=l))}if(\"not_valid\"!==d)for(const n of t.refiner(e,o))n.explanation=i.message,d=\"not_refined\",yield[n,void 0];\"valid\"===d&&(yield[void 0,e])}class Jt{constructor(e){const{type:t,schema:i,validator:n,refiner:s,coercer:a=(e=>e),entries:r=function*(){}}=e;this.type=t,this.schema=i,this.entries=r,this.coercer=a,this.validator=n?(e,t)=>Yt(n(e,t),t,this,e):()=>[],this.refiner=s?(e,t)=>Yt(s(e,t),t,this,e):()=>[]}assert(e,t){return function(e,t,i){const n=Zt(e,t,{message:i});if(n[0])throw n[0]}(e,this,t)}create(e,t){return function(e,t,i){const n=Zt(e,t,{coerce:!0,message:i});if(n[0])throw n[0];return n[1]}(e,this,t)}is(e){return Qt(e,this)}mask(e,t){return function(e,t,i){const n=Zt(e,t,{coerce:!0,mask:!0,message:i});if(n[0])throw n[0];return n[1]}(e,this,t)}validate(e,t={}){return Zt(e,this,t)}}function Qt(e,t){return!Zt(e,t)[0]}function Zt(e,t,i={}){const n=Xt(e,t,i),s=function(e){const{done:t,value:i}=e.next();return t?void 0:i}(n);if(s[0]){return[new zt(s[0],(function*(){for(const e of n)e[0]&&(yield e[0])})),void 0]}return[void 0,s[1]]}function ei(e,t){return new Jt({type:e,schema:null,validator:t})}function ti(e){return new Jt({type:\"array\",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[i,n]of t.entries())yield[i,n,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${Kt(e)}`})}function ii(){return ei(\"boolean\",(e=>\"boolean\"==typeof e))}function ni(e){const t={},i=e.map((e=>Kt(e))).join();for(const i of e)t[i]=i;return new Jt({type:\"enums\",schema:t,validator:t=>e.includes(t)||`Expected one of \\`${i}\\`, but received: ${Kt(t)}`})}function si(){return ei(\"never\",(()=>!1))}function ai(e){return new Jt({...e,validator:(t,i)=>null===t||e.validator(t,i),refiner:(t,i)=>null===t||e.refiner(t,i)})}function ri(){return ei(\"number\",(e=>\"number\"==typeof e&&!isNaN(e)||`Expected a number, but received: ${Kt(e)}`))}function oi(e){const t=e?Object.keys(e):[],i=si();return new Jt({type:\"object\",schema:e||null,*entries(n){if(e&&Ft(n)){const s=new Set(Object.keys(n));for(const i of t)s.delete(i),yield[i,n[i],e[i]];for(const e of s)yield[e,n[e],i]}},validator:e=>Ht(e)||`Expected an object, but received: ${Kt(e)}`,coercer(t,i){if(!Ht(t))return t;const n={...t};if(i.mask&&e)for(const t in n)void 0===e[t]&&delete n[t];return n}})}function di(e){return new Jt({...e,validator:(t,i)=>void 0===t||e.validator(t,i),refiner:(t,i)=>void 0===t||e.refiner(t,i)})}function ci(e,t){return new Jt({type:\"record\",schema:null,*entries(i){if(Ft(i))for(const n in i){const s=i[n];yield[n,n,e],yield[n,s,t]}},validator:e=>Ht(e)||`Expected an object, but received: ${Kt(e)}`,coercer:e=>Ht(e)?{...e}:e})}function li(){return ei(\"string\",(e=>\"string\"==typeof e||`Expected a string, but received: ${Kt(e)}`))}function ui(e){const t=si();return new Jt({type:\"tuple\",schema:null,*entries(i){if(Array.isArray(i)){const n=Math.max(e.length,i.length);for(let s=0;s<n;s++)yield[s,i[s],e[s]||t]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${Kt(e)}`,coercer:e=>Array.isArray(e)?e.slice():e})}function hi(e){const t=Object.keys(e);return new Jt({type:\"type\",schema:e,*entries(i){if(Ft(i))for(const n of t)yield[n,i[n],e[n]]},validator:e=>Ht(e)||`Expected an object, but received: ${Kt(e)}`,coercer:e=>Ht(e)?{...e}:e})}function gi(e){const t=e.map((e=>e.type)).join(\" | \");return new Jt({type:\"union\",schema:null,coercer(t,i){for(const n of e){const[e,s]=n.validate(t,{coerce:!0,mask:i.mask});if(!e)return s}return t},validator(i,n){const s=[];for(const t of e){const[...e]=Xt(i,t,n),[a]=e;if(!a[0])return[];for(const[t]of e)t&&s.push(t)}return[`Expected the value to satisfy a union of \\`${t}\\`, but received: ${Kt(i)}`,...s]}})}function fi(){return ei(\"unknown\",(()=>!0))}function pi(e,t,i){return new Jt({...e,coercer:(n,s)=>Qt(n,t)?e.coercer(i(n,s),s):e.coercer(n,s)})}function mi(e,t,i={}){return pi(e,fi(),(e=>{const n=\"function\"==typeof t?t():t;if(void 0===e)return n;if(!i.strict&&Gt(e)&&Gt(n)){const t={...e};let i=!1;for(const e in n)void 0===t[e]&&(t[e]=n[e],i=!0);if(i)return t}return e}))}const bi=oi({bidder:li(),params:di(ci(li(),fi()))}),vi=oi({currency:li(),schema:oi({delimiter:li(),fields:ti(li())}),values:ci(li(),ri())}),yi=oi({ext:oi({})}),Ai=oi({playerSize:gi([ui([ri(),ri()]),ti(ui([ri(),ri()]))]),context:di(li()),protocols:di(ti(ri())),api:di(ti(ri())),playbackmethod:di(ti(ri())),skip:di(ri()),mimes:di(ti(li())),linearity:di(ri()),startdelay:di(ri()),placement:di(ri()),plcmt:di(ri()),maxduration:di(ri()),minduration:di(ri()),playVideoVisibleThreshold:di(ri()),nonViewableBehavior:di(li())}),Ii=ci(li(),fi()),Ci=ni([\"low\",\"medium\",\"high\",\"auto\",\"dense\",\"custom\"]),Si=oi({buckets:ti(oi({precision:di(ri()),max:ri(),increment:ri()}))}),ki=gi([ui([ri(),ri()]),function(e){const t=Kt(e);return new Jt({type:\"literal\",schema:e,validator:i=>i===e||`Expected the literal \\`${t}\\`, but received: ${Kt(i)}`})}(\"fluid\")]),wi=(Ei=oi({key:li(),value:di(li()),values:di(ti(li()))}),Ti=\"KeyValueTargeting\",$i=e=>!!e.value||!!e.values,new Jt({...Ei,*refiner(e,t){yield*Ei.refiner(e,t);const i=Yt($i(e,t),t,Ei,e);for(const e of i)yield{...e,refinement:Ti}}}));var Ei,Ti,$i,_i;!function(e){e.USE_EXISTING_DIV=\"useExistingDiv\",e.CREATE_NEW_DIV=\"createNewDiv\"}(_i||(_i={}));const Ri=oi({mode:ni([_i.USE_EXISTING_DIV,_i.CREATE_NEW_DIV])}),Oi=ni([\"default\",\"interstitial\"]),Ui=ni([\"master\",\"companion\",\"master-1\",\"master-2\",\"master-3\"]),Pi=hi({sizes:ti(ki),divId:li(),adUnitName:li(),adServerAdUnitName:li(),slotName:di(li()),bidders:ti(bi),parallax:mi(ii(),!1),dynamic:mi(ii(),!1),targeting:di(wi),extraTargetings:di(ti(wi)),anchor:di(Ri),floors:di(vi),dynamicPrebidFloor:di(ii()),extraAdServerSizes:di(ti(ki)),headerBiddingEnabled:mi(ii(),!0),canOutstream:di(ii()),canNative:di(ii()),isInstream:di(ii()),biddersNative:di(ti(bi)),biddersOutstream:mi(ti(li()),[]),outOfPageType:di(Oi),biddersSkin:di(ti(li())),roadblock:di(Ui),ortb2Imp:di(yi),nativeParams:di(ci(li(),fi())),instreamParams:di(oi({mediaTypeParams:di(Ai),params:di(ci(li(),li())),vast:ci(li(),gi([li(),ri()])),targetings:di(ci(li(),li())),adDeactivationContext:di(oi({key:li(),values:ti(li())}))})),externalAdServer:di(ii())}),Li=oi({googleFetchMarginPercent:di(ri()),googleRenderMarginPercent:di(ri()),googleMobileScaling:di(ri())}),xi=oi({viewportPercent:ri()}),Ni=oi({configName:li(),lazyLoadingGoogle:di(Li),lazyLoadingKleanads:pi(di(xi),ai(xi),(e=>e??void 0))}),Di=oi({bidders:mi(ti(li()),[]),sizes:mi(ti(ki),[]),timer:pi(di(ri()),ai(ri()),(e=>e??void 0))});var ji;!function(e){e.Stop=\"stop\",e.Continue=\"continue\",e.InstantSecondChance=\"instantSecondChance\"}(ji||(ji={}));const Bi=hi({adUnitNames:ti(li()),timer:ri(),capping:di(ri()),specificRules:ti(Di),alwaysInView:di(ii()),refreshBehaviorOnEmpty:di(ni([ji.Stop,ji.Continue,ji.InstantSecondChance])),adxTimer:di(ri())}),Mi=oi({adUnitConfig:ti(Bi)}),Vi=gi([ci(li(),fi()),oi({ppid:di(li()),userIds:di(ti(ci(li(),fi())))})]),Wi=oi({provider:li(),options:ci(li(),fi()),includeEvents:di(ti(li())),excludeEvents:di(ti(li()))}),zi=oi({bidder:li(),adjustment:ri()}),Fi=oi({bidderLabel:li(),bidderSource:li()}),Hi=oi({name:li(),waitForIt:di(ii()),params:ci(li(),fi())}),Gi=oi({auctionDelay:ri(),dataProviders:ti(Hi)}),Ki=oi({sendKVTargetings:ii(),biddersBlackList:ti(li())}),qi=oi({bidderUrl:di(li()),usersyncUrl:di(li())}),Yi=ci(li(),fi()),Xi=oi({aliases:di(ci(li(),li())),cache:di(ci(li(),fi())),targeting:di(Yi),returnallbidstatus:di(ii())}),Ji=hi({accountId:li(),adapter:li(),bidders:di(ti(li())),enabled:di(ii()),endpoint:li(),extPrebid:di(Xi),syncEndpoint:li(),timeout:di(ri())}),Qi=oi({currency:di(pi(Ii,li(),(e=>JSON.parse(e)))),userSync:di(pi(Vi,li(),(e=>JSON.parse(e)))),sendAdditionalWinningBidTargeting:di(ii()),analytics:di(pi(ti(Wi),li(),(e=>JSON.parse(e)))),bidderConfigs:di(pi(ti(ci(li(),fi())),li(),(e=>JSON.parse(e)))),bidderAdjustments:di(ti(zi)),bidderAliases:di(ti(Fi)),priceGranularity:di(pi(gi([Ci,Si]),li(),(e=>JSON.parse(e)))),realTimeData:di(pi(Gi,li(),(e=>JSON.parse(e)))),floors:di(pi(ci(li(),fi()),li(),(e=>JSON.parse(e)))),schain:di(pi(ci(li(),fi()),li(),(e=>JSON.parse(e)))),allowLocalStorage:di(mi(ii(),!0)),targetingBehaviors:di(Ki),outbrain:di(qi),fledgeForGpt:di(ii()),paapi:di(ci(li(),fi())),dsaConfig:di(ci(li(),fi())),s2sConfig:di(Ji),enableTIDs:di(ii())});var Zi;!function(e){e.DISABLED=\"DISABLED\",e.ENABLED_ALL_SLOTS=\"ENABLED_ALL_SLOTS\"}(Zi||(Zi={}));const en=oi({networkId:ri(),adUnitPathConfig:ti(li()),mcmIds:di(ti(ri())),ppidValue:di(li()),threadYieldConfig:di(ni([Zi.DISABLED,Zi.ENABLED_ALL_SLOTS])),disableSingleRequest:di(ii())}),tn=oi({enabled:ii(),measureOnly:di(ii()),publisherId:li()}),nn=oi({pubId:li()}),sn=oi({name:li(),ratio:ri(),configToMerge:di(ai(oi({adUnits:ti(Pi)})))}),an=oi({name:li(),ratio:ri(),configToMerge:di(ai(oi({lazyLoading:di(Ni)})))}),rn=oi({name:li(),ratio:ri(),configToMerge:di(ai(oi({refreshConfig:di(Mi)})))}),on=oi({adUnits:ti(Pi),lazyLoading:di(Ni),refreshConfig:di(Mi),prebidConfig:oi({adCallTimeout:ri(),pbjsConfig:Qi}),gamConfig:di(en),tamConfig:di(oi({apsPubId:li(),disableSchain:di(ii())})),xplnConfig:di(tn),iasConfig:di(nn),abTest:di(gi([ti(sn),ti(an),ti(rn)]))});var dn,cn,ln,un,hn,gn,fn,pn,mn,bn,vn,yn;!function(e){e.firstId=\"firstId\",e.utiqId=\"utiqId\",e.sharedId=\"sharedId\"}(dn||(dn={})),function(e){e.id5id=\"id5Id\"}(cn||(cn={})),function(e){e.INSTREAM=\"instream\",e.OUTSTREAM=\"outstream\"}(ln||(ln={})),function(e){e[e.LINEAR=1]=\"LINEAR\",e[e.NON_LINEAR=2]=\"NON_LINEAR\"}(un||(un={})),function(e){e[e.IN_STREAM=1]=\"IN_STREAM\",e[e.IN_BANNER=2]=\"IN_BANNER\",e[e.IN_ARTICLE=3]=\"IN_ARTICLE\",e[e.IN_FEED=4]=\"IN_FEED\",e[e.INTERSTITIAL=5]=\"INTERSTITIAL\"}(hn||(hn={})),function(e){e[e.INSTREAM=1]=\"INSTREAM\",e[e.ACCOMPANYING_CONTENT=2]=\"ACCOMPANYING_CONTENT\",e[e.INTERSTITIAL=3]=\"INTERSTITIAL\",e[e.NO_CONTENT=4]=\"NO_CONTENT\"}(gn||(gn={})),function(e){e[e.UNKNOWN=0]=\"UNKNOWN\",e[e.ABOVE_THE_FOLD=1]=\"ABOVE_THE_FOLD\",e[e.LOCKED=2]=\"LOCKED\",e[e.BELOW_THE_FOLD=3]=\"BELOW_THE_FOLD\",e[e.HEADER=4]=\"HEADER\",e[e.FOOTER=5]=\"FOOTER\",e[e.SIDEBAR=6]=\"SIDEBAR\",e[e.FULLSCREEN=7]=\"FULLSCREEN\"}(fn||(fn={})),function(e){e[e.VAST_1_0=1]=\"VAST_1_0\",e[e.VAST_2_0=2]=\"VAST_2_0\",e[e.VAST_3_0=3]=\"VAST_3_0\",e[e.VAST_1_0_WRAPPER=4]=\"VAST_1_0_WRAPPER\",e[e.VAST_2_0_WRAPPER=5]=\"VAST_2_0_WRAPPER\",e[e.VAST_3_0_WRAPPER=6]=\"VAST_3_0_WRAPPER\",e[e.VAST_4_0=7]=\"VAST_4_0\",e[e.VAST_4_0_WRAPPER=8]=\"VAST_4_0_WRAPPER\",e[e.DAAST_1_0=9]=\"DAAST_1_0\",e[e.DAAST_1_0_WRAPPER=10]=\"DAAST_1_0_WRAPPER\",e[e.VAST_4_1=11]=\"VAST_4_1\",e[e.VAST_4_1_WRAPPER=12]=\"VAST_4_1_WRAPPER\",e[e.VAST_4_2=13]=\"VAST_4_2\",e[e.VAST_4_2_WRAPPER=14]=\"VAST_4_2_WRAPPER\"}(pn||(pn={})),function(e){e[e.VPAID_1_0=1]=\"VPAID_1_0\",e[e.VPAID_2_0=2]=\"VPAID_2_0\",e[e.MRAID_1_0=3]=\"MRAID_1_0\",e[e.ORMMA=4]=\"ORMMA\",e[e.MRAID_2_0=5]=\"MRAID_2_0\",e[e.MRAID_3_0=6]=\"MRAID_3_0\",e[e.OMID_1_0=7]=\"OMID_1_0\",e[e.SIMID_1_0=8]=\"SIMID_1_0\",e[e.SIMID_1_1=9]=\"SIMID_1_1\"}(mn||(mn={})),function(e){e[e.AUTO_PLAY_SOUND_ON=1]=\"AUTO_PLAY_SOUND_ON\",e[e.AUTO_PLAY_SOUND_OFF=2]=\"AUTO_PLAY_SOUND_OFF\",e[e.CLICK_TO_PLAY=3]=\"CLICK_TO_PLAY\",e[e.MOUSE_OVER=4]=\"MOUSE_OVER\",e[e.INVIEW_SOUND_ON=5]=\"INVIEW_SOUND_ON\",e[e.INVIEW_SOUND_OFF=6]=\"INVIEW_SOUND_OFF\",e[e.CONTINUOUS_PLAYBACK=7]=\"CONTINUOUS_PLAYBACK\"}(bn||(bn={})),function(e){e.VIDEO_MP4=\"video/mp4\",e.VIDEO_WEBM=\"video/webm\",e.VIDEO_OGG=\"video/ogg\",e.VIDEO_MPEG=\"video/mpeg\",e.APPLICATION_JAVASCRIPT=\"application/javascript\"}(vn||(vn={})),function(e){e[e.NON_SKIPPABLE=0]=\"NON_SKIPPABLE\",e[e.SKIPPABLE=1]=\"SKIPPABLE\"}(yn||(yn={}));const An={playerSize:[[640,480]],context:ln.INSTREAM,api:[mn.VPAID_1_0,mn.VPAID_2_0,mn.MRAID_1_0,mn.MRAID_2_0,mn.MRAID_3_0,mn.OMID_1_0],linearity:un.LINEAR,mimes:[vn.VIDEO_MP4,vn.VIDEO_OGG,vn.VIDEO_WEBM,vn.APPLICATION_JAVASCRIPT],maxduration:30,minduration:1,protocols:[pn.VAST_1_0,pn.VAST_2_0,pn.VAST_3_0,pn.VAST_4_0,pn.VAST_1_0_WRAPPER,pn.VAST_2_0_WRAPPER,pn.VAST_3_0_WRAPPER,pn.VAST_4_0_WRAPPER,pn.VAST_4_1,pn.VAST_4_1_WRAPPER,pn.VAST_4_2,pn.VAST_4_2_WRAPPER],startdelay:0,placement:hn.IN_STREAM,plcmt:gn.INSTREAM,playbackmethod:[bn.AUTO_PLAY_SOUND_OFF,bn.CLICK_TO_PLAY,bn.MOUSE_OVER],skip:yn.SKIPPABLE,skipafter:0,pos:fn.UNKNOWN,minbitrate:1,maxbitrate:6e3},In=\"[pocOverride]\";function Cn(e,t,i){Object.keys(e??{}).some((e=>\"scope\"!==e&&\"sites\"!==e&&\"stacks\"!==e))&&v(\"Invalid override object\",e);const n=e?.stacks?.[i],s=e?.sites?.[t],a=e?.scope;return n??s??a}function Sn(e,t){if(t)return t[e]??t.type}function kn(e){const t=(\"; \"+document.cookie).split(\"; \"+e+\"=\");if(2===t.length)return t.pop()?.split(\";\").shift()}class wn{constructor(e,t){this.stackLoadedConfig={...e,runningABTest:[]},this.pocOverrides=t}withConvertToInstreamAdUnit(){const e=this.pocOverrides.convertToInstreamAdUnits;if(e){const t=[];this.stackLoadedConfig.adUnits.forEach((i=>{const n=e[i.adUnitName];n&&(i.isInstream=!0,i.dynamic=!1,i.parallax=!1,i.anchor=void 0,i.canOutstream=!1,i.biddersOutstream=[],i.floors=n.floors,i.instreamParams={...n.instreamParams,vast:n.instreamParams?.vast||{},mediaTypeParams:{...An,...n.instreamParams?.mediaTypeParams}},t.push(i.adUnitName))})),\"dailymotion-v3\"===this.pocOverrides.instreamConfig?.type&&this.stackLoadedConfig.refreshConfig?.adUnitConfig.push({adUnitNames:t,timer:10,specificRules:[],alwaysInView:!0})}return this}withUseNativeAlias(){if(this.pocOverrides.useNativeAlias)for(const e of this.stackLoadedConfig.adUnits){const t=e=>e.bidder.includes(\"native\")||e.bidder.endsWith(\"_na\"),i=e.bidders.filter((e=>t(e)));i.length>0&&(e.biddersNative=i),e.bidders=e.bidders.filter((e=>!t(e)))}return this}withConvertToNativeAdUnit(){const e=this.pocOverrides.convertToNativeAdUnits;return e&&this.stackLoadedConfig.adUnits.forEach((t=>{const i=e[t.adUnitName];if(i){if(t.canNative=!0,i.useNativeTemplate&&this.pocOverrides.nativeParamsTemplate?t.nativeParams=this.pocOverrides.nativeParamsTemplate:t.nativeParams=i.nativeParams,i.useNativeAlias){const e=e=>e.bidder.includes(\"native\")||e.bidder.endsWith(\"_na\");t.biddersNative=t.bidders.filter((t=>e(t))),t.bidders=t.bidders.filter((t=>!e(t)))}i.nativeOnly&&(t.sizes=[],t.extraAdServerSizes?.includes(\"fluid\")?t.extraAdServerSizes=[\"fluid\"]:t.extraAdServerSizes=[],t.isInstream=!1,t.parallax=!1,t.anchor=void 0,t.canOutstream=!1,t.biddersOutstream=[])}})),this}withFirstId(){if(this.pocOverrides?.firstId){const e=function(){const e=new RegExp(\"(?:(?:^|.*; *)firstid *= *([^;]*).*$)|^.*$\",\"i\"),t=document.cookie.match(e);return t&&t[1]?decodeURIComponent(t[1]):void 0}();if(e){const t=this.stackLoadedConfig.prebidConfig.pbjsConfig.userSync?.userIds??[];t.push({name:\"pubProvidedId\",params:{eids:[{source:\"first-id.fr\",uids:[{id:e,atype:1,ext:{stype:\"ppuid\"}}]}]}}),this.stackLoadedConfig.prebidConfig.pbjsConfig.userSync={...this.stackLoadedConfig.prebidConfig.pbjsConfig.userSync,userIds:t}}}return this}withId5Id(){if(this.pocOverrides?.id5id){const e=localStorage.getItem(this.pocOverrides.id5id.pd);e&&(this.stackLoadedConfig.prebidConfig.pbjsConfig.userSync?.userIds??[]).forEach((t=>{\"id5Id\"===t.name&&(t.params||(t.params={}),t.params.pd=e)}))}return this}withConvertToInterstitialAdUnit(){const e=this.pocOverrides.convertToInterstitialAdUnits;return e&&this.stackLoadedConfig.adUnits.forEach((t=>{e.includes(t.adUnitName)&&(t.outOfPageType=\"interstitial\",p(`Interstitial adUnit found: ${t.adUnitName}`))})),this}withSkinRenderingSettings(e,t){const i=this.pocOverrides?.skinRenderingSettings,n=i?.stackLevel?.[t],s=i?.siteLevel?.[e];return s?.disableSkinBids||n?.disableSkinBids?this.stackLoadedConfig.adUnits=this.stackLoadedConfig.adUnits.map((e=>({...e,sizes:e.sizes.filter((e=>!_(e,[1800,1e3])))}))):(s?.biddersOverride||n?.biddersOverride)&&(this.stackLoadedConfig.adUnits=this.stackLoadedConfig.adUnits.map((e=>e.sizes.some((e=>_(e,[1800,1e3])))?{...e,biddersSkin:n?.biddersOverride??s?.biddersOverride}:e))),this}withPpidSolution(e,t){const i=Cn(this.pocOverrides?.ppidSolutions,e,t);if(i){const e=Array.isArray(i.ppidSolution)?i.ppidSolution:[i.ppidSolution],{type:t,value:n}=function(e){for(const i of e)switch(i){case dn.firstId:return{type:\"prebid\",value:\"first-id.fr\"};case dn.sharedId:return{type:\"prebid\",value:\"pubcid.org\"};case dn.utiqId:return{type:\"prebid\",value:\"utiq.com\"};case cn.id5id:{const e=localStorage.getItem(\"id5id\");if(e)return{type:\"other\",value:(t=e,JSON.parse(decodeURIComponent(t)).gp)};break}default:{let e=localStorage.getItem(i);if(e)return{type:\"other\",value:e};if(e=kn(i)??null,e)return{type:\"other\",value:e}}}var t;return{type:\"other\",value:\"\"}}(e);if(\"prebid\"===t)this.stackLoadedConfig.prebidConfig.pbjsConfig.userSync={...this.stackLoadedConfig.prebidConfig.pbjsConfig.userSync,ppid:n};else this.stackLoadedConfig.gamConfig&&n&&(this.stackLoadedConfig.gamConfig.ppidValue=n)}return this}withRefreshAlwaysInView(e,t){const i=this.pocOverrides?.refreshAlwaysInViewAdUnitNames;if(Array.isArray(i)&&this.stackLoadedConfig.refreshConfig&&i&&i.length>0){const e=[];this.stackLoadedConfig.refreshConfig.adUnitConfig.forEach((t=>{i.forEach((i=>{t.adUnitNames?.includes(i)&&(e.push({...t,alwaysInView:!0,adUnitNames:[i]}),t.adUnitNames.splice(t.adUnitNames.indexOf(i),1))}))})),this.stackLoadedConfig.refreshConfig.adUnitConfig=[...this.stackLoadedConfig.refreshConfig.adUnitConfig.filter((e=>(e.adUnitNames||[]).length>0)),...e]}else if(i&&!Array.isArray(i)){const n=Cn(i,e,t);if(this.stackLoadedConfig.refreshConfig&&n&&n.length>0){const e=[];this.stackLoadedConfig.refreshConfig.adUnitConfig.forEach((t=>{\"string\"==typeof n&&\"all\"===n?t.alwaysInView=!0:\"object\"==typeof n&&n.forEach((i=>{t.adUnitNames?.includes(i)&&(e.push({...t,alwaysInView:!0,adUnitNames:[i]}),t.adUnitNames.splice(t.adUnitNames.indexOf(i),1))}))})),this.stackLoadedConfig.refreshConfig.adUnitConfig=[...this.stackLoadedConfig.refreshConfig.adUnitConfig.filter((e=>(e.adUnitNames||[]).length>0)),...e]}}return this}withrefreshBehaviorOnEmpty(){const e=this.pocOverrides?.refreshBehaviorOnEmpty;return e&&this.stackLoadedConfig.refreshConfig?.adUnitConfig.forEach((t=>{t.refreshBehaviorOnEmpty=e})),this}withOutbrainConfig(e){if(this.pocOverrides?.outbrainConfig){const t=this.pocOverrides.outbrainConfig.find((t=>t.siteId===e)),i=this.pocOverrides.outbrainConfig.find((e=>!e.siteId)),n=t||i;n&&(this.stackLoadedConfig.prebidConfig.pbjsConfig.outbrain={bidderUrl:n.bidderUrl,usersyncUrl:n.usersyncUrl})}return this}withXplnConfig(e,t){const i=Cn(this.pocOverrides.xplnConfig,e,t);return i&&(this.stackLoadedConfig.xplnConfig=i),this}withFloorEnforcement(e){const t=this.pocOverrides?.floorEnforcement;if(t){const t=this.pocOverrides?.floorEnforcement?.sites?.[e],i=this.pocOverrides?.floorEnforcement?.scope;(t||i)&&(this.stackLoadedConfig.prebidConfig.pbjsConfig.floors={...this.stackLoadedConfig.prebidConfig.pbjsConfig.floors,enforcement:{...t??i}})}return this}withDynamicPrebidFloors(e){const t=this.pocOverrides?.dynamicPrebidFloors;if(t){const t=this.pocOverrides?.dynamicPrebidFloors?.sites?.[e],i=this.pocOverrides?.dynamicPrebidFloors?.scope;(t||i)&&this.stackLoadedConfig.adUnits.forEach((e=>{e.dynamicPrebidFloor=!0}))}return this}withSkinFloor(e){const t=this.pocOverrides?.skinFloor;if(t){const i=t.specificFloor?.[e]??t.defaultFloor;this.stackLoadedConfig.adUnits.forEach((e=>{if(e.sizes.some((e=>_(e,[1800,1e3]))))if(e.floors){const t=e.floors?.values.banner;t?e.floors={...e.floors,schema:{delimiter:\"|\",fields:[\"mediaType\",\"size\"]},values:{\"banner|*\":t,\"banner|1800x1000\":i}}:v(\"no banner value found in floors, skin floor cannot be applied.\",e.floors)}else e.floors={currency:t.currency,schema:{delimiter:\"|\",fields:[\"mediaType\",\"size\"]},values:{\"banner|1800x1000\":i}}}))}return this}withDsaConfig(){return this.pocOverrides?.dsaConfig&&(this.stackLoadedConfig.prebidConfig.pbjsConfig={...this.stackLoadedConfig.prebidConfig.pbjsConfig,dsaConfig:this.pocOverrides?.dsaConfig}),this}withPrebidServerConfig(e){if(this.pocOverrides?.prebidServer&&this.pocOverrides.prebidServer.siteIds.includes(e)){if(J(this.pocOverrides.prebidServer.ratio)){p(\"Run ABTest hybrid monetization PBJS + PBS\");const e=J(void 0!==this.stackLoadedConfig.prebidConfig.pbjsConfig?.priceGranularity&&this.pocOverrides.prebidServer.ratioPriceGranularity?this.pocOverrides.prebidServer.ratioPriceGranularity:0);this.stackLoadedConfig.prebidConfig.pbjsConfig={...this.stackLoadedConfig.prebidConfig.pbjsConfig,s2sConfig:{...this.pocOverrides.prebidServer.s2sConfig}};let t=this.pocOverrides.prebidServer.metaABTestServerSide??\"rule2\";e&&this.stackLoadedConfig.prebidConfig.pbjsConfig.s2sConfig?.extPrebid?.targeting&&(this.stackLoadedConfig.prebidConfig.pbjsConfig.s2sConfig.extPrebid.targeting.priceGranularity=this.stackLoadedConfig.prebidConfig.pbjsConfig.priceGranularity,t=`${t}_with_pg`,p(\"Run ABTest for PriceGranularity on Prebid Server side\")),I(t)}else I(this.pocOverrides.prebidServer.metaABTestClientSide??\"rule1\")}return this}withRoadblockOrder(e,t){const i=Cn(this.pocOverrides?.roadblockOrder,e,t);return i&&this.stackLoadedConfig.adUnits.forEach((e=>{i[e.adUnitName]&&(e.roadblock=i[e.adUnitName])})),this}withDisableThreadYield(e,t){const i=window.location.search,n=new URLSearchParams(i);return(Cn(this.pocOverrides?.disableThreadYield,e,t)||n.get(\"disableThreadYield\"))&&this.stackLoadedConfig.gamConfig&&(this.stackLoadedConfig.gamConfig.threadYieldConfig=Zi.DISABLED),this}withDisableGptPreAuction(e,t){return Cn(this.pocOverrides?.disableGptPreAuction,e,t)&&(te.getInstance().disableGptPreAuction=!0),this}withDisableSchainForTam(e,t){return Cn(this.pocOverrides?.disableSchainForTam,e,t)&&this.stackLoadedConfig.tamConfig&&(this.stackLoadedConfig.tamConfig={...this.stackLoadedConfig.tamConfig,disableSchain:!0}),this}withIASConfig(e,t){const i=Cn(this.pocOverrides.iasConfig,e,t);return i&&(this.stackLoadedConfig.iasConfig=i,p(\"[IAS Module] IAS Config override\",i)),this}withDisableSingleRequest(e,t){const i=Cn(this.pocOverrides?.disableSingleRequest,e,t),n=this.stackLoadedConfig.adUnits.some((e=>e.roadblock));return i&&this.stackLoadedConfig.gamConfig&&!n&&(this.stackLoadedConfig.gamConfig.disableSingleRequest=!0),this}withDisableFetchLazyLoading(e,t){return Cn(this.pocOverrides?.disableFetchLazyLoading,e,t)&&(this.stackLoadedConfig.lazyLoading={...this.stackLoadedConfig.lazyLoading,configName:\"lazyLoadingGoogle disabled\",lazyLoadingGoogle:{...this.stackLoadedConfig.lazyLoading?.lazyLoadingGoogle,googleFetchMarginPercent:-1}}),this}withUseBaseGvlid(e,t){return Cn(this.pocOverrides?.useBaseGvlid,e,t)&&(this.stackLoadedConfig.prebidConfig.pbjsConfig={...this.stackLoadedConfig.prebidConfig.pbjsConfig,useBaseGvlid:!0}),this}withAdxRefreshTimer(e,t){const i=Cn(this.pocOverrides?.adxRefreshTimer,e,t);return i&&this.stackLoadedConfig.refreshConfig?.adUnitConfig.forEach((e=>{e.adxTimer=i})),this}withExternalAdServer(e,t){const i=Cn(this.pocOverrides?.externalAdServer,e,t);return i&&this.stackLoadedConfig.adUnits.forEach((e=>{i.includes(e.adUnitName)&&(e.externalAdServer=!0)})),this}withUseCanonicalUrl(e,t){return Cn(this.pocOverrides?.useCanonicalUrl,e,t)&&(this.stackLoadedConfig.prebidConfig.pbjsConfig.useCanonicalUrl=!0),this}withSecondaryBidders(e,t){const i=Cn(this.pocOverrides?.secondaryBidders,e,t);return i&&(this.stackLoadedConfig.prebidConfig.pbjsConfig.secondaryBidders=i),this}withReplaceS2SConfigWithNodeConfig(e,t){const i=Cn(this.pocOverrides?.replaceS2SConfigWithNodeConfig,e,t);if(i&&this.stackLoadedConfig.prebidConfig.pbjsConfig.s2sConfig){const e=\"pubstack_server\",t=this.stackLoadedConfig.prebidConfig?.pbjsConfig?.s2sConfig?.bidders??[];this.stackLoadedConfig.adUnits.filter((e=>i.includes(e.adUnitName))).forEach((i=>{const n=i.bidders.filter((e=>!t.includes(e.bidder)));!0===i.canOutstream&&i.biddersOutstream.push(e),i.bidders=[...n,{bidder:e,params:{adUnitName:i.adUnitName}}]}));const n=this.stackLoadedConfig.adUnits.filter((e=>e.bidders.some((e=>t.includes(e.bidder))))).flatMap((e=>e.bidders)).map((e=>e.bidder)).filter((e=>t.includes(e)));this.stackLoadedConfig.prebidConfig.pbjsConfig.s2sConfig.bidders=[e,...n];const s=this.stackLoadedConfig.prebidConfig.pbjsConfig.bidderAliases?.filter((e=>t.includes(e.bidderLabel))).map((t=>(t.bidderSource=e,t)))??[];this.stackLoadedConfig.prebidConfig.pbjsConfig.bidderAliases?.push(...s)}return this}withCustomTimeInView(e,t){const i=Cn(this.pocOverrides?.customTimeInView,e,t),n=this.stackLoadedConfig.refreshConfig;return i&&n&&n.adUnitConfig.forEach((e=>{e.customTimeInView=i})),this}withUpdateRefreshTimerInView(e,t){const i=Cn(this.pocOverrides?.updateRefreshTimerInView,e,t);if(this.stackLoadedConfig.refreshConfig&&i&&i.length>0){const e=[];this.stackLoadedConfig.refreshConfig.adUnitConfig.forEach((t=>{i.forEach((i=>{t.adUnitNames?.includes(i)&&(e.push({...t,refreshTimerInView:!0,adUnitNames:[i]}),t.adUnitNames.splice(t.adUnitNames.indexOf(i),1))}))})),this.stackLoadedConfig.refreshConfig.adUnitConfig=[...this.stackLoadedConfig.refreshConfig.adUnitConfig.filter((e=>(e.adUnitNames||[]).length>0)),...e]}return this}build(){return this.stackLoadedConfig}}function En(e,t,i,n){const{pocOverrides:s,runningABTest:a}=function(e,t,i){const{overrideABTest:n,...s}=e,a=Cn(n,t,i);if(!a||!function(e){return\"populationB\"in e&&\"object\"==typeof e.populationB&&\"ratio\"in e&&\"number\"==typeof e.ratio||(v(\"ABTest populationB should be an object and ratio a number\"),!1)}(a))return{pocOverrides:s,runningABTest:[]};const r=J(a.ratio),o=Object.keys(a.populationB);if(r){const e=Object.assign({...s},{...a.populationB});return m(`${In} Drew Poc Override ABTest: winner population B`,e),{pocOverrides:e,runningABTest:[{name:\"adm_ab_test\",value:\"poc:B\",gamTargeting:!0},...o.map((e=>({name:e,value:\"B\"})))]}}return m(`${In} Drew Poc Override ABTest: winner population A`,s),{pocOverrides:s,runningABTest:[{name:\"adm_ab_test\",value:\"poc:A\",gamTargeting:!0},...o.map((e=>({name:e,value:\"A\"})))]}}(t.pocOverrides??{},t.tagId,n.stackId),r=new wn(e,s).withConvertToInstreamAdUnit().withConvertToNativeAdUnit().withUseNativeAlias().withFirstId().withId5Id().withSkinRenderingSettings(t.tagId,n.stackId).withRefreshAlwaysInView(t.tagId,n.stackId).withrefreshBehaviorOnEmpty().withXplnConfig(t.tagId,n.stackId).withOutbrainConfig(t.tagId).withSkinFloor(t.tagId).withDsaConfig().withPrebidServerConfig(t.tagId).withPpidSolution(t.tagId,n.stackId).withConvertToInterstitialAdUnit().withFloorEnforcement(t.tagId).withDynamicPrebidFloors(t.tagId).withRoadblockOrder(t.tagId,n.stackId).withDisableThreadYield(t.tagId,n.stackId).withDisableGptPreAuction(t.tagId,n.stackId).withDisableSchainForTam(t.tagId,n.stackId).withIASConfig(t.tagId,n.stackId).withDisableSingleRequest(t.tagId,n.stackId).withDisableFetchLazyLoading(t.tagId,n.stackId).withAdxRefreshTimer(t.tagId,n.stackId).withExternalAdServer(t.tagId,n.stackId).withUseBaseGvlid(t.tagId,n.stackId).withUseCanonicalUrl(t.tagId,n.stackId).withSecondaryBidders(t.tagId,n.stackId).withReplaceS2SConfigWithNodeConfig(t.tagId,n.stackId).withCustomTimeInView(t.tagId,n.stackId).withUpdateRefreshTimerInView(t.tagId,n.stackId).build();return{...r,runningABTest:[...a,...r.runningABTest]}}const Tn=e=>!!e.priority&&!!e.conditions,$n=e=>!e.priority&&!e.conditions,_n=e=>\"elements\"in e;const Rn={AND:({elements:e},t)=>e.every((e=>Un(e,t))),OR:({elements:e},t)=>e.some((e=>Un(e,t)))},On={IN:({key:e,values:t},i)=>t.some((t=>t===i.get(e))),NOT_IN:({key:e,values:t},i)=>!t.some((t=>t===i.get(e)))};function Un(e,t){return _n(e)?Rn[e.op](e,t):On[e.op](e,t)}const Pn=e=>{if(e.abTest){if(!(e.abTest.length<2)){m(\"[A/B test] variants\",e.abTest.map((e=>e.name)).join(\", \"));const t=function(e){if(100!==e.reduce(((e,t)=>e+t),0))return p(\"[drawComplexAbTests] The sum of all probabilities should be equal to 100 and is not, we use the first version of the ab test\"),1;const t=e.reduce(((e,t)=>(e.length?e.push(e[e.length-1]+t):e.push(t),e)),[]),i=Math.floor(100*Math.random())+1;return t.findIndex((e=>i<=e))+1}(e.abTest.map((e=>e.ratio))),i=e.abTest[t-1];return m(\"[A/B test] winner\",i.name),{config:{...e,...i.configToMerge},winner:i.name}}v(\"The A/B test config is invalid: not enough variants\")}return{config:e}};class Ln{constructor(e,t,i){this.config=e,this.stack=t,this.stackVersion=i,this.runningABTest=[]}applyRulesABTest(){const{config:e,winner:t}=Pn(this.config);return this.config=e,t&&this.runningABTest.push({name:\"pbstck_ab_test\",value:t,gamTargeting:!0}),this}applyEngineABTest(e){const t=[];return e.multiformat&&!e.pocOverrides?.disableMultiformat&&(this.multiformatBidders=wt(e.multiformat.bidders,this.config.prebidConfig.pbjsConfig.bidderAliases??[]),e.multiformat.abTest&&(J(e.multiformat.abTest.ratio)?(t.push(\"mf:A\"),this.multiformatBidders.push(...wt(e.multiformat.abTest.bidders,this.config.prebidConfig.pbjsConfig.bidderAliases??[]))):t.push(\"mf:B\"))),t.length&&this.runningABTest.push({name:\"engine_ab_test\",value:t,gamTargeting:!0}),this}applyPocOverrides(e,t){if(e.pocOverrides){const{runningABTest:t,...i}=En(this.config,e,0,this.stack);this.config=i,this.runningABTest.push(...t)}return this}applyPageLevelBidderConfig(e){return this.config=function(e,t){const i=e.prebidConfig.pbjsConfig.bidderAliases??[];if(e.adUnits.forEach((e=>{e.bidders=e.bidders.map((e=>St(e,i)))})),e.prebidConfig.pbjsConfig.targetingBehaviors?.sendKVTargetings){const n=k(window),s=function(e,t,i){const n={};for(const[t,i]of e)n[t]=i;for(const e in t)1===t[e].length?n[e]=t[e][0]:n[e]=t[e];return{bidders:i,config:{ortb2:{site:{ext:{data:n}}},appnexusAuctionKeywords:n}}}(t,n,$t(e.adUnits).filter((t=>!e.prebidConfig.pbjsConfig.targetingBehaviors?.biddersBlackList.includes(t))));e.prebidConfig.pbjsConfig.bidderConfigs=[...e.prebidConfig.pbjsConfig.bidderConfigs||[],s];const a=Et(\"smartadserver\",i).filter((t=>!e.prebidConfig.pbjsConfig.targetingBehaviors?.biddersBlackList.includes(t)));a.length>0&&function(e,t,i,n){let s=\"\";for(const[t,i]of e)s+=`${t}=${i};`;for(const e in t)1===t[e].length?s+=`${e}=${t[e][0]};`:t[e].forEach((t=>{s+=`${e}=${t};`}));i.forEach((e=>{e.bidders.filter((e=>n.includes(e.bidder))).forEach((e=>{const t=e.params??{};t.target||(t.target=s)}))}))}(t,n,e.adUnits,a)}return e}(this.config,e),this}build(){return{...this.config,multiformatBidders:this.multiformatBidders,scopeId:this.stack.scopeId,stackId:this.stack.stackId,stackName:this.stack.stackName,version:this.stackVersion,runningABTest:this.runningABTest}}}async function xn(e,t,i,n){const s=function(e,t,i,n){const s=function(e,t,i,n,s){return`${e}/config/${t.scopeId.substring(0,8)}/${n.substring(0,8)}/${t.stackId}/${i}/${s}.json`}(e.configUrl,i,n,e.tagId,t);return s.replace(/([^:]\\/)\\/+/g,\"$1\")}(e,t,i,n);return new Promise((e=>{fetch(s).then((t=>{t.text().then((async t=>{try{const i=function(e){const t=JSON.parse(e),[i,n]=Zt(t,on,{coerce:!0});if(n)return n;throw new Error(`unable to parse JSON: ${i}`)}(t);e(i)}catch(t){v(`unable to load the configuration ${t}`),e(void 0)}}))})).catch((async t=>{v(`unable to load the configuration ${t}`),e(void 0)}))}))}async function Nn(e){return xn(e,e.device,e.stack,e.stackVersion).then((t=>{if(t)return function(e,t,i,n,s){return new Ln(e,t,i).applyRulesABTest().applyEngineABTest(n).applyPocOverrides(n,s).applyPageLevelBidderConfig(s).build()}(t,e.stack,e.stackVersion,e,e.pageContext)}))}var Dn,jn,Bn;!function(e){e.HISTORY_MUTATION=\"_pbstck_kleanads_historyMutation\",e.PAGE_CHANGE=\"_pbstck_kleanads_pageChange\",e.REFRESH_INIT=\"_pbstck_kleanads_refreshInit\"}(Dn||(Dn={})),function(e){e.SPA_RELOAD=\"admSPAReload\"}(jn||(jn={})),function(e){e.REPLACE_STATE=\"replaceState\",e.PUSH_STATE=\"pushState\"}(Bn||(Bn={}));const Mn=e=>{window.history[e]=new Proxy(window.history[e],{apply(t,i,n){const s=window.location.href,a=t.apply(i,n),r=new CustomEvent(Dn.HISTORY_MUTATION,{detail:{referrer:s,stateObj:n[0],title:n[1],url:n[2],type:e}});return dispatchEvent(r),a}})},Vn=()=>{Mn(Bn.REPLACE_STATE),Mn(Bn.PUSH_STATE)},Wn={excludedAdvertisers:[],excludedOrders:[],excludedLineItems:[],adxLineItems:[]},zn={pbjsFinished:!1,apsFinished:!1},Fn=\"[executor] [buffered]\";var Hn;!function(e){e[e.FirstCall=0]=\"FirstCall\",e[e.Refresh=1]=\"Refresh\"}(Hn||(Hn={}));class Gn{constructor(e,t,i,n){this.buffer=[],this.auctionRunning=!1,this.adUnitAuctionStatus=new Map,this.adServer=e,this.pbjs=t,this.aps=i,this.kleanadsRunCount=n}executeAdCall(e){if(0===e.length)return;const t=e.sort(((e,t)=>F(e.divId)-F(t.divId)));p(`${Fn} buffering adunits`,e),t.forEach((e=>{this.bufferAdUnits({adUnits:[e],origin:Hn.FirstCall})}))}executeAdCallRoadblock(e){if(0===e.length)return;const t=e.sort(ee);p(`${Fn} buffering adunits`,e),A(\"executor:roadblock\",{slotIds:t.map((e=>e.divId))}),this.bufferAdUnits({adUnits:t,origin:Hn.FirstCall})}bufferAdUnits(e){switch(this.buffer.push(e),e.origin){case Hn.FirstCall:e.adUnits?.forEach((e=>{this.adUnitAuctionStatus.set(e.divId,zn)}));break;case Hn.Refresh:this.adUnitAuctionStatus.set(e.refreshableAdUnit.adUnit.divId,zn);break;default:v(`${Fn} unknown buffer entry origin`)}this.startAuctionForBufferedAdUnits()}executeRefresh(e){this.bufferAdUnits({refreshableAdUnit:e,origin:Hn.Refresh})}startAuctionForBufferedAdUnits(){if(this.auctionRunning)return void m(`${Fn} auction already running, not starting a new one`);const e=this.buffer.shift();if(m(`${Fn} adunit taken from buffer`,e),e)switch(e.origin){case Hn.FirstCall:this.startAuction(e.adUnits);break;case Hn.Refresh:this.startAuction([e.refreshableAdUnit.adUnit],{labels:[\"pubstackRefresh\",`pubstackRefreshRank:${e.refreshableAdUnit.rank}`]});break;default:v(`${Fn} unknown buffer entry origin`)}else m(`${Fn} no more adunit to monetize in buffer`)}startAuction(e,t){this.auctionRunning=!0,e.forEach((e=>{Ie(e.divId,pe.START_AUCTION)})),p(`${Fn} starting header bidding for ${e.map((e=>e.divId))}`);const i=te.getInstance().kleanadsRunCount;if(this.pbjs){const n=this.pbjs.getPbjs();this.pbjs.startPbjsAuction(e,(()=>{this.kleanadsRunCount===i?this.pbjsFinished(n,e):p(`${Fn} kleanads run count has changed (from ${this.kleanadsRunCount} to ${i}), avoid calling pbjsFinished`)}),t)}this.aps&&this.aps.startApsAuction(e,(t=>{this.kleanadsRunCount===i?this.apsFinished(e,t):p(`${Fn} kleanads run count has changed (from ${this.kleanadsRunCount} to ${i}), avoid calling apsFinished`)})),this.pbjs||this.aps||this.adServer.executeWhenAdServerReady((()=>{this.kleanadsRunCount===i?this.callAdServer(e):p(`${Fn} kleanads run count has changed (from ${this.kleanadsRunCount} to ${i}), avoid calling AdServer`)}))}pbjsFinished(e,t){m(`${Fn} pbjs end callback for ${t.map((e=>e.divId)).join(\",\")}`,e.getAllPrebidWinningBids()),t.forEach((e=>{Ie(e.divId,pe.END_PBJS_AUCTION)})),this.adServer.executeWhenAdServerReady((()=>{m(`${Fn} pbjs end callback ad server ready ${t.map((e=>e.divId)).join(\",\")}`),this.adServer.setPbjsTargetings(e,t),t.forEach((e=>{const t=this.adUnitAuctionStatus.get(e.divId);t&&this.adUnitAuctionStatus.set(e.divId,{...t,pbjsFinished:!0})})),this.canCallAdServer(t)&&this.callAdServer(t)}))}apsFinished(e,t){m(`${Fn} aps end callback ${e.map((e=>e.divId)).join(\",\")}`,t),e.forEach((e=>Ie(e.divId,pe.END_APS_AUCTION))),this.adServer.executeWhenAdServerReady((()=>{m(`${Fn} aps end callback ad server ready ${e.map((e=>e.divId)).join(\",\")}`),this.adServer.setApsTargetings(e,t),e.forEach((e=>{const t=this.adUnitAuctionStatus.get(e.divId);t&&this.adUnitAuctionStatus.set(e.divId,{...t,apsFinished:!0})})),this.canCallAdServer(e)&&this.callAdServer(e)}))}canCallAdServer(e){const t=e.filter((e=>{const t=this.adUnitAuctionStatus.get(e.divId);return this.aps&&!this.pbjs?t&&t.apsFinished:this.pbjs&&!this.aps?t&&t.pbjsFinished:this.pbjs&&this.aps?t&&t.apsFinished&&t.pbjsFinished:void 0}));return t.length>0&&t.length!==e.length&&v(`${Fn} cannot call ad server for ${e.map((e=>e.divId)).join(\",\")}, some ad units are not ready`),t.length>0}callAdServer(e){if(this.auctionRunning=!1,this.startAuctionForBufferedAdUnits(),e.forEach((e=>{Ie(e.divId,pe.START_AD_SERVER_CALL)})),e.length>0){this.adServer.callAdServer(e);const t=e.map((e=>e.divId));p(`${Fn} ad server called ${t.join(\",\")}`)}}}const Kn=\"adServerAdUnitName\";function qn(e,t,i,n){const s=[];if(\"number\"!=typeof t&&\"\"===t||s.push(t),i&&0!==i.length){const e=function(e,t){return e.filter((e=>e!==Kn)).map((e=>t.get(e))).filter((e=>e)).join(\"/\")}(i,n);e&&s.push(e)}else b(\"Ad unit path config is missing for this site\");const a=`/${s.join(\"/\")}`;return i&&i.includes(Kn)?`${a}/${e}`:`${a}`}function Yn(e){return new Promise(((t,i)=>{if(window.lucead_loaded)return void t();window.lucead_loaded=!0;const n=document.createElement(\"script\");n.src=`https://s.lucead.com/prebid/${e}.js`,n.onload=()=>t(window.lucead_prebid),n.onerror=i,document.head.appendChild(n)}))}function Xn(e){return e.startsWith(\"css:\")?e.replace(\"css:\",\"\"):void 0}const Jn=[\"adyoulike\"],Qn=(e,t,i,n,s)=>{const a=[];if(e.includes(\"Banner\")&&a.push(\"Banner\"),e.includes(\"Outstream\")&&i.includes(t.bidder)&&a.push(\"Outstream\"),e.includes(\"Native\")&&!s&&a.push(\"Native\"),e.includes(\"Skin\")){const e=Jn.includes(t.bidder);n?n.includes(t.bidder)&&!e&&a.push(\"Skin\"):e||a.push(\"Skin\")}return e.includes(\"Instream\")&&a.push(\"Instream\"),a},Zn=e=>{return(t=e.sizes,t.filter(Q)).filter((e=>!_(e,[1800,1e3])));var t},es=e=>{const t=Zn(e);return 0===t.length?{}:{bannerSizes:t}},ts=e=>{const t=(e=>{const t=[];if(e.isInstream){if(void 0!==e.instreamParams)return[\"Instream\"];b(`Instream ad unit ${e.divId} is missing instreamParams`)}return Zn(e).length>0&&t.push(\"Banner\"),e.canOutstream&&t.push(\"Outstream\"),e.canNative&&(void 0!==e.nativeParams?t.push(\"Native\"):b(`Native ad unit ${e.divId} is missing nativeParams`)),e.sizes.some((e=>_(e,[1800,1e3])))&&t.push(\"Skin\"),t})(e),i=!!e.biddersNative?.length,n=e.bidders.map((n=>({mediaTypes:Qn(t,n,e.biddersOutstream,e.biddersSkin,i),bidder:n.bidder,params:n.params}))).filter((e=>e.mediaTypes.length>0));if(i&&e.biddersNative){const t=e.biddersNative.map((e=>({mediaTypes:[\"Native\"],bidder:e.bidder,params:e.params})));n.push(...t)}return{bidders:n,mediaTypes:t}};function is(e,t,i,n,s){return e.flatMap((e=>{const a=qn(e.adServerAdUnitName,i,n,t);if(e.bidders.forEach((e=>{if(\"lucead\"===e.bidder&&e.params?.siteId){const{siteId:t,...i}=e.params;e.params={...i,loader:Yn(t)}}})),e.dynamic)return function(e,t,i){return function(e){const t=Xn(e.divId)||`[id^=\"${e.divId}\"]`;try{return Array.from(document.querySelectorAll(t))}catch(e){return v(`${t} is not a valid CSS selector, ${e}`),[]}}(e).map((n=>{const s=n.id;return s||v(`Unable to find an id on DOM element for adUnit.divId ${e.divId}`),{...e,...es(e),...ts(e),divId:s,slotName:n?.attributes.getNamedItem(\"data-aps-slotname\")?.value||e.slotName||t,dynamic:!1,adUnitPath:n?.attributes.getNamedItem(\"data-adunitpath\")?.value||t,adServerAdUnitName:e.adServerAdUnitName,pubstackDeclarationTargetingKeys:i??[],getTargetings:()=>[...[...e.targeting?[e.targeting]:[],...e.extraTargetings||[]],...[...ss(n?.attributes),ns(s)]]}}))}(e,a,s);{const t=function(e){const t=Xn(e);try{return t?document.querySelector(t):document.getElementById(e)}catch(t){return v(`${e} is not a valid CSS selector, ${t}`),null}}(e.divId);if(t||\"interstitial\"===e.outOfPageType||e.anchor?.mode===_i.CREATE_NEW_DIV){t&&!t?.id&&v(`Unable to find an id on DOM element for adUnit.divId ${e.divId}`);const i=t?.attributes.getNamedItem(\"data-adunitpath\")?.value||a;return[{...e,...es(e),...ts(e),divId:t?.id??e.divId,adUnitPath:i,slotName:t?.attributes.getNamedItem(\"data-aps-slotname\")?.value||e.slotName||i,adServerAdUnitName:e.adServerAdUnitName,pubstackDeclarationTargetingKeys:s??[],getTargetings:()=>[...[...e.targeting?[e.targeting]:[],...e.extraTargetings||[]],...[...ss(t?.attributes)]]}]}return m(`Div id missing for ${e.divId}, no further action on this ad unit`),[]}}))}function ns(e){const t=new RegExp(\"\\\\D\",\"g\");return{key:\"ad_index\",value:e.replace(t,\"\")}}function ss(e){return Array.from(e??[]).filter((e=>e.name.startsWith(\"data-ad-\"))).map((e=>({key:e.name.replace(\"data-ad-\",\"\"),value:e.value})))}class as{constructor(e,t,i){this.stackConfig=e,this.kleanAdsConfig=t,this.pageContext=i,this.adUnits=[],this.callbacks=[]}alreadyUsedDivIds(){return this.adUnits.map((e=>e.divId))}setConfig(e,t,i){this.stackConfig=e,this.kleanAdsConfig=t,this.pageContext=i,this.adUnits=[],this.callbacks=[]}async executeWhenAdUnitsFound(e){const t=(i=this.stackConfig,n=this.kleanAdsConfig,s=this.pageContext,rs(i.adUnits,i,n,s)).filter((e=>!this.alreadyUsedDivIds().includes(e.divId)));var i,n,s;if(this.adUnits.push(...t),await e(this.adUnits),this.callbacks.push(e),!this.adUnitObserver){const e=async e=>{const t=function(e,t,i,n){return rs([e],t,i,n)}(e,this.stackConfig,this.kleanAdsConfig,this.pageContext).filter((e=>!this.alreadyUsedDivIds().includes(e.divId))).reduce(((e,t)=>(e.find((e=>e.divId===t.divId))?v(`We tried to prepare two times the same divId, skipping adUnit ${t.adServerAdUnitName} from the list`,t):(e.push(t),m(\"New adUnit dynamicaly loaded\",t.divId)),e)),[]);t.length>0&&(this.adUnits.push(...t),this.callbacks.forEach((async e=>{await e(t)})))};this.startAdUnitObserver(e)}}cleanObserverAndAdUnits(){this.adUnitObserver?.disconnect(),this.adUnitObserver=void 0,this.adUnits=[]}startAdUnitObserver(e){const t=this.alreadyUsedDivIds(),i=this.stackConfig.adUnits.filter((e=>!t.includes(e.divId)||e.dynamic)),n=document.body;if(!n)return void v(\"Body not found, cannot start observer\");const s=new MutationObserver(function(e,t){return(i,n)=>{i.filter((e=>\"childList\"===e.type&&e.addedNodes.length>0)).forEach((i=>{Array.from(i.addedNodes).filter((e=>e.nodeType===Node.ELEMENT_NODE)).forEach((i=>{e.forEach((e=>{const n=e.divId.startsWith(\"css:\")?e.divId.replace(\"css:\",\"\"):e.dynamic?`[id^=\"${e.divId}\"]`:`[id=\"${e.divId}\"]`;(i.matches(n)||i.querySelectorAll(n).length>0)&&t(e)}))}))}))}}(i,e));s.observe(n,{childList:!0,subtree:!0}),this.adUnitObserver=s}}function rs(e,t,i,n){const s=t?.gamConfig?.adUnitPathConfig??[];return is(e,n,function(e,t){const i=t?.gamConfig?.networkId??e.networkId,n=t?.gamConfig?.mcmIds&&t?.gamConfig?.mcmIds.length>0?t?.gamConfig?.mcmIds:e.mcmIds;return i?n?[i,...n].join(\",\"):i:\"\"}(i,t),s,i.pubstackDeclarationTargetingKeys)}class os{constructor(){this.name=\"AdUnitsManager\"}get adUnitsManager(){return this._adUnitsManager}async onStackConfigLoadSync({config:e,stackConfig:t}){this._adUnitsManager=new as(t,e,e.pageContext)}async onStackConfigLoad({config:e,stackConfig:t}){this._adUnitsManager?.setConfig(t,e,e.pageContext)}async clean(){this._adUnitsManager?.cleanObserverAndAdUnits()}}class ds{constructor(e,t){this.element=e,this.dateIn=0,this.pastTimeInView=0,this.isInview=!1,this.alwaysInView=t??!1,this.isTabActivated=\"visible\"===window.document.visibilityState,this.isVisible=!window.document.hidden,this.resetAt=0,this.hasBeenReset=!1}getTimeInView(e){return this.hasBeenReset?e>=this.dateIn&&this.dateIn>0&&(this.isInview||this.alwaysInView)&&this.isTabActivated?this.pastTimeInView+(e-this.dateIn):this.pastTimeInView:0}getTimeOnPage(e){return this.hasBeenReset?e-this.resetAt:0}resetTimer(e){(this.isInview||this.alwaysInView)&&this.isTabActivated&&(this.dateIn=e),this.resetAt=e,this.hasBeenReset=!0,this.pastTimeInView=0}updateTimerOnInViewChange(e,t){this.isInview=e,this.updateTimer(t)}updateTimerOnTabStatusChange(e,t){this.isTabActivated=e,this.updateTimer(t)}updateTimerOnVisibleChange(e,t){this.isVisible=e,this.updateTimer(t)}updateTimer(e){if((this.isInview||this.alwaysInView)&&this.isTabActivated)return 0===this.dateIn?void(this.dateIn=e):this.dateIn>0?void 0:void(this.dateIn=e);this.dateIn>0&&(e>=this.dateIn&&(this.pastTimeInView=this.pastTimeInView+(e-this.dateIn)),this.dateIn=0)}}const cs={root:null,rootMargin:\"0px\",threshold:.5},ls=\"[adUnitsObserver]\";class us{constructor(e,t){this.elements={},this.observer=new IntersectionObserver((e=>{this.handleIntersect(e,this)}),cs),this.configAlwaysInView=t,e.forEach((e=>{this.elements[e.id]=new ds(e,t?.[e.id]),this.observer.observe(e)})),addEventListener(\"visibilitychange\",(()=>{m(`${ls} visibilitychange`,window.document.visibilityState),\"visible\"===window.document.visibilityState?Object.keys(this.elements).forEach((e=>{this.elements[e].updateTimerOnTabStatusChange(!0,Date.now())})):Object.keys(this.elements).forEach((e=>{this.elements[e].updateTimerOnTabStatusChange(!1,Date.now())}))}))}isObserving(e){return e in this.elements}unobserve(e){this.isObserving(e)&&(this.observer.unobserve(this.elements[e].element),delete this.elements[e])}observe(e){this.isObserving(e.id)||(this.elements[e.id]=new ds(e,this.configAlwaysInView?.[e.id]),this.observer.observe(e))}getObservedDivIds(){return Object.keys(this.elements)}getTimeInView(e,t){return this.isObserving(e)?this.elements[e].getTimeInView(t):0}isInView(e){return!!this.isObserving(e)&&this.elements[e].isInview}getTimeOnPage(e,t){return this.isObserving(e)?this.elements[e].getTimeOnPage(t):0}resetTimers(e,t){e.forEach((e=>{this.isObserving(e)&&(m(`${ls} reseting time for ${e}`),this.elements[e].resetTimer(t))}))}getAdUnitInViewTimer(e){return this.elements[e]}handleIntersect(e,t){e.forEach((e=>{const i=Date.now();t.elements[e.target.id].updateTimerOnInViewChange(e.isIntersecting,i),m(`${ls}`,e.target.id,e.isIntersecting?\"in view\":\"out of view\")}))}}function hs(e,t,i,n,s,a){if(r){const r=document.getElementById(t),o=r?.parentElement,d=\"refresh_kleanads\";let c=document.getElementById(`${d}_${t}-refresh-debug`);c||(c=document.createElement(\"div\"),c.id=`${d}_${t}-refresh-debug`,c.style.position=\"absolute\",c.style.bottom=\"5px\",c.style.left=\"5px\",c.style.zIndex=\"99999999\",c.style.backdropFilter=\"blur(6px)\",c.style.textShadow=\"1px 1px 1px rgba(0, 0, 0, 0.3)\",c.style.fontFamily=\"Arial, sans-serif\",c.style.borderRadius=\"5px\",c.style.color=\"white\",c.style.padding=\"8px 16px\",c.style.display=\"flex\",c.style.flexDirection=\"column\",c.style.gap=\"5px\",c.style.textAlign=\"left\",c.style.border=\"1px solid white\",c.style.transition=\"background-color 250ms linear\",o?.prepend(c));let l=document.getElementById(`${d}_${t}-refresh-div-id`);l||(l=document.createElement(\"span\"),l.id=`${d}_${t}-refresh-div-id`,c.appendChild(l)),l.textContent=`${t}`,l.style.fontSize=\"1rem\",l.style.fontWeight=\"bold\";let u=document.getElementById(`${d}_${t}-refresh-debug-timer`);u||(u=document.createElement(\"span\"),u.id=`${d}_${t}-refresh-debug-timer`,c.appendChild(u)),u.textContent=`Time in view : ${Math.floor(i/1e3).toString()}`,u.style.fontSize=\"1rem\";let h=document.getElementById(`${d}_${t}-refresh-debug-refresh-rank`);h||(h=document.createElement(\"span\"),h.id=`${d}_${t}-refresh-debug-refresh-rank`,c.appendChild(h));const g=n??\"∞\";h.textContent=`Refresh rank : ${e.getRefreshRank(t).toString()} / ${g}`,h.style.fontSize=\"1rem\",c.style.backgroundColor=s&&a?\"rgba(55, 110, 79, 0.7)\":\"rgba(140, 71, 79, 0.7)\"}}const gs=\"[RefreshState]\";class fs{constructor(e,t,i){this.adUnitsObserver=new us(e,i),this.exclusions=t,this.lastRenderInfo={},this.refreshRank={},this.hasAuctionInProgress={},this.shouldRefreshBeforeTimerEnd={},this.consecutiveSecondChanceAttempts={},e.forEach((e=>{this.refreshRank[e.id]=0,this.hasAuctionInProgress[e.id]=!1,this.shouldRefreshBeforeTimerEnd[e.id]=!1,this.consecutiveSecondChanceAttempts[e.id]=0}))}unobserve(e){m(`${gs} refresh unobserve`,e),this.adUnitsObserver.unobserve(e)}addAdUnits(e){e.forEach((e=>{m(`${gs} refresh addAdUnit`,e.id),this.adUnitsObserver.observe(e),this.refreshRank[e.id]=0,this.hasAuctionInProgress[e.id]=!1}))}getTimeInView(e,t){return this.adUnitsObserver.getTimeInView(e,t)}getTimeOnPage(e,t){return this.adUnitsObserver.getTimeOnPage(e,t)}isInView(e){return this.adUnitsObserver.isInView(e)}needRefresh(e,t){const i=t.divId;if(!this.adUnitsObserver.isObserving(i))return!1;if(this.cappingReached(i,t.capping))return!1;if(this.hasAuctionInProgress[i])return!1;if(this.shouldRefreshBeforeTimerEnd[i])return this.shouldRefreshBeforeTimerEnd[i]=!1,!0;const n=this.getTimeInView(i,e),s=this.getTimeOnPage(i,e),a=this.getTimer(i,t.timer,t.refreshSpecificRules,t.adxTimer);hs(this,i,n,t.capping,this.adUnitsObserver.getAdUnitInViewTimer(i)?.isTabActivated,this.adUnitsObserver.getAdUnitInViewTimer(i)?.isInview);const r=t.alwaysInView,o=t.refreshTimerInView,d=this.getLastWinningMediaType(i),c=\"video\";if(r||d===c||o)return r&&d!==c?s>=a:n>=a;{const e=this.isInView(i),r=t.customTimeInView??1e3;return e&&n>=r&&s>=a}}cappingReached(e,t){return!!t&&t<this.getRefreshRank(e)}getTimer(e,t,i,n){if(\"video\"===this.getLastWinningMediaType(e))return 3e4;if(this.isLastWinningAdx(e))return n?1e3*n:1e3*t;const s=this.getLastWinningBidder(e),a=this.getLastSize(e),r=[];return i.forEach((e=>{if(!e.timer)return;const t=!!s&&e.bidders.includes(s)&&0===e.sizes.length,i=a&&e.sizes.find((e=>_(e,a)))&&0===e.bidders.length,n=s&&a&&e.bidders.includes(s)&&e.sizes.find((e=>_(e,a)));(t||i||n)&&r.push(1e3*e.timer)})),r.length>0?Math.max(...r):1e3*t}getObservedDivIds(){return this.adUnitsObserver.getObservedDivIds()}getRefreshRank(e){const t=this.refreshRank[e];return this.adUnitsObserver.isObserving(e)&&t?t:0}updateAdUnitStatus(e,t){const i=e.divId;if(this.refreshRank[i]+=1,this.lastRenderInfo[i]=e,m(`${gs} update status ${i} new refresh rank ${this.refreshRank[i]}`),e.isEmpty){if(t.refreshBehaviorOnEmpty===ji.Continue)return;if(t.refreshBehaviorOnEmpty===ji.InstantSecondChance)return void(this.consecutiveSecondChanceAttempts[t.divId]<1&&(this.consecutiveSecondChanceAttempts[t.divId]++,this.shouldRefreshBeforeTimerEnd[t.divId]=!0));m(`${gs} ${i} is excluded from refresh from now on (empty impression)`),this.unobserve(i)}else this.consecutiveSecondChanceAttempts[t.divId]=0;const n=t.refreshSpecificRules.filter((e=>!e.timer)),s=this.getLastWinningBidder(t.divId),a=this.getLastSize(t.divId);(!!n.find((e=>{const t=!!s&&e.bidders.includes(s),i=!!a&&!!e.sizes.find((e=>_(e,a))),n=t&&0===e.sizes.length,r=i&&0===e.bidders.length;return n||r||t&&i}))||this.isExcludedByConfig(t.divId)||this.cappingReached(i,t.capping))&&(m(`${gs} ${i} is excluded from refresh from now on`),this.unobserve(i))}getLastSize(e){return this.lastRenderInfo[e]?.size||void 0}getLastAdvertiserId(e){return this.lastRenderInfo[e]?.advertiserId||void 0}getLastWinningBidder(e){return this.lastRenderInfo[e]?.hb_bidder}getLastWinningMediaType(e){return this.lastRenderInfo[e]?.hb_mediaType}resetTimer(e,t){this.adUnitsObserver.resetTimers([e],t),this.hasAuctionInProgress[e]=!1}setAuctionInProgress(e){this.hasAuctionInProgress[e]=!0}isExcludedByConfig(e){const t=this.getLastAdvertiserId(e),i=this.getLastWinningLineItemId(e),n=this.getLastWinningOrderId(e),s=!!t&&this.exclusions.excludedAdvertisers.includes(t),a=!!n&&this.exclusions.excludedOrders.includes(n),r=!!i&&this.exclusions.excludedLineItems.includes(i);return s||a||r}getLastWinningLineItemId(e){return this.lastRenderInfo[e]?.lineItemId||void 0}getLastWinningOrderId(e){return this.lastRenderInfo[e]?.orderId||void 0}isLastWinningAdx(e){return-1===this.lastRenderInfo[e]?.lineItemId||this.exclusions.adxLineItems.includes(this.lastRenderInfo[e]?.lineItemId||0)}}const ps=\"[refresh]\";const ms=\"[refresh]\";async function bs(e,t,i,n,s,a){const r=[],o=[],d={},c=new fs([],n,d);e.executeWhenAdUnitsFound((async e=>{const t=e.filter((e=>a?e.mediaTypes.includes(\"Instream\"):!e.mediaTypes.includes(\"Instream\")));p(a?`${ms} [instream] adUnits found for refresh`:`${ms} adUnits found for refresh`,t),function(e,t){return e.flatMap((e=>{const i=e.adUnitNames.flatMap((e=>t.filter((t=>t.adUnitName.startsWith(e))))),n=e.specificRules;return i.filter((e=>!!e)).flatMap((t=>({...t,alwaysInView:e.alwaysInView,refreshTimerInView:e.refreshTimerInView,capping:e.capping,timer:e.timer,refreshSpecificRules:n,refreshBehaviorOnEmpty:e.refreshBehaviorOnEmpty,adxTimer:e.adxTimer,customTimeInView:e.customTimeInView})))}))}(i,t).forEach((e=>{r.push(e),e.alwaysInView&&(d[e.divId]=!0);const t=document.getElementById(e.divId);t?(o.push(t),c.addAdUnits([t])):p(`${ms} element to refresh not found with id`,e.divId)}))})),s.renderListener((e=>function(e,t,i){const n=e.divId,s=t.find((e=>e.divId===n));if(s){const t=e.hb_bidder;i.resetTimer(n,Date.now()),i.updateAdUnitStatus(e,s),t&&m(`${ps} we have a winning bidder for ${n} that is from prebid: ${t}`),m(`${ps} render on`,n)}}(e,r,c)));const l=()=>{const e=[],i=Date.now();c.getObservedDivIds().forEach((t=>{const n=r.find((e=>e.divId===t));n&&c.needRefresh(i,n)&&e.push(n)})),e.length>0&&e.forEach((e=>{const i=c.getRefreshRank(e.divId);p(`${ms} refresh on ${e.divId} with rank ${i}`);const n={adUnit:e,rank:i};s.setRefreshTargeting(n),t.executeRefresh(n),c.setAuctionInProgress(e.divId)})),c.getObservedDivIds().length>=0?setTimeout((()=>{l()}),100):p(\"${LOG_PREFIX} There is no more adUnits observed, stop refreshCycle\")};l();window.dispatchEvent(new CustomEvent(Dn.REFRESH_INIT,{detail:{stopRefresh:e=>{e&&Array.isArray(e)&&e?.length>0?e.forEach((e=>{c.unobserve(e)})):c.getObservedDivIds().forEach((e=>{c.unobserve(e)}))}}}));const u=()=>{window.removeEventListener(Dn.PAGE_CHANGE,u),p(\"${LOG_PREFIX} history mutation event received\"),s.removeRenderListener(),o.forEach((e=>{c.resetTimer(e.id,Date.now()),c.unobserve(e.id)})),c.refreshRank={},c.lastRenderInfo={}};window.addEventListener(Dn.PAGE_CHANGE,u)}async function vs(e,t){Ae(fe.BEGIN_CONFIGURE),await q(e,{beforeStart:!0});const i=window,s=e.pocOverrides?.waitForEventToConfigure;s&&await new Promise(((e,t)=>{const i=setTimeout((()=>{v(\"Wait for configure event is too long\"),t()}),6e4),n=()=>{window.removeEventListener(s||\"\",n),clearTimeout(i),e()};m(`[CONFIGURE] wait for event ${s} to start kleanads`),window.addEventListener(s,n)})),p(`Configure kleanads.js (version: ${e.kleanadsVersion}, run count: ${te.getInstance().kleanadsRunCount})`);const a=function(e,t){const i=t.sort(Y);for(const t of i)if(e>=t.size)return t.device;return\"desktop\"}(i.innerWidth,e.screenSizeBreakpoints);!function(e,t,i,s){d=new n(e,t,i,s),c=e,l=t}(e.tagId,e.kleanadsVersion,a,function(e,t){return Cn(e,t,\"\")}(e.pocOverrides?.traceThrottling,e.tagId)),te.getInstance().setUprState(e.pocOverrides?.uprState,e.pocOverrides?.uprRatio);const r=function(e,t){const i=Te(t),n=new Map(i.map((({key:e,defaultValue:t})=>[e,t])));e.document.querySelectorAll('meta[name^=\"pbstck_context:\"]').forEach((e=>{const t=e.attributes.getNamedItem(\"name\")?.value.substring(15).toLowerCase(),s=e.attributes.getNamedItem(\"content\")?.value.toLowerCase();if(t&&s){const e=i.find((({key:e})=>e===t));e&&(function(e,t){return t.defaultValue===e||(t.otherValues??[]).includes(e)}(s,e)?n.set(t,s):b(`${Ee} Unknown ${t} value ${s}`))}}));const s=new URLSearchParams(e.location.search);for(const e of s.keys())e.startsWith(\"pbstck_context:\")&&n.set(e.slice(15),s.get(e)||\"\");return n}(i,e.context);if(0===r.size)p(\"[context] No context set\");else{let e=\"\";r.forEach(((t,i)=>{e+=`\\n${i}=>${t}`})),p(`[context] The following context will be used:${e}`,r)}const o=function(e,t){const i=e.filter(Tn).sort(((e,t)=>e.priority-t.priority)),n=e.filter($n);if(0===n.length)return void v(\"[stacks] Could not find default stack\");n.length>1&&v(\"[stacks] Multiple default stacks found\");const s=n[0];return i.find((e=>Un(e.conditions,t)))??s}(e.stacks,r);if(!o)return void v(\"No stack found, stopping monetization\");p(`[stacks] served stack: ${o.stackId} ${o.priority||o.conditions?\"\":\"(default stack)\"}`);const u=As(o.versions).toString(),h={...e,device:a,stack:o,stackVersion:u,pageContext:r,consentlessMode:e.pocOverrides?.consentlessMode,noCmp:w(),spaMode:e.spaConfig?.[e.tagId]?.mode,pubstackWindow:i,instreamType:Sn(e.tagId,e.pocOverrides?.instreamConfig)},g=new pt(h,t);f(u);return{configPromise:Nn(h),kleanAdsConfig:h,moduleService:g}}async function ys(e){const{configPromise:t,kleanAdsConfig:i,moduleService:n}=e;p(\"Starting kleanads\"),Ae(fe.BEGIN_START);const s=i.noCmp||await ke(window);await n.modulesDispatchEvent(\"onAfterConsent\"),await q(i,{beforeStart:!1});const a=i.stacks.find((e=>e.stackId===function(e){return e.pocOverrides?.consentlessStacks?.[e.tagId]}(i)));if(s){const e=await n.modulesDispatchEvent(\"onAfterConsentAccepted\");await Promise.all(e)}else{p(\"Consent refused\");const e=await n.modulesDispatchEvent(\"onAfterConsentRefused\");await Promise.all(e),a&&(i.stack=a,i.stackVersion=As(a.versions).toString(),f(i.stackVersion),p(\"Using following consentless stack\",a.stackId,a))}if(s||i.consentlessMode||a){await n.modulesDispatchEvent(\"onBeforeStackConfigLoad\");const e=s?t:Nn(i);let a=await e;if(a&&i.pocOverrides?.optimizationModule&&(a=await Vt(a),m(\"[pocOverrides] Optimization module finished\")),p(\"[config] kleanAdsConfig:\",i),p(\"[config] stackLoadedConfig:\",a),a){if(document.body||v(\"no body element found\"),i.pocOverrides&&i.pocOverrides.grapeshotTargetings){m(\"[pocOverrides] Poc Grapeshot enabled\");const e=await async function(e){return new Promise((t=>{const i=`${e}${encodeURIComponent(window.location.href)}`,n=document.createElement(\"script\");n.async=!0,n.src=i,n.onload=()=>t(window.gs_channels),setTimeout((()=>t(void 0)),3e3),n.onerror=()=>t(void 0),document.head.append(n)}))}(i.pocOverrides.grapeshotTargetings);te.getInstance().grapeshotValues=e}await n.modulesDispatchEvent(\"onStackConfigLoad\",{stackConfig:a});const e=n.getLoadedModuleInstance(xt)?.pbjs;e&&await n.modulesDispatchEvent(\"onAfterPrebidReady\",{prebid:e});const t=n.getLoadedModuleInstance(gt)?.aps,s=n.getLoadedModuleInstance(ht)?.adServer;s&&await n.modulesDispatchEvent(\"onAfterAdServerReady\",{adServer:s});const r=n.getLoadedModuleInstance(os)?.adUnitsManager;if(!s)return void v(\"no adServer found, stopping monetization\");if(!r)return void v(\"no adUnitManager found, stopping monetization\");$e(window,i.context,a.gamConfig?.adUnitPathConfig??[]);const o=te.getInstance().kleanadsRunCount,d=new Gn(s,e,t,o),c=n.getLoadedModuleInstance(ht)?.instreamAdServer,l=c?function(e,t,i,n,s){return e.adUnits.some((e=>e.isInstream))?new Gn(s,t,i,n):void 0}(a,e,t,o,c):function(e,t,i,n,s){return e.adUnits.some((e=>e.isInstream))?new Oe(new le(window,t.pageContext,t.device,t.instreamType),i,n,s):void 0}(a,i,e,t,o),u=async e=>{p(\"[config] adUnits to monetize:\",e),await n.modulesDispatchEvent(\"onPrepareAdUnits\",{toPreparedAdUnits:e}),jt(e,d,l,a.lazyLoading)};await r.executeWhenAdUnitsFound(u);const h=a.refreshConfig;if(i.globalRefreshConfig&&h){const e=Cn(i.pocOverrides?.disableRefreshExclusions,i.tagId,a.stackId),t=i.networkId&&!e?await ks(i.configUrl,i.networkId,i.stack.scopeId):Wn;bs(r,d,h.adUnitConfig,t,s,!1),l&&c&&function(e){return\"executeRefresh\"in e}(l)&&bs(r,l,h.adUnitConfig,t,c,!0)}const g=n.getLoadedModuleInstance(ht)?.externalApiAdServer,f=g?new Gn(g,e,t,o):void 0;f&&g&&await n.modulesDispatchEvent(\"onAfterExternalApiReady\",{monetize:e=>{const t=r.adUnits.find((t=>t.divId===e));return t?function(e,t,i){return new Promise(((n,s)=>{t.addCallback(e.divId,n)?i.executeAdCall([e]):s(`KSERR_03 - id ${e.divId} is not correctly configured for manual monetization`)}))}(t,g,f):Promise.reject(`KSERR_02 - id ${e} not found on page`)}})}else v(\"no input configuration, stopping monetization\")}else p(\"consent not given, no monetization\");switch(i.spaMode){case\"manual\":m(\"[SPA] manual SPA enabled\"),Ss((()=>{m(\"[SPA] manual page change requested, restarting kleanads.js\"),Is(i,n)}));break;case\"auto\":m(\"[SPA] auto SPA enabled\"),Vn(),Cs((()=>{m(\"[SPA] page change detected, restarting kleanads.js\"),Is(i,n)}))}ye(ge.MAIN_THREAD_END)}function As(e){const t=e.sort(((e,t)=>e.ratio-t.ratio));return J(void 0!==t[0].ratio?t[0].ratio:100)?t[0].version:t[1].version}const Is=async(e,t)=>{Ae(fe.SPA_RELOAD);const i=te.getInstance();i.setKleanadsRunCount(i.kleanadsRunCount+1);const n=t.getModules();await t.modulesCleanUp(),p(\"Restarting kleanads\");const s=await vs(e,n);s&&ys(s)},Cs=e=>{const t=new MutationObserver((()=>{n()})),i=e=>{const i=e,n=new URL(i.detail.referrer),s=(a=i.detail.url)?`${a}`.startsWith(\"http\")?new URL(a).pathname:`${a}`:\"\";var a;n.pathname!==s&&t.observe(document.head,{attributes:!0,childList:!0,subtree:!0})};window.addEventListener(Dn.HISTORY_MUTATION,i);const n=()=>{window.removeEventListener(Dn.HISTORY_MUTATION,i),t.disconnect(),window.dispatchEvent(new CustomEvent(Dn.PAGE_CHANGE)),e()}},Ss=e=>{const t=()=>{i()};window.addEventListener(jn.SPA_RELOAD,t);const i=()=>{window.removeEventListener(jn.SPA_RELOAD,t),window.dispatchEvent(new CustomEvent(Dn.PAGE_CHANGE)),e()}},ks=async(e,t,i)=>await fetch(`${e}/refresh-exclusions/${t}/${i}/currentRefreshInfo.json`).then((async e=>e.json().then((e=>e)).catch((e=>{v(`unable to extract line items with no refresh: ${e}`)})))).catch((e=>v(`unable to get line items with no refresh: ${e}`)));const ws=\"[parallax]\";class Es{constructor(e,t=[]){this.id=e.divId,this.blockedBidders=wt(Es.BLOCKED_ADAPTERS,t);const i=document.getElementById(this.id);if(!i)throw new Error(`${ws} container not found for adUnit ${this.id}`);const n=(e.bannerSizes??[]).reduce(((e,[,t])=>t>e?t:e),0);this.adUnitContainerMaxHeightPx=Math.max(n,600)/2,this.minViewableHeightPx=Math.min(this.adUnitContainerMaxHeightPx+10,310),this.adUnitContainer=i;const s=this.adUnitContainer.attachShadow({mode:\"open\"});s.innerHTML=`\\n      <div id=\"${Es.PARALLAX_CLIP_ID}\"><slot></slot></div>\\n    `,this.adUnitContainerShadowRoot=s,this.cacheLatestBidWon(),this.observeMutations(),m(`${ws} prepared parallax for adUnit ${this.id}`)}getHighestChildRect(e){const t=e.children;if(0===t.length)return;const i=(e=>e.reduce(((e,t)=>{const i=getComputedStyle(e),n=getComputedStyle(t);return parseInt(n.height)>parseInt(i.height)?t:e}),e[0]))(Array.from(t));return i.getBoundingClientRect()}cacheLatestBidWon(){const e=window?.kleanadsPbjs;if(e)try{e.onEvent(\"auctionEnd\",(e=>{e.adUnitCodes?.includes(this.id)&&(this.latestBidWonInfo=void 0)})),e.onEvent(\"bidWon\",(t=>{if(t.adUnitCode===this.id){const{bidderCode:i,size:n}=t,s=this.blockedBidders.some((t=>i===t||e?.aliasRegistry?.[i]===t)),a=Es.BLOCKED_SIZES.some((e=>e===n)),r=\"banner\"===t?.mediaType;this.latestBidWonInfo={isParallaxable:r&&!a&&!s}}}))}catch(e){b(`${ws} unable to listen to bidWon event`,e)}else b(`${ws} pbjs not loaded, unable to listen to bidWon event`)}observeMutations(){this.resizeObserver=new ResizeObserver((e=>{const t=e.some((e=>Array.from(e.target.parentElement?.children??[]).some((e=>e.getBoundingClientRect().height>this.adUnitContainerMaxHeightPx))));(this.latestBidWonInfo?this.latestBidWonInfo.isParallaxable&&t:t)?this.renderParallax():this.cleanUp()})),this.mutationObserver=new MutationObserver((e=>{this.mutationDebounceTimeout&&clearTimeout(this.mutationDebounceTimeout),this.mutationDebounceTimeout=setTimeout((()=>{this.mutationDebounceTimeout=void 0,e.flatMap((e=>Array.from(e.addedNodes))).forEach((e=>{e instanceof HTMLElement&&this.resizeObserver?.observe(e)})),e.flatMap((e=>Array.from(e.removedNodes))).forEach((e=>{e instanceof HTMLElement&&this.resizeObserver?.unobserve(e)}))}),Es.MUTATION_DEBOUNCE_TIMEOUT_VALUE_MS)})),this.mutationObserver.observe(this.adUnitContainer,{childList:!0})}renderParallax(){this.adUnitContainer.classList.add(Es.PARALLAX_ADUNIT_CONTAINER_CLASS),this.adUnitContainerShadowRoot.getElementById(Es.PARALLAX_CLIP_ID)?.classList.add(Es.PARALLAX_CLIP_ENABLED_CLASS);const e=this.getHighestChildRect(this.adUnitContainer),t=10+(window.innerHeight-(e?.height??0))/2,i=new CSSStyleSheet;i.insertRule(`#${Es.PARALLAX_CLIP_ID}.${Es.PARALLAX_CLIP_ENABLED_CLASS} { height: ${this.minViewableHeightPx}px; width: ${e?.width??0}px; clip-path: rect(0 auto ${this.minViewableHeightPx}px 0); position: relative; margin: 0 auto; } `),i.insertRule(`#${Es.PARALLAX_CLIP_ID}.${Es.PARALLAX_CLIP_ENABLED_CLASS} ::slotted(*) {\\n        position: fixed;\\n        top: ${t}px;\\n      }`),this.adUnitContainerShadowRoot.adoptedStyleSheets=[i]}cleanUp(){this.adUnitContainer.classList.remove(Es.PARALLAX_ADUNIT_CONTAINER_CLASS),this.adUnitContainerShadowRoot.getElementById(Es.PARALLAX_CLIP_ID)?.classList.remove(Es.PARALLAX_CLIP_ENABLED_CLASS)}}Es.MUTATION_DEBOUNCE_TIMEOUT_VALUE_MS=40,Es.PARALLAX_ADUNIT_CONTAINER_CLASS=\"adm-parallax\",Es.PARALLAX_CLIP_ID=\"adm-parallax-clip\",Es.PARALLAX_CLIP_ENABLED_CLASS=\"adm-parallax-clip-enabled\",Es.BLOCKED_ADAPTERS=[\"invibes\",\"seedtag\",\"kargo\",\"ogury\"],Es.BLOCKED_SIZES=[\"1x1\"];const Ts=(e,t)=>{try{return new Es(e,t)}catch(t){b(`${ws} unable to prepareParallax for adUnit ${e.divId}`,t)}};var $s;class _s extends HTMLElement{constructor(){super();const e=window.kleanadsPbjs;if(this.aliasedBidders={},e){try{this.aliasedBidders=e.aliasRegistry}catch(e){b(\"[pbstck-sticky] unable get the list of aliases\",e)}try{e.onEvent(\"bidWon\",this.winningBid.bind(this))}catch(e){b(\"[pbstck-sticky] unable to listen to bidWon event\",e)}}else b(\"[pbstck-sticky] pbjs not loaded, unable to listen to bidWon event\");this.attachShadow({mode:\"open\"}),this.mutationObserver=new MutationObserver((e=>{this.isAddingCreative(e)&&($s.shouldDisplay=!0),this.updateShadowLayout()})),this.addEventListener(\"close\",(()=>{m('[pbstck-sticky] event \"close\" caught'),this.close()}))}isBidderNotToDisplay(e){return $s.adaptersNotToDisplay.includes(e)||$s.adaptersNotToDisplay.includes(this.aliasedBidders[e])}winningBid(e){e.adUnitCode===this.id&&this.isBidderNotToDisplay(e.bidderCode)&&(m(\"[pbstck-sticky] blocked bidder, preventing display\",e),$s.shouldDisplay=!1,this.updateShadowLayout())}close(){m(\"[pbstck-sticky] closing sticky component\"),this.shadowRoot&&(this.mutationObserver.disconnect(),this.shadowRoot.innerHTML=\"\\n          <style>\\n              :host {\\n                display: none;\\n              }\\n          </style>\")}isAddingCreative(e){return e[0]?.addedNodes[0]&&e[0]?.target.parentElement?.id===this.id}connectedCallback(){this.isConnected&&(this.setAttribute(\"data-pbstck-component\",\"no-ad\"),this.setShadowDom(\"<div></div>\"),this.updateShadowLayout(),this.mutationObserver.observe(this,{subtree:!0,childList:!0}))}disconnectedCallback(){this.mutationObserver.disconnect()}attributeChangedCallback(){this.updateShadowLayout()}getHighestChild(){const e=Array.from(this.children);if(0!==e.length)return Rs(e)}setShadowDom(e){this.shadowRoot&&($s.shouldDisplay?this.shadowRoot.innerHTML=`\\n          <style> \\n              :host {\\n                display: block;\\n                max-height: ${$s.maxHeight}px;\\n                overflow: hidden;\\n                position: fixed;\\n                bottom: 0;\\n                left: 0;\\n                right: 0;\\n                margin: 0;\\n                padding: 0;\\n                z-index: 99999999;\\n              }\\n              .sticky-button {\\n                height: 28px;\\n                width: 28px;\\n                background: ${$s.backgroundColor};\\n                position: absolute;\\n                bottom: 0;\\n                right: 0;\\n                border-radius: 5px 0 0 0;\\n                box-shadow: rgba(0, 0, 0, 0.2) -2px -2px 3px -1px, rgba(0, 0, 0, 0.1) -1px -1px 2px -1px !important;\\n              }\\n              .sticky-button-container {\\n                height: 30px;\\n                position: relative;\\n              }\\n              .sticky-button-text {\\n                display: block;\\n                height: 22px;\\n                width: 22px;\\n                padding: 3px;\\n              }\\n              .sticky-container {\\n                background: ${$s.backgroundColor};\\n                padding: 8px 0;\\n                box-shadow: rgba(0, 0, 0, 0.2) 0px -1px 5px -1px, rgba(0, 0, 0, 0.1) 0px 1px 2px -1px !important;\\n              }\\n              .sticky-container slot > * {\\n                position: relative;\\n              }\\n              ::slotted(*) {\\n                position: relative;\\n              }\\n              .cross {\\n                display: block;\\n              }\\n              .sticky-container slot {\\n                width: fit-content;\\n                width: -moz-fit-content;\\n                block-size: fit-content;\\n                margin: 0 auto !important;\\n                display: block;\\n              }\\n            }\\n          </style>\\n          ${e}`:this.shadowRoot.innerHTML=\"\\n          <style>\\n              :host {\\n                display: block;\\n                width: 100%;\\n                height: 1px;\\n                background: transparent;\\n                position: fixed;\\n                bottom: 0;\\n              }\\n          </style><div></div>\")}updateShadowLayout(){if(m(`[pbstck-sticky] updating element ${this.id}`),!this.shadowRoot)return;this.setAttribute(\"data-pbstck-component\",\"sticky\");const e=document.createElement(\"div\");e.className=\"sticky-container\";const t=document.createElement(\"slot\");e.append(t),this.setShadowDom(`${e.outerHTML}`);const i=this.getHighestChild();if(i&&$s.shouldDisplay){i.style.display=\"block\",i.style.margin=\"0 auto\",i.style.bottom=\"0\",i.style.maxHeight=`${$s.maxCreativeHeight}px`;const e=document.createElement(\"div\");e.className=\"sticky-button-container\";const t=document.createElement(\"div\");t.className=\"sticky-button\";const n=document.createElement(\"div\");n.className=\"sticky-button-text\",n.addEventListener(\"click\",(()=>{m(\"[pbstck-sticky] Close button pressed\"),this.close()}));const s=document.createElementNS(\"http://www.w3.org/2000/svg\",\"path\");s.setAttribute(\"d\",\"M 5.3,18.7 C 5.5,18.9 5.7,19 6,19 6.3,19 6.5,18.9 6.7,18.7 l 5.3,-5.3 5.3,5.3 c 0.2,0.2 0.5,0.3 0.7,0.3 0.2,0 0.5,-0.1 0.7,-0.3 0.4,-0.4 0.4,-1 0,-1.4 L 13.4,12 18.7,6.7 c 0.4,-0.4 0.4,-1 0,-1.4 -0.4,-0.4 -1,-0.4 -1.4,0 L 12,10.6 6.7,5.3 c -0.4,-0.4 -1,-0.4 -1.4,0 -0.4,0.4 -0.4,1 0,1.4 l 5.3,5.3 -5.3,5.3 c -0.4,0.4 -0.4,1 0,1.4 z\");const a=document.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\");a.setAttribute(\"viewBox\",\"0 0 24 24\"),a.setAttribute(\"class\",\"cross\"),a.setAttribute(\"height\",\"22px\"),a.setAttribute(\"width\",\"22px\"),a.setAttribute(\"fill\",\"#333\"),a.append(s),n.append(a),t.append(n),e.append(t),this.shadowRoot.prepend(e)}}}$s=_s,_s.backgroundColor=\"rgb(250, 250, 250)\",_s.maxCreativeHeight=216,_s.buttonHeight=32,_s.maxHeight=$s.maxCreativeHeight+$s.buttonHeight,_s.shouldDisplay=!1,_s.adaptersNotToDisplay=[\"ogury\",\"missena\",\"seedtag\",\"kargo\",\"gumgum\",\"bliink\",\"sublime\"];const Rs=e=>e.reduce(((e,t)=>t.offsetHeight>e.offsetHeight?t:e),e[0]);function Os(e){if(e.anchor){const t=e.divId,i=document.getElementById(t);if(m(`[pbstck-sticky] preparing sticky for ${e.adUnitName}`,e),\"pbstck-sticky\"===i?.localName)return void m(`[pbstck-sticky] div ${t} already prepared`);const n=document.createElement(\"pbstck-sticky\");n.id=t;const s=`adm-sticky-${t}`;if(i)i.id=s,i.appendChild(n);else{const e=document.createElement(\"div\");e.id=s,e.appendChild(n),document.body?document.body.appendChild(e):v(\"Body not found, cannot append sticky\")}p(`[pbstck-sticky] prepared sticky for ${e.adUnitName}`,e)}}const Us=\"adm-ad-loading\",Ps=\"adm-ad-empty\",Ls=\"adm-ad-rendered\",xs=\"adm-ad-skin\",Ns=\"data-adm-skin\",Ds=[\"sublime\",\"justpremium\",\"gumgum\",\"dspx\",\"richaudience\"];const js=(e,t,i,n)=>t>15?(b(\"Could not declare XPLN targetings, xpln_targeting function is undefined\"),void n()):e.xpln_targeting&&e.xpln_targeting.toString().length>100?(e.xpln_targeting(),p(`XPLN targeting called after ${t} retry`),void i()):void setTimeout((()=>js(e,t+1,i,n)),300),Bs=e=>new Promise(((t,i)=>js(e,0,t,i))),Ms=\"[IAS Module]\";const Vs=\"[instream]\",Ws=20,zs=\"https://intake.pbstck.com/v1/intake/impression\";function Fs(e,t){const i=function(e,t){const i=e.getElementsByTagName(\"TrackingEvents\"),n=function(e){const t=e.getElementsByTagName(\"VAST\")[0],i=t?.getAttribute(\"version\"),n=t?.getAttribute(\"xmlns\");return{version:i,xmlns:n}}(e);if(!n.version)return v(`${Vs} Invalid vast version string, tracking events are not added`),e;if(m(`${Vs} VAST version ${n.version} with namespace ${n.xmlns}`),!i[0]){m(`${Vs} No TrackingEvents found in VAST XML`);const t=e.getElementsByTagName(\"Linear\"),i=n.xmlns?e.createElementNS(n.xmlns,\"TrackingEvents\"):e.createElement(\"TrackingEvents\");t[0].appendChild(i)}return Object.entries(t).forEach((([t,s])=>{if(s)if(\"impression\"!==t){const a=n.xmlns?e.createElementNS(n.xmlns,\"Tracking\"):e.createElement(\"Tracking\");a.setAttribute(\"event\",t),a.innerHTML=`<![CDATA[${s}]]>`,i[0].appendChild(a)}else{const t=function(e){const t=e.getElementsByTagName(\"InLine\")[0];if(t)return t;const i=e.getElementsByTagName(\"Wrapper\")[0];if(i)return i}(e);if(t){const i=n.xmlns?e.createElementNS(n.xmlns,\"Impression\"):e.createElement(\"Impression\");i.innerHTML=`<![CDATA[${s}]]>`,t.appendChild(i)}}})),e}((new DOMParser).parseFromString(e,\"text/xml\"),t);return(new XMLSerializer).serializeToString(i)}function Hs(e,t){const i=\"pbstck\",n=new Map,s=function(e){const t=document.getElementsByTagName(\"meta\");return Array.from(t).filter((t=>t.name.includes(`${e}:`)))}(i);s.forEach((e=>{const t=(s=e.name,a=i,s.replace(`${a}:`,\"\"));var s,a;n.has(t)&&b(`Custom dim ${t} is present many times`),n.size<Ws?n.set(t,e.content):b(`Skipping custom dim ${t} with ${e.content}: limit of ${Ws} keys exceeded`)})),n.set(\"kleanadsDefaultDevice\",e),n.set(\"windowWidth\",t.innerWidth.toString()),n.set(\"windowHeight\",t.innerHeight.toString());const a=Object.assign({},...Array.from(n.entries()).map((([e,t])=>({[e]:t}))));return n.size>0&&m(\"Custom dim found :\",a),a}function Gs(e,t,i,n,s){const a=function(e,t,i,n,s){const a={scopeId:t.scopeId,tagId:e.tagId,device:Ks(),kleanAdsStackId:t.stackId,kleanAdsStackVersion:t.version,browserName:\"unknown\",browserVersion:\"unknown\",osName:\"unknown\",osVersion:\"unknown\",pbstckVersion:\"unknown\",pbjsVersion:i,pubstackManaged:!0,pubstackRefresh:!1,pubstackRefreshRank:0,refresh:!1,domain:qs(e.pubstackWindow.location),hasUserId:\"notAvailable\",userIdProviderList:[],viewabilityMeasurable:!1,userConsentState:n,userConsentVersion:\"notAvailable\",lastAuctionId:\"\",href:Ys(e.pubstackWindow.location),networkConnectionEffectiveType:navigator.connection?.effectiveType,pageId:e.pubstackWindow.__pbstck_page_id||\"unknown\",customFields:Hs(e.device,e.pubstackWindow)},r={adUnit:s.adUnitCode,adUnitPath:s.adUnitCode,adapterCode:s.bidderCode,bidderCode:s.bidderCode,bidId:s.adId,cpm:s.cpm,cpmUplift:0,size:s.size,tags:[]};return{...a,...r}}(e,t,i,n,s);return{impression:Xs(zs,a)}}const Ks=()=>{const e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?\"tablet\":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?\"mobile\":\"desktop\"},qs=e=>{const t=e?.host??\"unknown\";return t.startsWith(\"www.\")?t.substring(4):t},Ys=e=>{let t;return t=e&&e.protocol&&e.host&&e.pathname?`${e.protocol}//${e.host}${e.pathname}`:\"unknown\",t};function Xs(e,t){return e+`?event=${btoa(JSON.stringify(t))}`}const Js=\"kleanads_cmd_logs\";class Qs{constructor(){this.name=\"SkinRendering\",this.eligibleForSkinRendering=!1}async onStackConfigLoadSync({config:e,stackConfig:t}){if(this.eligibleForSkinRendering=function(e,t){return!!e.pocOverrides?.skinRenderingSettings?.siteLevel?.[e.tagId]?.enabledSkinRenderAdaptation&&!e.pocOverrides?.skinRenderingSettings?.stackLevel?.[e.stack.stackId]?.disableSkinRenderAdaptation&&t.adUnits?.some((e=>e.sizes.some((e=>_(e,[1800,1e3])))))}(e,t),this.eligibleForSkinRendering){const{maxHeaderHeightPx:t,marginTopPx:i,siteContentWidthPx:n,additionalSkinRenderingCss:s}=e.pocOverrides?.skinRenderingSettings?.stackLevel?.[e.stack.stackId]?.style??e.pocOverrides?.skinRenderingSettings?.siteLevel?.[e.tagId]?.style??{};this.configuredMaxHeaderHeightPx=t,this.configuredMarginTopPx=i,this.configuredSiteContentWidthPx=n,this.configuredAdditionalSkinRenderingCss=s,m(\"[Skin] Configuration eligible for skin rendering.\")}}async onAfterPrebidReady({prebid:e,config:{pubstackWindow:t}}){this.pbjs=e,this.eligibleForSkinRendering&&(this.onBidWonHandler=this.onBidWon.bind(this),this.pbjs.getPbjs().onEvent(\"bidWon\",this.onBidWonHandler),Ze((()=>{this.onSlotRenderEndedHandler=this.onSlotRenderEnded.bind(this),t.googletag.pubads().addEventListener(\"slotRenderEnded\",this.onSlotRenderEndedHandler)})))}async clean(){this.onBidWonHandler&&(this.pbjs?.getPbjs().offEvent(\"bidWon\",this.onBidWonHandler),this.onBidWonHandler=void 0),this.onSlotRenderEndedHandler&&(window.googletag.pubads().removeEventListener(\"slotRenderEnded\",this.onSlotRenderEndedHandler),this.onSlotRenderEndedHandler=void 0)}onBidWon(e){this.shouldApplyPrebidSkinRendering(e)?this.applySkinCSS(e.adUnitCode,\"prebid\"):this.removeSkinRendering(e.adUnitCode)}onSlotRenderEnded(e){this.isFromGAM(e)?this.applySkinCSS(e.slot.getSlotElementId(),\"gam\"):e.size&&!_(e.size,[3,1])&&this.removeSkinRendering(e.slot.getSlotElementId())}removeSkinRendering(e){const t=document.getElementById(e);t&&t.classList.remove(Qs.SKIN_RENDERING_CSS_CLASS)}shouldApplyPrebidSkinRendering(e){const t=Ds,i=this.pbjs?.getPbjs();if(i){const n=t.some((t=>e.bidderCode===t||i.aliasRegistry[e.bidderCode]===t));return\"1800x1000\"===e.size&&!n}return v(\"shouldApplyPrebidSkinRendering: unable to get aliasRegistry: prebid is not defined\"),!1}isFromGAM(e){return!!e.size?.length&&1800===e.size[0]&&1e3===e.size[1]}applySkinCSS(e,t){const i=document.getElementById(e);if(i){if(\"gam\"===t)return;m(`[Skin] applying rendering for ${e} from ${t}`);const n=this.configuredMaxHeaderHeightPx??250,s=this.configuredMarginTopPx??0,a=this.configuredSiteContentWidthPx??1e3,r=this.configuredAdditionalSkinRenderingCss??\"\",o=1e3,d=(1800-a)/2,c=d+a,l=document.createElement(\"style\");l.setAttribute(\"data-kleanads\",\"true\"),l.textContent=`\\n        #${e}.${Qs.SKIN_RENDERING_CSS_CLASS} {\\n          /* leave security margin to help display top of creative */\\n          height: ${n}px;\\n          /* set it properly in page flow */\\n          display: block;\\n          margin-top: ${s}px;\\n        }\\n  \\n        #${e}.${Qs.SKIN_RENDERING_CSS_CLASS} > div {\\n          /* horizontally center creative */\\n          transform: translateX(-50%);\\n          position: absolute;\\n          left: 50%;\\n  \\n          /* clipping out the unused part of the creative to leave content visible */\\n          clip-path: polygon(0 0, 0% 100%, ${d}px ${o}px, ${d}px ${n}px, ${c}px ${n}px, ${c}px 100%, 100% 100%, 100% 0%);\\n        }\\n  \\n        ${r}\\n        `,document.head.appendChild(l),i.classList.add(Qs.SKIN_RENDERING_CSS_CLASS)}else b(`skin rendering impossible - adUnitDiv not found for ${e}`)}}Qs.SKIN_RENDERING_CSS_CLASS=\"pbstck_skin_rendering\";const Zs=[class{constructor(){this.name=\"Metas\",this.customFields=[],this.targetings=[]}load({config:e}){C(\"kleanads-version\",e.kleanadsVersion),this.customFields.push(\"kleanads-version\"),te.getInstance().uprTested&&(C(\"xp_variant\",`floor_optimization:${te.getInstance().uprEnabled}`),this.customFields.push(\"xp_variant\"))}async onStackConfigLoad({stackConfig:e}){C(\"config-version\",`${e.version}`),C(\"kleanads-stack-id\",e.stackId),this.customFields.push(\"config-version\",\"kleanads-stack-id\"),S(\"adm_stack\",`${e.stackId}_v${e.version}`),this.targetings.push(\"adm_stack\"),S(\"adm_stack_name\",function(e){if(e.stackName){const t=`_v${e.version}`;return`${e.stackName.substring(0,40-t.length)}${t}`}return`${e.stackId}_v${e.version}`}(e)),this.targetings.push(\"adm_stack_name\"),e.runningABTest.forEach((e=>{C(e.name,Array.isArray(e.value)?e.value.join(\",\"):e.value),this.customFields.push(e.name)}))}async clean(){this.customFields.forEach((e=>{try{!function(e){const t=document.querySelector(`meta[name=\"pbstck:${e}\"]`);t&&t.remove()}(e)}catch(t){b(`Unable to remove CustomField meta tag ${e}`,t)}})),this.customFields=[],this.targetings.forEach((e=>{try{!function(e){const t=document.querySelector(`meta[name=\"ad:${e}\"]`);t&&t.remove()}(e)}catch(t){b(`Unable to remove targeting meta tag ${e}`,t)}})),this.targetings=[]}},xt,gt,class{constructor(){this.name=\"ContainersModule\",this.firstStickyDefined=!1}load(){if(\"function\"==typeof customElements?.define&&\"function\"==typeof MutationObserver){if(customElements.get(\"pbstck-sticky\"))return;try{customElements.define(\"pbstck-sticky\",_s)}catch(e){v(`[ContainersModule] unable to define custom elements, error \"${e}\"`)}}else b('[ContainersModule] unable to define custom elements, error: \"browser not compatible\"')}async onPrepareAdUnits({toPreparedAdUnits:e,stackConfig:t}){for(const i of e??[]){const e=t.prebidConfig?.pbjsConfig.bidderAliases;i.parallax&&Ts(i,e),i.anchor&&!this.firstStickyDefined&&(Os(i),this.firstStickyDefined=!0)}}async clean(){}},ht,class{constructor(){this.name=\"Collector\",this._scriptAdded=!1}async onAfterConsent({config:e}){this._scriptAdded||(setTimeout((()=>{p(\"Downloading pubstack collector\"),K(`https://boot.pbstck.com/v1/tag/${e.tagId}`)}),200),this._scriptAdded=!0)}async clean(){}},os,Qs,class{constructor(){this.name=\"CssClass\"}async onAfterAdServerReady({adServer:e}){e.renderListener(this.applyClassBySlotRenderEndedEvent)}async onAfterPrebidReady({prebid:e}){m(\"[CssClassModule] onAfterPrebidReady event received\"),e.getPbjs().onEvent(\"bidWon\",this.applyClassByBidWon)}async applyClassBySlotRenderEndedEvent(e){const t=e.divId,i=document.getElementById(t);i&&(e.isEmpty?(i.classList.replace(Us,Ps),m(`[CSS Class] slot empty: ${t}`)):(i.classList.replace(Us,Ls),i.classList.replace(Ps,Ls),e.size?.length&&1800===e.size[0]&&1e3===e.size[1]?(i.classList.add(xs),i.setAttribute(Ns,\"gam\"),m(`[CSS Class] slot rendered is skin: ${t}`)):(i.classList.remove(xs),i.removeAttribute(Ns)),m(`[CSS Class] slot rendered: ${t}`)))}applyClassByBidWon(e){const t=document.getElementById(e.adUnitCode);\"1800x1000\"===e.size&&(t?.classList.add(xs),t?.setAttribute(Ns,\"prebid\"),Ds.includes(e.bidderCode)||t?.classList.add(\"adm-ad-skin-resizable\"),m(`[CSS Class] bidWon is skin: ${e.adUnitCode}`))}async onPrepareAdUnits({toPreparedAdUnits:e}){e&&e.forEach((e=>{const t=document.getElementById(e.divId);t&&t.classList.add(Us)}))}clean(){return Promise.resolve(void 0)}},class{constructor(){this.name=\"XplnModule\"}async onStackConfigLoad({config:e,stackConfig:t}){if(t.xplnConfig?.enabled&&t.xplnConfig?.publisherId){const i=t.xplnConfig.publisherId;((e,t)=>{const i=e.document.createElement(\"script\"),n=e.document.createElement(\"script\");i.innerHTML=`(function(x,p,l,n,a,i) {\\n          a=p.createElement(l);a.async=!0;a.src=n;a.xpln=x;\\n          i=p.currentScript||p.getElementsByTagName(l)[0];i.parentNode.insertBefore(a,i);\\n          })({xid:'${t}'},document,'script','https://cdn.xpln.tech/page.js');`,n.innerHTML=`(function(x,p,l,n,a,i) {\\n          self.xpln_targeting=function(){};\\n          a=x.createElement(p);a.async=!0;\\n          a.src=l+'${t}'+'/'+location.hostname+'.js';\\n          i=x.currentScript||x.getElementsByTagName(p)[0];i.parentNode.insertBefore(a,i);\\n          })(document,'script','https://cdn.xpln.tech/');`,i.type=\"text/javascript\",n.type=\"text/javascript\",i.setAttribute(\"data-kleanads\",\"true\"),n.setAttribute(\"data-kleanads\",\"true\"),e.document.head.appendChild(i),e.document.head.appendChild(n)})(e.pubstackWindow,i)}}async onAfterAdServerReady({config:e,stackConfig:t,adServer:i}){t?.xplnConfig&&(p(\"XplnModule declare xpln targeting when ready\"),i.registerExternalTargetingDeclaration((()=>Bs(e.pubstackWindow))))}async clean(){}},class{constructor(){this.name=\"PublicAccessModule\",this.cmd=[],this._refresh_init_listener=e=>{}}async onStackConfigLoadSync({config:e,stackConfig:t}){e.pubstackWindow._pbstckKleanAds.getBootstrapConfig=()=>{const{pubstackWindow:t,...i}=e;return i},e.pubstackWindow._pbstckKleanAds.getStackConfig=()=>t,e.pubstackWindow._pbstckKleanAds.apiReady=!0,this._refresh_init_listener=t=>{e.pubstackWindow._pbstckKleanAds.stopRefresh=e=>{t?.detail?.stopRefresh?.(e)},e.pubstackWindow._pbstckKleanAds.refreshApiReady=!0},window.addEventListener(Dn.REFRESH_INIT,this._refresh_init_listener)}async onPrepareAdUnits(){}async onAfterExternalApiReady({monetize:e}){Array.isArray(window.kleanads?.cmd)&&this.cmd.push(...window.kleanads.cmd.filter((e=>e instanceof Function))),window.kleanads={cmd:{push:(...e)=>{e.length&&e.forEach((e=>{e instanceof Function?(y(\"[KleanadsAPI] Valid callback input\",Js,{method:\"cmd.push\",valid:\"true\"}),e()):y(\"[KleanadsAPI] Invalid callback input\",Js,{method:\"cmd.push\",valid:\"false\",input:`${e}`})}))}},monetize:(t,...i)=>t&&\"string\"==typeof t&&0===i.length?(y(\"[KleanadsAPI] Valid monetize input\",Js,{method:\"monetize\",valid:\"true\"}),e(t)):(y(\"[KleanadsAPI] Invalid input\",Js,{method:\"monetize\",valid:\"false\",input:`${[t,...i]}`}),Promise.reject(\"KSERR_01 - invalid input\"))},this.cmd.forEach((e=>{y(\"[KleanadsAPI] Valid callback input\",Js,{method:\"cmd.push\",valid:\"true\"}),e()}))}async clean({config:e}){e.pubstackWindow._pbstckKleanAds.apiReady=!1,e.pubstackWindow._pbstckKleanAds.getBootstrapConfig=()=>{throw new Error(\"Not ready yet, wait for apiLoaded.\")},e.pubstackWindow._pbstckKleanAds.getStackConfig=()=>{throw new Error(\"Not ready yet, wait for apiLoaded.\")},window.removeEventListener(Dn.REFRESH_INIT,this._refresh_init_listener)}},class{constructor(){this.name=\"IasModule\"}async onAfterAdServerReady({config:e,stackConfig:t,adServer:i}){const n=t.iasConfig?.pubId;n&&i.registerExternalTargetingDeclaration((t=>this.declareIasTargetingsWhenReady(e.pubstackWindow,n,t)))}async clean(){}declareIasTargetingsWhenReady(e,t,i){return new Promise(((n,s)=>this.tryDeclareIasTargetings(e,0,t,i,n,s)))}async tryDeclareIasTargetings(e,t,i,n,s,a){if(t>15)return b(`${Ms} Could not declare IAS targetings because they could not be retrieved`),void a();const r=this.prepareSlots(n),o=await this.getTargetings(i,r,e);if(p(`${Ms} IAS targeting called`,o),o){const e=await o.json();return n.forEach((t=>{if(e.slots[t.getSlotElementId()]&&(void 0!==e.custom[\"ias-kw\"]&&(t.setTargeting(\"ias-kw\",e.custom[\"ias-kw\"]),Object.keys(e.brandSafety).forEach((i=>{t.setTargeting(i,e.brandSafety[i])}))),void 0!==e.fr&&t.setTargeting(\"fr\",e.fr),p(`${Ms} IAS targeting called for slot ${t.getSlotElementId()}`,e),t.getSlotElementId()in e.slots&&e.slots[t.getSlotElementId()].vw)){const i=e.slots[t.getSlotElementId()].vw.toString().replaceAll(\",\",\"%2C\");t.setTargeting(\"vw\",i)}})),m(`${Ms} IAS targeting called${t?\" after \"+t+\" tries\":\"\"}`),void s()}setTimeout((()=>this.tryDeclareIasTargetings(e,t+1,i,n,s,a)),300)}async getTargetings(e,t,i){let n=`https://pixel.adsafeprotected.com/services/pub?anId=${e}`;t.forEach((e=>{n=n.concat(`&slot=${e}`)})),n=n.concat(`&wr=${this.viewports(i)}&sr=${this.browserSize(i)}&sessionId=${At()}&url=${encodeURIComponent(i.location.href)}`),m(`${Ms} URL:`,n);try{return await fetch(n.toString())}catch(e){b(`${Ms} Error while fetching IAS targetings`,e)}}prepareSlots(e){const t=[];return e.length>0&&e.forEach((e=>{t.push(this.slotsToString(e))})),t}slotsToString(e){return`%7Bid:${e.getSlotElementId()},ss:[${e.getSizes().filter((e=>\"fluid\"!==e)).map((e=>`${e.width}.${e.height}`)).join(\",\")}],p:${e.getAdUnitPath()},t:display%7D`}viewports(e){return`${e.innerWidth}.${e.innerHeight}`}browserSize(e){return`${e.screen.width}.${e.screen.height}`}},class{constructor(){this.name=\"InstreamAnalytics\",this.consent=\"notAvailable\"}async onAfterConsentAccepted(){this.consent=\"accepted\"}async onAfterConsentRefused(){this.consent=\"refused\"}async onAfterPrebidReady({config:e,stackConfig:t,prebid:i}){this.pbjs=i.getPbjs(),this.onBidAcceptedHandler=function({config:e,stackConfig:t,pbjsVersion:i,userConsentState:n}){return s=>{if(s.vastXml&&t.adUnits.some((e=>e.isInstream&&e.externalAdServer))){const a=Gs(e,t,i,n,s);s.vastXml=Fs(s.vastXml,a)}}}({config:e,stackConfig:t,pbjsVersion:this.pbjs.version,userConsentState:this.consent}),this.pbjs.onEvent(\"bidAccepted\",this.onBidAcceptedHandler)}async clean(){this.onBidAcceptedHandler&&this.pbjs?.offEvent(\"bidAccepted\",this.onBidAcceptedHandler)}}];class ea{static getModules(){return Zs}}async function ta(e){if(window._kleanadslock)return void m(\"kleanads.js already started\");window._kleanadslock=!0,ye(ge.BEGIN_INIT);const t=async()=>{const t=await vs(e,ea.getModules().map((e=>new e)));t&&await ys(t)};if(e.pocOverrides?.waitForEventToInit){const i=setTimeout((()=>{v(\"Wait for init event is too long\")}),6e4),n=()=>{window.removeEventListener(e.pocOverrides?.waitForEventToInit||\"\",n),clearTimeout(i),t()};m(`[INIT] wait for event ${e.pocOverrides?.waitForEventToInit} to start kleanads`),window.addEventListener(e.pocOverrides?.waitForEventToInit,n)}else await t()}return window._pbstckKleanAds={initKleanAds:ta,apiReady:!1,getBootstrapConfig:()=>{throw new Error(\"Not ready yet, wait for apiReady.\")},getStackConfig:()=>{throw new Error(\"Not ready yet, wait for apiReady.\")},refreshApiReady:!1,stopRefresh:()=>{throw new Error(\"Not ready yet, wait for refreshApiReady.\")}},e.initKleanAds=ta,e}({});\n; window._pbstckKleanAds.initKleanAds({\"tagId\":\"b0f8046b-4b55-4f4a-a31a-4403b490a46c\",\"adCallTimeout\":3000,\"configUrl\":\"https://cdn-adm.pbstck.com\",\"screenSizeBreakpoints\":[{\"size\":0,\"device\":\"mobile\"},{\"size\":768,\"device\":\"desktop\"}],\"metricThrottling\":false,\"networkId\":124565442,\"context\":[{\"key\":\"site_name\",\"defaultValue\":\"\",\"otherValues\":[\"1136-5fa56f3d0ee6a\",\"1251-6141f9326fdd1\",\"1507-633d9df0acc0b\",\"1598-633ae63833c0b\",\"1668-6396ff2fdcbb0\",\"1729-63f799f009353\",\"1778-6450cbb23f199\",\"184-5e4c0a7f04adc\",\"197-5e3314dfe85d4\",\"2-5e1ee83770286\",\"2063-657c1e2f6ad48\",\"214-5df2721c4d352\",\"272-5de523fceebc8\",\"337-5f7ddbc7b80bb\",\"36-60ad2e60ca2cb\",\"401-5e5003431fc28\",\"54-6001b9335d0f7\",\"65-5e2f1886332fc\",\"986-5dcd563931e2a\",\"actugaming.net\",\"akibagamers.it\",\"altselection.com\",\"animeland.fr\",\"animenewsnetwork.com\",\"animotaku.fr\",\"ayther.fr\",\"cartoon-fantasy.net\",\"cinetrafic\",\"danstonchat.com\",\"dcplanet.fr\",\"ecranlarge\",\"electromenager-compare.com\",\"fifaultimateteam.it\",\"fredzone.org\",\"gaak.fr\",\"game-guide.fr\",\"gamekyo.com\",\"gamewave.fr\",\"genshin-impact.fr\",\"goodnite.fr\",\"halo.fr\",\"hearthstone-decks.com\",\"hitek.fr\",\"jeu.video\",\"jeuxonline.info\",\"judgehype.com\",\"julsa.fr\",\"lcd-compare.com\",\"mamytwink.com\",\"margxt.fr\",\"mdcu-comics.fr\",\"meilleure-innovation.com\",\"minecraft-tutos.com\",\"minecraft.fr\",\"neozone.org\",\"netflix-news.com\",\"nintendo-difference.com\",\"nintendo-town.fr\",\"p-nintendo.com\",\"parlerdamour.fr\",\"playerone.tv\",\"pokemon-france.com\",\"psthc.fr\",\"rci.fm\",\"rpgsoluce.com\",\"senscritique\",\"serie-news.com\",\"serieously.com\",\"sitegeek.fr\",\"team-aaa.com\",\"thrillercafe.it\",\"vakarm.net\",\"videolan.org\",\"videomuzic.eu\",\"voxgaming.fr\",\"warlegend.net\",\"wavendb.com\",\"wof.gg\",\"wol.gg\",\"wowisclassic.com\",\"xbox-mag.net\",\"xboxygen.com\",\"iphon.fr\"]},{\"key\":\"hb_footer\",\"defaultValue\":\"\",\"otherValues\":[\"cultureg\",\"pubstack\"]},{\"key\":\"subscriber\",\"defaultValue\":\"\",\"otherValues\":[\"false\",\"true\",\"yes\",\"no\",\"oui\",\"non\"]},{\"key\":\"exclude\",\"defaultValue\":\"\",\"otherValues\":[\"yes\",\"no\"]},{\"key\":\"refresh\",\"defaultValue\":\"\",\"otherValues\":[\"yes\",\"no\"]},{\"key\":\"test\",\"defaultValue\":\"\",\"otherValues\":[\"yes\"]},{\"key\":\"parallax\",\"defaultValue\":\"\",\"otherValues\":[\"true\",\"false\"]},{\"key\":\"video_corner\",\"defaultValue\":\"\",\"otherValues\":[\"yes\"]},{\"key\":\"hp\",\"defaultValue\":\"\",\"otherValues\":[\"yes\",\"no\"]},{\"key\":\"ab_test_enforced\",\"defaultValue\":\"false\",\"otherValues\":[\"true\"]},{\"key\":\"ab_test\",\"defaultValue\":\"\",\"otherValues\":[\"yes\"]},{\"key\":\"safari\",\"defaultValue\":\"\",\"otherValues\":[\"yes\"]},{\"key\":\"iab_cat\",\"defaultValue\":\"\",\"otherValues\":[\"full\",\"empty\",\"light\"]},{\"key\":\"no_s2s\",\"defaultValue\":\"\",\"otherValues\":[\"yes\"]},{\"key\":\"ios\",\"defaultValue\":\"\",\"otherValues\":[\"yes\"]}],\"pubstackDeclarationTargetingKeys\":[],\"priceRuleBuckets\":[{\"max\":\"5\",\"increment\":\"0.05\"}],\"globalRefreshConfig\":{\"prebidOrderIds\":[3245735221,3245735215]},\"pocOverrides\":{\"consentlessMode\":\"GAM\",\"refreshAlwaysInViewAdUnitNames\":[\"Actugaming_cgFooterHB\",\"altselection.com_cgFooterHB_Desktop\",\"altselection.com_cgFooterHB_Mobile\",\"ayther.fr_cgFooterHB_mobile\",\"cinetrafic.fr_cgFooterHB\",\"danstonchat.com_cgFooterHB_Desktop\",\"danstonchat.com_cgFooterHB_Mobile\",\"Ecranlarge_cgFooter_sticky\",\"Ecranlarge_cgFooterHB\",\"footer-hb-desktop\",\"footer-hb-mobile\",\"footer-hb-mobile_alwaysInView\",\"Fredzone_cgFooter_sticky\",\"Fredzone_cgFooterHB\",\"gamekyo.com_cgFooterHB_Desktop\",\"gamekyo.com_cgFooterHB_Mobile\",\"Gamewave_cgFooterHB\",\"gamewave.fr_cgFooterHB_Desktop\",\"genshin-impact.fr_cgFooterHB_Desktop\",\"genshin-impact.fr_cgFooterHB_Mobile\",\"goodnite.fr_cgFooterHB_Desktop\",\"goodnite.fr_cgFooterHB_Mobile\",\"jeuxonline.info_cgFooterHB\",\"Judgehype_cgFooter_sticky\",\"Judgehype_cgFooterHB\",\"judgehype.com_footer-hb-desktop\",\"Julsa_cgFooterHB\",\"Mamytwink_cgFooter_sticky\",\"Mamytwink_cgFooterHB\",\"manga-sanctuary.com_cgFooterHB\",\"margxt.fr_cgFooterHB\",\"MI_cgFooter_sticky\",\"MI_cgFooterHB\",\"Minecraft_cgFooterHB\",\"minecraft.fr_footer-hb-desktop\",\"netflix-news.com_cgFooterHB\",\"parlerdamour.fr_cgFooterHB_Desktop\",\"parlerdamour.fr_cgFooterHB_Mobile\",\"PSTHC_cgFooterHB\",\"psthc.fr_footer-hb-desktop\",\"rci.fm_cgFooterHB_Desktop\",\"rci.fm_cgFooterHB_Mobile\",\"Senscritique_cgFooterHB\",\"Senscritique_cgFooterHB_Mobile\",\"Serieously_cgFooterHB\",\"Serieously_cgFooterHB_sticky\",\"sitegeek.fr_cgFooterHB\",\"team-aaa.com_cgFooterHB\",\"VLC_cgFooterHB\",\"voxgaming.fr_footer-hb-desktop\",\"warlegend.net_cgFooterHB_Desktop\",\"warlegend.net_cgFooterHB_Mobile\",\"wavendb.com_cgFooterHB_Desktop\",\"wavendb.com_cgFooterHB_Mobile\",\"wowisclassic.com_cgFooterHB_Desktop\",\"wowisclassic.com_cgFooterHB_Mobile\",\"xbox-mag.net_cgFooterHB\",\"xboxygen.com_cgFooterHB_Desktop\",\"xboxygen.com_cgFooterHB_Mobile\"]},\"stacks\":[{\"scopeId\":\"384a552d-30a0-4886-a5c3-cd139636c5b6\",\"stackName\":\"Default\",\"siteId\":\"b0f8046b-4b55-4f4a-a31a-4403b490a46c\",\"stackId\":\"381495bf-9656-4c01-bc57-dd3719d59d87\",\"versions\":[{\"version\":61,\"ratio\":100}],\"conditions\":null,\"priority\":null}],\"extraScripts\":[],\"multiformat\":{\"bidders\":[\"adagio\",\"appnexus\",\"criteo\"]},\"newPrebidUrl\":\"https://cdn-adm.pbstck.com/kleanads-prebid/9.35.0-4135d92559edba8df8b73ab1d62b63352e924cb4.js\",\"kleanadsVersion\":\"2505161540\"}); })();</script><meta name=\"pbstck:kleanads-version\" content=\"2505161540\"></head>\n\n<body class=\"home blog xbox-mag-net\" style=\"\"><div id=\"didomi-host\" class=\"didomi-host\" data-nosnippet=\"true\" aria-hidden=\"true\" lang=\"fr\" data-lang-dir=\"ltr\"></div><div id=\"cgInterstitiel\"></div><div id=\"cgHabillage\"></div><iframe name=\"__tcfapiLocator\" title=\"__tcfapiLocator\" style=\"display: none;\"></iframe>\n\n\t<div id=\"skin\"></div>\n\n\t<header id=\"headerXM\">\n\t\t<div class=\"texture\">\n\t\t\t<div class=\"container\">\n\n\t\t\t\t<div id=\"header-content\" class=\"row-fluid\">\n\n\t\t\t\t\t<div id=\"header-profil-search\" class=\"span4\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div><!-- #header-profil-search -->\n\n\t\t\t\t\t<div id=\"myModalIdent\" class=\"modal hide fade\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\">\n\t\t\t\t\t\t<div class=\"modal-header\">\n\t\t\t\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">&nbsp;</button>\n\t\t\t\t\t\t\t<h3>Connexion Xbox-mag.net</h3>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"modal-body clearfix\">\n\t\t\t\t\t\t\t<ul class=\"colonnes-modal\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<div class=\"content\">\n\t\t\t\t\t\t\t\t\t\t\t<h4>Tu as déjà un compte ?</h4>\n\t\t\t\t\t\t\t\t\t\t\t<a href=\"http://forum.xbox-mag.net/ucp.php?mode=login\" class=\"btn btn-large\">Me connecter</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<div class=\"content\">\n\t\t\t\t\t\t\t\t\t\t\t<h4>Pas encore inscrit ?</h4>\n\t\t\t\t\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"help-block\">Être membre Xbox-mag c'est le début voir l'accomplissement d'une vie, un succès à 1000Pts, une bonne partie de j... enfin bref c'est vital et de source pas du tout sûre c'est en passe d'être voté au gouvernement.<br><br>Bref \"juste inscrit toi !\" ;)</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"http://forum.xbox-mag.net/ucp.php?mode=register\" class=\"btn btn-large\">Créer un compte XM</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</fieldset>\n\t\t\t\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div><!-- .modal -->\n\n\t\t\t\t\t<div id=\"header-logo\" class=\"span4\">\n\t\t\t\t\t\t<a href=\"/\" class=\"logo\">Xbox-mag.net</a>\n\t\t\t\t\t</div><!-- #header-logo -->\n\n\t\t\t\t\t<div id=\"header-social\" class=\"span4\">\n\t\t\t\t\t\t<ul class=\"social-liste\">\n\t\t\t\t\t\t\t<li><a target=\"_blank\" href=\"https://discord.gg/HkUFdkf\" class=\"social-discord\" title=\"\"></a></li>\n\t\t\t\t\t\t\t<li><a target=\"_blank\" href=\"https://www.facebook.com/xboxmag\" class=\"social-facebook\" title=\"\"></a></li>\n\t\t\t\t\t\t\t<li><a target=\"_blank\" href=\"https://twitter.com/XboxMag\" class=\"social-twitter\" title=\"\"></a></li>\n\t\t\t\t\t\t\t<li><a target=\"_blank\" href=\"https://xbox-mag.net/feed/\" class=\"social-rss\" title=\"\"></a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div><!-- #header-social -->\n\n\t\t\t\t\t<div id=\"header-min\">\n\t\t\t\t\t\t<ul class=\"header-min-liste\">\n\t\t\t\t\t\t\t<li><a href=\"#myModalIdent\" role=\"button\" data-toggle=\"modal\" class=\"min-id min-id-connected\" title=\"\"></a></li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li class=\"sep-header\"><a target=\"_blank\" href=\"https://discord.gg/HkUFdkf\" class=\"social-discord\" title=\"\"></a></li>\n\t\t\t\t\t\t\t<li><a href=\"https://www.facebook.com/xboxmag\" class=\"social-facebook\" title=\"\"></a></li>\n\t\t\t\t\t\t\t<li><a href=\"https://twitter.com/XboxMag\" class=\"social-twitter\" title=\"\"></a></li>\n\t\t\t\t\t\t\t<li><a href=\"https://xbox-mag.net/feed/\" class=\"social-rss\" title=\"Flux RSS\"></a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div><!-- #header-min -->\n\n\t\t\t\t</div><!-- #header-content -->\n\n\t\t\t</div><!-- .container -->\n\t\t</div><!-- .texture -->\n\t</header>\n\n\t<div id=\"nav\">\n\t\t<div class=\"container\">\n\t\t\t<a href=\"https://xbox-mag.net\" id=\"navMin\">Accueil</a>\n\t\t\t<ul id=\"nav-liste\">\n\t\t\t\t<li>\n\t\t\t\t\t<a href=\"/news/\" title=\"News\">News</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href=\"/tests/\" title=\"Tests\">Tests</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a href=\"/jeux/\" title=\"Jeux\">Jeux</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href=\"/xbox-game-pass/\" title=\"Xbox Game Pass\">Xbox Game Pass</a>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<a href=\"/category/1st-look/\" title=\"1st Look\">1st Look</a>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"/forum-xm/\" title=\"Forum\">Forum</a>\n\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t<!--li><a href=\"#\" title=\"+\">+</a></li-->\n\t\t\t</ul>\n\t\t</div><!-- .container -->\n\t</div><!-- #nav -->\n\n\t<div id=\"skin-holder\">\n\t\t<div id=\"skin-animation\"></div>\n\t\t<div id=\"skin-container\">\n\t\t\t\t<div id=\"pubLargeBan\">\n\t\t<div class=\"container\">\n\t\t\t<!-- Bannière - 728x90 - 1 -->\n\t\t\t<div id=\"cgBannerATF1\"></div> \n\t\t</div>\n\t</div><!-- #pubLargeBanner -->\t   <div id=\"une\">\n\t\t\t<div class=\"texture\">\n\t\t\t\t<div class=\"container container-padding\">\n\n\t\t\t\t\t<div id=\"header-content\" class=\"row-fluid\">\n\n\t\t\t\t\t\t<div class=\"span8\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"maincarousel\" class=\"carousel slide shadow\" data-ride=\"carousel\">\n\t\t\t\t\t\t\t\t<ol class=\"carousel-indicators\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-target=\"#maincarousel\" data-slide-to=\"0\" class=\"active\"></li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-target=\"#maincarousel\" data-slide-to=\"1\"></li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-target=\"#maincarousel\" data-slide-to=\"2\"></li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-target=\"#maincarousel\" data-slide-to=\"3\"></li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-target=\"#maincarousel\" data-slide-to=\"4\"></li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-target=\"#maincarousel\" data-slide-to=\"5\"></li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-target=\"#maincarousel\" data-slide-to=\"6\"></li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-target=\"#maincarousel\" data-slide-to=\"7\"></li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ol>\n\n\t\t\t\t\t\t\t\t<div class=\"carousel-inner\">\n\t\t\t\t\t\t\t\t\t<div class=\"item active\">\n\t<img src=\"/content/thumbnails/uploads/2025/02/onimusha-2-samurai-destiny-ps4-remaster-revealed-e1738716694792-tt-width-620-height-292-fill-1-crop-1-bgcolor-000000.jpg\" width=\"620\" height=\"292\" alt=\"\">\t <div class=\"carousel-caption\">\n\t\t<div class=\"carousel-caption-details\">\n\t\t\t<div class=\"pull-left\">\n\t\t\t\t\t\t\t\t\t<span class=\"type-article type-test\">Test</span>\t\t\t\t<span class=\"date date-carousel\">21.05</span>\n\t\t\t</div>\n\t\t\t<div class=\"pull-right\">\n\t\t\t\t<ul class=\"article-social-liste\">\n\t\t\t\t\t<li class=\"liste-facebook\"><a href=\"javascript:void(0);\" onclick=\"window.open('http://www.facebook.com/sharer.php?u=https%3A%2F%2Fxbox-mag.net%2Fjeux%2Fonimusha-2-samurais-destiny%2Ftest%2Fxbox-one%2F&amp;t=Test+d%E2%80%99Onimusha+2%3A+Samurai%E2%80%99s+Destiny%2C+une+histoire+de+vieilles+marmites+et+de+bonne+soupe','buzzfacebook','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Facebook\"></a></li>\n\t\t\t\t\t<li class=\"liste-twitter\"><a href=\"#\" onclick=\"window.open('https://twitter.com/share?url=https%3A%2F%2Fxbox-mag.net%2Fjeux%2Fonimusha-2-samurais-destiny%2Ftest%2Fxbox-one%2F&amp;text=Test+d%E2%80%99Onimusha+2%3A+Samurai%E2%80%99s+Destiny%2C+une+histoire+de+vieilles+marmites+et+de+bonne+soupe','buzztwitter','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Twitter\"></a></li>\n\t\t\t\t\t<li class=\"liste-comment\"><a href=\"https://xbox-mag.net/jeux/onimusha-2-samurais-destiny/test/xbox-one/#commentaires\" title=\"Commenter l'article\" class=\"nb-comment\"><span></span>0</a></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div><!-- .carousel-caption-details -->\n\t\t<div class=\"carousel-caption-titles\">\n\t\t\t<h4><a href=\"https://xbox-mag.net/jeux/onimusha-2-samurais-destiny/test/xbox-one/\">Test d’Onimusha 2: Samurai’s Destiny, une histoire de vieilles marmites et de bonne soupe</a></h4>\n\t\t\t<p>Nous sommes en 2002. La Playstation 2 est en pleine bourre et accueille de nouveaux...</p>\n\t\t</div><!-- .carousel-caption-titles -->\n\t</div>\n</div><!-- .item --><div class=\"item \">\n\t<img src=\"/content/thumbnails/uploads/2014/06/a1031cba-35a8-4bd2-8c20-d49a10926b0e-tt-width-620-height-292-fill-1-crop-1-bgcolor-000000.jpg\" width=\"620\" height=\"292\" alt=\"\">\t <div class=\"carousel-caption\">\n\t\t<div class=\"carousel-caption-details\">\n\t\t\t<div class=\"pull-left\">\n\t\t\t\t\t\t\t\t\t<span class=\"type-article type-news\">News</span>\t\t\t\t<span class=\"date date-carousel\">20.05</span>\n\t\t\t</div>\n\t\t\t<div class=\"pull-right\">\n\t\t\t\t<ul class=\"article-social-liste\">\n\t\t\t\t\t<li class=\"liste-facebook\"><a href=\"javascript:void(0);\" onclick=\"window.open('http://www.facebook.com/sharer.php?u=https%3A%2F%2Fxbox-mag.net%2F2025%2F05%2F20%2Fdeals-gold-et-promos-du-store-xbox-les-petits-prix-de-la-semaine-5%2F&amp;t=Deals+with+Gold+et+Promos+du+Store+Xbox+%3A+les+petits+prix+de+la+semaine','buzzfacebook','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Facebook\"></a></li>\n\t\t\t\t\t<li class=\"liste-twitter\"><a href=\"#\" onclick=\"window.open('https://twitter.com/share?url=https%3A%2F%2Fxbox-mag.net%2F2025%2F05%2F20%2Fdeals-gold-et-promos-du-store-xbox-les-petits-prix-de-la-semaine-5%2F&amp;text=Deals+with+Gold+et+Promos+du+Store+Xbox+%3A+les+petits+prix+de+la+semaine','buzztwitter','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Twitter\"></a></li>\n\t\t\t\t\t<li class=\"liste-comment\"><a href=\"https://xbox-mag.net/2025/05/20/deals-gold-et-promos-du-store-xbox-les-petits-prix-de-la-semaine-5/#commentaires\" title=\"Commenter l'article\" class=\"nb-comment\"><span></span>0</a></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div><!-- .carousel-caption-details -->\n\t\t<div class=\"carousel-caption-titles\">\n\t\t\t<h4><a href=\"https://xbox-mag.net/2025/05/20/deals-gold-et-promos-du-store-xbox-les-petits-prix-de-la-semaine-5/\">Deals with Gold et Promos du Store Xbox : les petits prix de la semaine</a></h4>\n\t\t\t<p>Nous voici de retour comme chaque mardi matin pour un tour d’horizon des jeux...</p>\n\t\t</div><!-- .carousel-caption-titles -->\n\t</div>\n</div><!-- .item --><div class=\"item \">\n\t<img src=\"/content/thumbnails/uploads/2024/09/capcomfightingcollection2-1-min-tt-width-620-height-292-fill-1-crop-1-bgcolor-000000.jpg\" width=\"620\" height=\"292\" alt=\"\">\t <div class=\"carousel-caption\">\n\t\t<div class=\"carousel-caption-details\">\n\t\t\t<div class=\"pull-left\">\n\t\t\t\t\t\t\t\t\t<span class=\"type-article type-test\">Test</span>\t\t\t\t<span class=\"date date-carousel\">14.05</span>\n\t\t\t</div>\n\t\t\t<div class=\"pull-right\">\n\t\t\t\t<ul class=\"article-social-liste\">\n\t\t\t\t\t<li class=\"liste-facebook\"><a href=\"javascript:void(0);\" onclick=\"window.open('http://www.facebook.com/sharer.php?u=https%3A%2F%2Fxbox-mag.net%2Fjeux%2Fcapcom-fighting-collection-2-2%2Ftest%2Fxbox-series-x%2F&amp;t=Test+de+Capcom+Fighting+Collection+2+sur+Xbox+Series+X+%3A+les+poings+sur+les+I','buzzfacebook','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Facebook\"></a></li>\n\t\t\t\t\t<li class=\"liste-twitter\"><a href=\"#\" onclick=\"window.open('https://twitter.com/share?url=https%3A%2F%2Fxbox-mag.net%2Fjeux%2Fcapcom-fighting-collection-2-2%2Ftest%2Fxbox-series-x%2F&amp;text=Test+de+Capcom+Fighting+Collection+2+sur+Xbox+Series+X+%3A+les+poings+sur+les+I','buzztwitter','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Twitter\"></a></li>\n\t\t\t\t\t<li class=\"liste-comment\"><a href=\"https://xbox-mag.net/jeux/capcom-fighting-collection-2-2/test/xbox-series-x/#commentaires\" title=\"Commenter l'article\" class=\"nb-comment\"><span></span>0</a></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div><!-- .carousel-caption-details -->\n\t\t<div class=\"carousel-caption-titles\">\n\t\t\t<h4><a href=\"https://xbox-mag.net/jeux/capcom-fighting-collection-2-2/test/xbox-series-x/\">Test de Capcom Fighting Collection 2 sur Xbox Series X : les poings sur les I</a></h4>\n\t\t\t<p>On a beau se retrouver régulièrement face à des nouvelles éditions et autres portages...</p>\n\t\t</div><!-- .carousel-caption-titles -->\n\t</div>\n</div><!-- .item --><div class=\"item \">\n\t<img src=\"/content/thumbnails/uploads/2023/06/fysironwcaewfed-tt-width-620-height-292-fill-1-crop-1-bgcolor-000000.jpg\" width=\"620\" height=\"292\" alt=\"\">\t <div class=\"carousel-caption\">\n\t\t<div class=\"carousel-caption-details\">\n\t\t\t<div class=\"pull-left\">\n\t\t\t\t\t\t\t\t\t<span class=\"type-article type-test\">Test</span>\t\t\t\t<span class=\"date date-carousel\">13.05</span>\n\t\t\t</div>\n\t\t\t<div class=\"pull-right\">\n\t\t\t\t<ul class=\"article-social-liste\">\n\t\t\t\t\t<li class=\"liste-facebook\"><a href=\"javascript:void(0);\" onclick=\"window.open('http://www.facebook.com/sharer.php?u=https%3A%2F%2Fxbox-mag.net%2Fjeux%2Fprecinct%2Ftest%2Fxbox-series-x%2F&amp;t=Test+de+The+Precinct+sur+Xbox+Series+X%2C+prot%C3%A9ger+et+servir%2C+mais+rien+de+plus','buzzfacebook','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Facebook\"></a></li>\n\t\t\t\t\t<li class=\"liste-twitter\"><a href=\"#\" onclick=\"window.open('https://twitter.com/share?url=https%3A%2F%2Fxbox-mag.net%2Fjeux%2Fprecinct%2Ftest%2Fxbox-series-x%2F&amp;text=Test+de+The+Precinct+sur+Xbox+Series+X%2C+prot%C3%A9ger+et+servir%2C+mais+rien+de+plus','buzztwitter','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Twitter\"></a></li>\n\t\t\t\t\t<li class=\"liste-comment\"><a href=\"https://xbox-mag.net/jeux/precinct/test/xbox-series-x/#commentaires\" title=\"Commenter l'article\" class=\"nb-comment\"><span></span>0</a></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div><!-- .carousel-caption-details -->\n\t\t<div class=\"carousel-caption-titles\">\n\t\t\t<h4><a href=\"https://xbox-mag.net/jeux/precinct/test/xbox-series-x/\">Test de The Precinct sur Xbox Series X, protéger et servir, mais rien de plus</a></h4>\n\t\t\t<p>The Precinct nous met dans la peau d’un bleu, autrement dit un jeune policier...</p>\n\t\t</div><!-- .carousel-caption-titles -->\n\t</div>\n</div><!-- .item --><div class=\"item \">\n\t<img src=\"/content/thumbnails/uploads/2024/12/elder-scrolls-oblivion-npc-and-oblivion-logo-in-front-of-elder-scrolls-6-background-1-tt-width-620-height-292-fill-1-crop-1-bgcolor-000000.jpg\" width=\"620\" height=\"292\" alt=\"\">\t <div class=\"carousel-caption\">\n\t\t<div class=\"carousel-caption-details\">\n\t\t\t<div class=\"pull-left\">\n\t\t\t\t\t\t\t\t\t<span class=\"type-article type-pc-game-pass\">PC Game Pass</span>\t\t\t\t<span class=\"date date-carousel\">02.05</span>\n\t\t\t</div>\n\t\t\t<div class=\"pull-right\">\n\t\t\t\t<ul class=\"article-social-liste\">\n\t\t\t\t\t<li class=\"liste-facebook\"><a href=\"javascript:void(0);\" onclick=\"window.open('http://www.facebook.com/sharer.php?u=https%3A%2F%2Fxbox-mag.net%2Fjeux%2Felder-scrolls-iv-oblivion-remake%2Ftest%2Fxbox-series-x%2F&amp;t=Test+de+The+Elder+Scrolls+IV%3A+Oblivion+Remastered%2C+un+retour+r%C3%A9ussi+pour+un+classique+du+genre','buzzfacebook','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Facebook\"></a></li>\n\t\t\t\t\t<li class=\"liste-twitter\"><a href=\"#\" onclick=\"window.open('https://twitter.com/share?url=https%3A%2F%2Fxbox-mag.net%2Fjeux%2Felder-scrolls-iv-oblivion-remake%2Ftest%2Fxbox-series-x%2F&amp;text=Test+de+The+Elder+Scrolls+IV%3A+Oblivion+Remastered%2C+un+retour+r%C3%A9ussi+pour+un+classique+du+genre','buzztwitter','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Twitter\"></a></li>\n\t\t\t\t\t<li class=\"liste-comment\"><a href=\"https://xbox-mag.net/jeux/elder-scrolls-iv-oblivion-remake/test/xbox-series-x/#commentaires\" title=\"Commenter l'article\" class=\"nb-comment\"><span></span>0</a></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div><!-- .carousel-caption-details -->\n\t\t<div class=\"carousel-caption-titles\">\n\t\t\t<h4><a href=\"https://xbox-mag.net/jeux/elder-scrolls-iv-oblivion-remake/test/xbox-series-x/\">Test de The Elder Scrolls IV: Oblivion Remastered, un retour réussi pour un classique du genre</a></h4>\n\t\t\t<p>The Elder Scrolls IV: Oblivion est un titre de Bethesda, ce qui signifie qu’il coche...</p>\n\t\t</div><!-- .carousel-caption-titles -->\n\t</div>\n</div><!-- .item --><div class=\"item \">\n\t<img src=\"/content/thumbnails/uploads/2024/07/xbox-game-pass-focus-tt-width-620-height-292-fill-1-crop-1-bgcolor-000000.jpg\" width=\"620\" height=\"292\" alt=\"\">\t <div class=\"carousel-caption\">\n\t\t<div class=\"carousel-caption-details\">\n\t\t\t<div class=\"pull-left\">\n\t\t\t\t\t\t\t\t\t<span class=\"type-article type-news\">News</span>\t\t\t\t<span class=\"date date-carousel\">28.02</span>\n\t\t\t</div>\n\t\t\t<div class=\"pull-right\">\n\t\t\t\t<ul class=\"article-social-liste\">\n\t\t\t\t\t<li class=\"liste-facebook\"><a href=\"javascript:void(0);\" onclick=\"window.open('http://www.facebook.com/sharer.php?u=https%3A%2F%2Fxbox-mag.net%2F2025%2F02%2F28%2Fxbox-game-pass-bon-plan-3-mois-dultimate-moins-cher-de-20-euros%2F&amp;t=BON+PLAN+XBOX+GAME+PASS+%3A+Payez+20%E2%82%AC+moins+cher+vos+3+mois+d%26rsquo%3Babonnement+Ultimate','buzzfacebook','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Facebook\"></a></li>\n\t\t\t\t\t<li class=\"liste-twitter\"><a href=\"#\" onclick=\"window.open('https://twitter.com/share?url=https%3A%2F%2Fxbox-mag.net%2F2025%2F02%2F28%2Fxbox-game-pass-bon-plan-3-mois-dultimate-moins-cher-de-20-euros%2F&amp;text=BON+PLAN+XBOX+GAME+PASS+%3A+Payez+20%E2%82%AC+moins+cher+vos+3+mois+d%26rsquo%3Babonnement+Ultimate','buzztwitter','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Twitter\"></a></li>\n\t\t\t\t\t<li class=\"liste-comment\"><a href=\"https://xbox-mag.net/2025/02/28/xbox-game-pass-bon-plan-3-mois-dultimate-moins-cher-de-20-euros/#commentaires\" title=\"Commenter l'article\" class=\"nb-comment\"><span></span>0</a></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div><!-- .carousel-caption-details -->\n\t\t<div class=\"carousel-caption-titles\">\n\t\t\t<h4><a href=\"https://xbox-mag.net/2025/02/28/xbox-game-pass-bon-plan-3-mois-dultimate-moins-cher-de-20-euros/\">BON PLAN XBOX GAME PASS : Payez 20€ moins cher vos 3 mois d’abonnement Ultimate</a></h4>\n\t\t\t<p>Avec l’augmentation des cartes prépayées qui se prépare, il devient de plus...</p>\n\t\t</div><!-- .carousel-caption-titles -->\n\t</div>\n</div><!-- .item --><div class=\"item \">\n\t<img src=\"/content/thumbnails/uploads/2019/08/recrutement-tt-width-620-height-292-fill-1-crop-1-bgcolor-000000.jpg\" width=\"620\" height=\"292\" alt=\"\">\t <div class=\"carousel-caption\">\n\t\t<div class=\"carousel-caption-details\">\n\t\t\t<div class=\"pull-left\">\n\t\t\t\t\t\t\t\t\t<span class=\"type-article type-news\">News</span>\t\t\t\t<span class=\"date date-carousel\">14.01</span>\n\t\t\t</div>\n\t\t\t<div class=\"pull-right\">\n\t\t\t\t<ul class=\"article-social-liste\">\n\t\t\t\t\t<li class=\"liste-facebook\"><a href=\"javascript:void(0);\" onclick=\"window.open('http://www.facebook.com/sharer.php?u=https%3A%2F%2Fxbox-mag.net%2F2023%2F01%2F14%2Flequipe-benevole-de-xbox-mag-recrute-des-joueurs-motives-rejoignez-nous%2F&amp;t=L%E2%80%99%C3%A9quipe+b%C3%A9n%C3%A9vole+de+Xbox-Mag+recrute+des+joueurs+motiv%C3%A9s%2C+rejoignez-nous+%21','buzzfacebook','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Facebook\"></a></li>\n\t\t\t\t\t<li class=\"liste-twitter\"><a href=\"#\" onclick=\"window.open('https://twitter.com/share?url=https%3A%2F%2Fxbox-mag.net%2F2023%2F01%2F14%2Flequipe-benevole-de-xbox-mag-recrute-des-joueurs-motives-rejoignez-nous%2F&amp;text=L%E2%80%99%C3%A9quipe+b%C3%A9n%C3%A9vole+de+Xbox-Mag+recrute+des+joueurs+motiv%C3%A9s%2C+rejoignez-nous+%21','buzztwitter','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Twitter\"></a></li>\n\t\t\t\t\t<li class=\"liste-comment\"><a href=\"https://xbox-mag.net/2023/01/14/lequipe-benevole-de-xbox-mag-recrute-des-joueurs-motives-rejoignez-nous/#commentaires\" title=\"Commenter l'article\" class=\"nb-comment\"><span></span>0</a></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div><!-- .carousel-caption-details -->\n\t\t<div class=\"carousel-caption-titles\">\n\t\t\t<h4><a href=\"https://xbox-mag.net/2023/01/14/lequipe-benevole-de-xbox-mag-recrute-des-joueurs-motives-rejoignez-nous/\">L’équipe bénévole de Xbox-Mag recrute des joueurs motivés, rejoignez-nous !</a></h4>\n\t\t\t<p>Devenir rédacteur pour Xbox-Mag c’est l’assurance de pouvoir s’exprimer...</p>\n\t\t</div><!-- .carousel-caption-titles -->\n\t</div>\n</div><!-- .item --><div class=\"item \">\n\t<img src=\"/content/thumbnails/uploads/2019/05/focus-discord-xm-tt-width-620-height-292-fill-1-crop-1-bgcolor-000000.png\" width=\"620\" height=\"292\" alt=\"\">\t <div class=\"carousel-caption\">\n\t\t<div class=\"carousel-caption-details\">\n\t\t\t<div class=\"pull-left\">\n\t\t\t\t\t\t\t\t\t<span class=\"type-article type-news\">News</span>\t\t\t\t<span class=\"date date-carousel\">03.05</span>\n\t\t\t</div>\n\t\t\t<div class=\"pull-right\">\n\t\t\t\t<ul class=\"article-social-liste\">\n\t\t\t\t\t<li class=\"liste-facebook\"><a href=\"javascript:void(0);\" onclick=\"window.open('http://www.facebook.com/sharer.php?u=https%3A%2F%2Fxbox-mag.net%2F2020%2F05%2F03%2Frejoignez-xbox-mag-sur-discord-pour-discuter-xbox-series-x-game-pass-et-plus-encore%2F&amp;t=Rejoignez+Xbox-Mag+sur+Discord+pour+discuter+Xbox+Series+X%2C+Game+Pass+et+plus+encore','buzzfacebook','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Facebook\"></a></li>\n\t\t\t\t\t<li class=\"liste-twitter\"><a href=\"#\" onclick=\"window.open('https://twitter.com/share?url=https%3A%2F%2Fxbox-mag.net%2F2020%2F05%2F03%2Frejoignez-xbox-mag-sur-discord-pour-discuter-xbox-series-x-game-pass-et-plus-encore%2F&amp;text=Rejoignez+Xbox-Mag+sur+Discord+pour+discuter+Xbox+Series+X%2C+Game+Pass+et+plus+encore','buzztwitter','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Twitter\"></a></li>\n\t\t\t\t\t<li class=\"liste-comment\"><a href=\"https://xbox-mag.net/2020/05/03/rejoignez-xbox-mag-sur-discord-pour-discuter-xbox-series-x-game-pass-et-plus-encore/#commentaires\" title=\"Commenter l'article\" class=\"nb-comment\"><span></span>0</a></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div><!-- .carousel-caption-details -->\n\t\t<div class=\"carousel-caption-titles\">\n\t\t\t<h4><a href=\"https://xbox-mag.net/2020/05/03/rejoignez-xbox-mag-sur-discord-pour-discuter-xbox-series-x-game-pass-et-plus-encore/\">Rejoignez Xbox-Mag sur Discord pour discuter Xbox Series X, Game Pass et plus encore</a></h4>\n\t\t\t<p>Alors que se profile un gros événement jeudi avec la présentation de jeux Xbox Series...</p>\n\t\t</div><!-- .carousel-caption-titles -->\n\t</div>\n</div><!-- .item -->\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<a class=\"left carousel-control\" href=\"#maincarousel\" data-slide=\"prev\">‹</a>\n\t\t\t\t\t\t\t\t<a class=\"right carousel-control\" href=\"#maincarousel\" data-slide=\"next\">›</a>\n\t\t\t\t\t\t\t</div><!-- .carousel #maincarousel -->\n\n\t\t\t\t\t\t</div><!-- .span8 -->\n\n\t\t\t\t\t\t<div class=\"span4\">\n\t\t\t\t\t\t\t<div class=\"box\" id=\"news-home\">\n\t\t\t\t\t\t\t\t<div class=\"box-header\">\n\t\t\t\t\t\t\t\t\t<div class=\"pull-left\">\n\t\t\t\t\t\t\t\t\t\t<h2>En bref</h2>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"pull-right\">\n\t\t\t\t\t\t\t\t\t\t<a href=\"/feed/\" title=\"Toutes les news en temps réel\" class=\"action-rss\"></a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div><!-- .box-header -->\n\t\t\t\t\t\t\t\t<div class=\"box-content\">\n\t\t\t\t\t\t\t\t\t<div id=\"highlightedcarousel\" class=\"carousel-bref slide vertical\" data-ride=\"carousel\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"carousel-inner\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"item active\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ul class=\"news-liste\"> \n\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"https://xbox-mag.net/2025/05/19/le-studio-eden-games-tout-proche-dannoncer-garfield-kart-2/\" title=\"Le studio Eden Games tout proche d’annoncer Garfield Kart 2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"news-date\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t19/05\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>Le studio Eden Games tout proche d’annoncer Garfield Kart 2\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"https://xbox-mag.net/2025/05/16/pirates-fortune-le-dlc2-de-star-wars-outlaws-est-disponible/\" title=\"A Pirate’s Fortune, le DLC2 de Star Wars Outlaws est disponible\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"news-date\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t16/05\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>A Pirate’s Fortune, le DLC2 de Star Wars Outlaws est disponible\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"https://xbox-mag.net/2025/04/15/wings-endless-laction-rpg-en-2d-nous-livre-sa-date-de-sortie-en-video/\" title=\"Wings of Endless, l’action RPG en 2D, nous livre sa date de sortie en vidéo\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"news-date\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t15/04\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>Wings of Endless, l’action RPG en 2D, nous livre sa date de sortie en vidéo\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"https://xbox-mag.net/2025/03/18/overwartch-2-levenement-sserafim-debute-aujourdhui-et-nous-presente-ses-skins-en-videos/\" title=\"Overwartch 2 : L’évènement SSERAFIM débute aujourd’hui et nous présente ses skins en vidéos\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"news-date\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t18/03\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>Overwartch 2 : L’évènement SSERAFIM débute aujourd’hui et nous présente ses skins en vidéos\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"https://xbox-mag.net/2025/03/12/un-dlc-offert-pour-atelier-yumia-lalchimiste-des-souvenirs-et-la-terre-revee/\" title=\"Un DLC offert pour Atelier Yumia : L’Alchimiste des Souvenirs et la Terre Rêvée\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"news-date\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t12/03\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>Un DLC offert pour Atelier Yumia : L’Alchimiste des Souvenirs et la Terre Rêvée\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"https://xbox-mag.net/2025/03/10/la-collaboration-sserafim-doverwatch-2-sapprete-revenir-sur-le-devant-de-la-scene-en-mars/\" title=\"La collaboration SSERAFIM d’Overwatch 2 s’apprête à revenir sur le devant de la scène en mars\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"news-date\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t10/03\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>La collaboration SSERAFIM d’Overwatch 2 s’apprête à revenir sur le devant de la scène en mars\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"https://xbox-mag.net/2025/02/22/dragon-ball-breakers-devoile-sa-saison-8-avec-golden-freezer/\" title=\"Dragon Ball: The Breakers dévoile sa Saison 8 avec Golden Freezer\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"news-date\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t22/02\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>Dragon Ball: The Breakers dévoile sa Saison 8 avec Golden Freezer\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"https://xbox-mag.net/2025/02/12/le-dlc-wallace-et-gromit-special-pack-destination-de-powerwash-simulator-date-en-video/\" title=\"Le DLC «&nbsp;Wallace et Gromit Spécial Pack&nbsp;» à destination de PowerWash Simulator daté en vidéo\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"news-date\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t12/02\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>Le DLC «&nbsp;Wallace et Gromit Spécial Pack&nbsp;» à destination de PowerWash Simulator daté en vidéo\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"https://xbox-mag.net/2025/02/04/farming-simulator-25-une-roadmap-pour-ce-premier-semestre/\" title=\"Farming Simulator 25 : une roadmap pour ce premier semestre\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"news-date\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t04/02\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>Farming Simulator 25 : une roadmap pour ce premier semestre\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"https://xbox-mag.net/2025/02/03/la-saison-1-de-synduality-echo-ada-debute-cette-semaine/\" title=\"La saison 1 de Synduality: Echo of Ada débute cette semaine\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"news-date\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t03/02\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>La saison 1 de Synduality: Echo of Ada débute cette semaine\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul> <!-- .news-liste -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div> <!-- .item --> \t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"item\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ul class=\"news-liste\"> \n\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"https://xbox-mag.net/2025/02/03/roadcraft-presente-ses-bulldozers-en-video/\" title=\"Roadcraft présente ses bulldozers en vidéo\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"news-date\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t03/02\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>Roadcraft présente ses bulldozers en vidéo\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"https://xbox-mag.net/2024/12/31/la-meilleure-version-du-trailer-de-gta-6-decouverte-sur-une-plateforme-chinoise/\" title=\"La meilleure version du trailer de GTA 6 découverte sur une plateforme chinoise\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"news-date\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t31/12\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>La meilleure version du trailer de GTA 6 découverte sur une plateforme chinoise\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"https://xbox-mag.net/2024/12/28/de-bonnes-fetes-de-fin-dannee-aux-couleurs-deverwild-pour-rare/\" title=\"Rare nous souhaite de bonnes fêtes de fin d’année aux couleurs d’Everwild\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"news-date\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t28/12\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>Rare nous souhaite de bonnes fêtes de fin d’année aux couleurs d’Everwild\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"https://xbox-mag.net/2024/11/24/flight-simulator-2024-met-la-xbox-et-le-pc-sur-le-meme-plan/\" title=\"Flight Simulator 2024 met la Xbox et le PC sur le même plan !\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"news-date\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t24/11\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>Flight Simulator 2024 met la Xbox et le PC sur le même plan !\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"https://xbox-mag.net/2024/11/22/final-fantasy-xiv-le-patch-71-lance-en-video/\" title=\"Final Fantasy XIV : le patch 7.1. lancé en vidéo\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"news-date\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t22/11\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>Final Fantasy XIV : le patch 7.1. lancé en vidéo\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"https://xbox-mag.net/2024/11/19/farming-simulator-25-explose-les-compteurs-et-bat-un-record/\" title=\"Farming Simulator 25 explose les compteurs et bat un record\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"news-date\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t19/11\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>Farming Simulator 25 explose les compteurs et bat un record\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"https://xbox-mag.net/2024/11/07/disney-speedstorm-raiponce-rejoindra-le-roster-prochainement/\" title=\"Disney Speedstorm : Raiponce rejoindra le roster prochainement\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"news-date\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t07/11\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>Disney Speedstorm : Raiponce rejoindra le roster prochainement\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"https://xbox-mag.net/2024/10/31/farming-simulator-25-devoile-la-map-splendide-de-hutan-pantai/\" title=\"Farming Simulator 25 dévoile la map splendide de Hutan Pantai\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"news-date\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t31/10\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>Farming Simulator 25 dévoile la map splendide de Hutan Pantai\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"https://xbox-mag.net/2024/10/30/call-duty-black-ops-6-la-saison-1-est-datee-et-il-ne-faudra-pas-patienter-bien-longtemps/\" title=\"Call of Duty: Black Ops 6 : La saison 1 est datée et il ne faudra pas patienter bien longtemps\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"news-date\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t30/10\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>Call of Duty: Black Ops 6 : La saison 1 est datée et il ne faudra pas patienter bien longtemps\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"https://xbox-mag.net/2024/10/25/beneath-le-fps-horrifique-sillustre-une-nouvelle-fois-en-video/\" title=\"Beneath, le FPS horrifique, s’illustre une nouvelle fois en vidéo\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"news-date\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t25/10\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>Beneath, le FPS horrifique, s’illustre une nouvelle fois en vidéo\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul> <!-- .news-liste -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div> <!-- .item --> \t\t\t\t\t\t\t\t\t\t\t</div><!-- .carousel-inner -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div><!-- .carousel #highlightedcarousel -->\n\t\t\t\t\t\t\t\t</div><!-- .box-content -->\n\t\t\t\t\t\t\t\t<div class=\"box-footer\">\n\t\t\t\t\t\t\t\t\t<ul class=\"news-next-prev\">\n\t\t\t\t\t\t\t\t\t\t<li><a data-slide=\"prev\" href=\"#highlightedcarousel\" title=\"News précédentes\" class=\"up\"></a></li>\n\t\t\t\t\t\t\t\t\t\t<li><a data-slide=\"next\" href=\"#highlightedcarousel\" title=\"News suivantes\" class=\"down\"></a></li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</div><!-- .box-footer -->\n\t\t\t\t\t\t\t</div><!-- .box -->\n\n\n\t\t\t\t\t\t</div><!-- .span4 -->\n\n\t\t\t\t\t</div><!-- #header-content -->\n\n\t\t\t\t</div><!-- .container -->\n\t\t\t</div><!-- .texture -->\n\t\t</div><!-- #une -->\t<div id=\"actualites\">\n\t\t<div class=\"title-home\">\n\t\t\t<div class=\"container\">\n\t\t\t\t<div class=\"pull-left\">\n\t\t\t\t\t<h1 class=\"title-main\">Actualités</h1>\n\t\t\t\t\t<a href=\"/news/\" class=\"article-more\" title=\"Toutes les actualités\">+</a>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"pull-right\">\n\t\t\t\t\t<a href=\"/news/feed/\" title=\"Toutes les news en temps réel\" class=\"action-rss\"></a>\n\t\t\t\t</div>\n\t\t\t</div><!-- .container -->\n\t\t</div><!-- .title-home -->\n\t\t<div class=\"container container-padding\">\n\t\t\t<div class=\"row-fluid\">\n\t\t\t\t<div class=\"span8\">\n\n\t\t\t\t\t<div class=\"liste-articles\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ul class=\"liste-ecart\">\n\t\t\t\t\t\t\t\t\t\n<li class=\"article shadow-light\">\n\t<figure>\n\t\t<!-- type-test type-preview type-dossier -->\n\t\t<span class=\"type-article type-test\">Test</span>\n\t\t<a href=\"https://xbox-mag.net/jeux/onimusha-2-samurais-destiny/test/xbox-one/\" title=\"Test d’Onimusha 2: Samurai’s Destiny, une histoire de vieilles marmites et de bonne soupe\">\n\t\t\t<img src=\"/content/thumbnails/uploads/2025/02/onimusha-2-samurai-destiny-ps4-remaster-revealed-e1738716694792-tt-width-300-height-141-fill-1-crop-1-bgcolor-000000.jpg\" width=\"300\" height=\"141\" alt=\"\">\t\t</a>\n\t</figure>\n\t<div class=\"liste-articles-infos\">\n\t\t<div class=\"liste-articles-infos-content\">\n\t\t\t<header>\n\t\t\t\t<div class=\"pull-left\"><span class=\"date\">21.05</span></div>\n\t\t\t\t<div class=\"pull-right\">\n\t\t\t\t\t<ul class=\"article-social-liste\">\n\t\t\t\t\t\t<li class=\"liste-facebook\"><a href=\"javascript:void(0);\" onclick=\"window.open('http://www.facebook.com/sharer.php?u=https%3A%2F%2Fxbox-mag.net%2Fjeux%2Fonimusha-2-samurais-destiny%2Ftest%2Fxbox-one%2F&amp;t=Test+d%E2%80%99Onimusha+2%3A+Samurai%E2%80%99s+Destiny%2C+une+histoire+de+vieilles+marmites+et+de+bonne+soupe','buzzfacebook','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Facebook\"></a></li>\n\t\t\t\t\t\t<li class=\"liste-twitter\"><a href=\"#\" onclick=\"window.open('https://twitter.com/share?url=https%3A%2F%2Fxbox-mag.net%2Fjeux%2Fonimusha-2-samurais-destiny%2Ftest%2Fxbox-one%2F&amp;text=Test+d%E2%80%99Onimusha+2%3A+Samurai%E2%80%99s+Destiny%2C+une+histoire+de+vieilles+marmites+et+de+bonne+soupe','buzztwitter','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Twitter\"></a></li>\n\t\t\t\t\t\t<li class=\"liste-comment\"><a href=\"https://xbox-mag.net/jeux/onimusha-2-samurais-destiny/test/xbox-one/#commentaires\" title=\"Commenter l'article\" class=\"nb-comment\"><span></span>commentaires</a></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</header>\n\t\t\t<a href=\"https://xbox-mag.net/jeux/onimusha-2-samurais-destiny/test/xbox-one/\" title=\"Test d’Onimusha 2: Samurai’s Destiny, une histoire de vieilles marmites et de bonne soupe\">\n\t\t\t\t<p class=\"article-titre\">Test d’Onimusha 2: Samurai’s Destiny, une histoire de vieilles marmites et de bonne soupe</p>\n\t\t\t\t<p class=\"article-accroche\">Nous sommes en 2002. La Playstation 2 est en pleine bourre et accueille de nouveaux titres de qualité […]</p>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n</li><!-- .article -->\n<li class=\"article shadow-light\">\n\t<figure>\n\t\t<!-- type-test type-preview type-dossier -->\n\t\t<span class=\"type-article type-news\">News</span>\n\t\t<a href=\"https://xbox-mag.net/2025/05/20/xbox-game-pass-deux-jeux-viennent-de-rejoindre-le-service/\" title=\"Xbox Game Pass : Deux jeux viennent de rejoindre le service\">\n\t\t\t<img src=\"/content/thumbnails/uploads/2021/09/xbox-game-pass-tt-width-300-height-141-fill-1-crop-1-bgcolor-000000.jpg\" width=\"300\" height=\"141\" alt=\"\">\t\t</a>\n\t</figure>\n\t<div class=\"liste-articles-infos\">\n\t\t<div class=\"liste-articles-infos-content\">\n\t\t\t<header>\n\t\t\t\t<div class=\"pull-left\"><span class=\"date\">20.05</span></div>\n\t\t\t\t<div class=\"pull-right\">\n\t\t\t\t\t<ul class=\"article-social-liste\">\n\t\t\t\t\t\t<li class=\"liste-facebook\"><a href=\"javascript:void(0);\" onclick=\"window.open('http://www.facebook.com/sharer.php?u=https%3A%2F%2Fxbox-mag.net%2F2025%2F05%2F20%2Fxbox-game-pass-deux-jeux-viennent-de-rejoindre-le-service%2F&amp;t=Xbox+Game+Pass+%3A+Deux+jeux+viennent+de+rejoindre+le+service','buzzfacebook','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Facebook\"></a></li>\n\t\t\t\t\t\t<li class=\"liste-twitter\"><a href=\"#\" onclick=\"window.open('https://twitter.com/share?url=https%3A%2F%2Fxbox-mag.net%2F2025%2F05%2F20%2Fxbox-game-pass-deux-jeux-viennent-de-rejoindre-le-service%2F&amp;text=Xbox+Game+Pass+%3A+Deux+jeux+viennent+de+rejoindre+le+service','buzztwitter','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Twitter\"></a></li>\n\t\t\t\t\t\t<li class=\"liste-comment\"><a href=\"https://xbox-mag.net/2025/05/20/xbox-game-pass-deux-jeux-viennent-de-rejoindre-le-service/#commentaires\" title=\"Commenter l'article\" class=\"nb-comment\"><span></span>commentaires</a></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</header>\n\t\t\t<a href=\"https://xbox-mag.net/2025/05/20/xbox-game-pass-deux-jeux-viennent-de-rejoindre-le-service/\" title=\"Xbox Game Pass : Deux jeux viennent de rejoindre le service\">\n\t\t\t\t<p class=\"article-titre\">Xbox Game Pass : Deux jeux viennent de rejoindre le service</p>\n\t\t\t\t<p class=\"article-accroche\">Pompier ou policier ?</p>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n</li><!-- .article -->\n<li class=\"article shadow-light\">\n\t<figure>\n\t\t<!-- type-test type-preview type-dossier -->\n\t\t<span class=\"type-article type-news\">News</span>\n\t\t<a href=\"https://xbox-mag.net/2025/05/20/levenement-street-fighter-6-doverwatch-2-commence-aujourdhui/\" title=\"L’évènement Street Fighter 6 d’Overwatch 2 commence aujourd’hui !\">\n\t\t\t<img src=\"/content/thumbnails/uploads/2019/10/overwatch-2-tt-width-300-height-141-fill-1-crop-1-bgcolor-000000.jpeg\" width=\"300\" height=\"141\" alt=\"\">\t\t</a>\n\t</figure>\n\t<div class=\"liste-articles-infos\">\n\t\t<div class=\"liste-articles-infos-content\">\n\t\t\t<header>\n\t\t\t\t<div class=\"pull-left\"><span class=\"date\">20.05</span></div>\n\t\t\t\t<div class=\"pull-right\">\n\t\t\t\t\t<ul class=\"article-social-liste\">\n\t\t\t\t\t\t<li class=\"liste-facebook\"><a href=\"javascript:void(0);\" onclick=\"window.open('http://www.facebook.com/sharer.php?u=https%3A%2F%2Fxbox-mag.net%2F2025%2F05%2F20%2Flevenement-street-fighter-6-doverwatch-2-commence-aujourdhui%2F&amp;t=L%26rsquo%3B%C3%A9v%C3%A8nement+Street+Fighter+6+d%26rsquo%3BOverwatch+2+commence+aujourd%26rsquo%3Bhui+%21','buzzfacebook','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Facebook\"></a></li>\n\t\t\t\t\t\t<li class=\"liste-twitter\"><a href=\"#\" onclick=\"window.open('https://twitter.com/share?url=https%3A%2F%2Fxbox-mag.net%2F2025%2F05%2F20%2Flevenement-street-fighter-6-doverwatch-2-commence-aujourdhui%2F&amp;text=L%26rsquo%3B%C3%A9v%C3%A8nement+Street+Fighter+6+d%26rsquo%3BOverwatch+2+commence+aujourd%26rsquo%3Bhui+%21','buzztwitter','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Twitter\"></a></li>\n\t\t\t\t\t\t<li class=\"liste-comment\"><a href=\"https://xbox-mag.net/2025/05/20/levenement-street-fighter-6-doverwatch-2-commence-aujourdhui/#commentaires\" title=\"Commenter l'article\" class=\"nb-comment\"><span></span>commentaires</a></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</header>\n\t\t\t<a href=\"https://xbox-mag.net/2025/05/20/levenement-street-fighter-6-doverwatch-2-commence-aujourdhui/\" title=\"L’évènement Street Fighter 6 d’Overwatch 2 commence aujourd’hui !\">\n\t\t\t\t<p class=\"article-titre\">L’évènement Street Fighter 6 d’Overwatch 2 commence aujourd’hui !</p>\n\t\t\t\t<p class=\"article-accroche\">Ready to fight ?</p>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n</li><!-- .article -->\n<li class=\"article shadow-light\">\n\t<figure>\n\t\t<!-- type-test type-preview type-dossier -->\n\t\t<span class=\"type-article type-news\">News</span>\n\t\t<a href=\"https://xbox-mag.net/2025/05/20/deals-gold-et-promos-du-store-xbox-les-petits-prix-de-la-semaine-5/\" title=\"Deals with Gold et Promos du Store Xbox : les petits prix de la semaine\">\n\t\t\t<img src=\"/content/thumbnails/uploads/2014/06/a1031cba-35a8-4bd2-8c20-d49a10926b0e-tt-width-300-height-141-fill-1-crop-1-bgcolor-000000.jpg\" width=\"300\" height=\"141\" alt=\"\">\t\t</a>\n\t</figure>\n\t<div class=\"liste-articles-infos\">\n\t\t<div class=\"liste-articles-infos-content\">\n\t\t\t<header>\n\t\t\t\t<div class=\"pull-left\"><span class=\"date\">20.05</span></div>\n\t\t\t\t<div class=\"pull-right\">\n\t\t\t\t\t<ul class=\"article-social-liste\">\n\t\t\t\t\t\t<li class=\"liste-facebook\"><a href=\"javascript:void(0);\" onclick=\"window.open('http://www.facebook.com/sharer.php?u=https%3A%2F%2Fxbox-mag.net%2F2025%2F05%2F20%2Fdeals-gold-et-promos-du-store-xbox-les-petits-prix-de-la-semaine-5%2F&amp;t=Deals+with+Gold+et+Promos+du+Store+Xbox+%3A+les+petits+prix+de+la+semaine','buzzfacebook','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Facebook\"></a></li>\n\t\t\t\t\t\t<li class=\"liste-twitter\"><a href=\"#\" onclick=\"window.open('https://twitter.com/share?url=https%3A%2F%2Fxbox-mag.net%2F2025%2F05%2F20%2Fdeals-gold-et-promos-du-store-xbox-les-petits-prix-de-la-semaine-5%2F&amp;text=Deals+with+Gold+et+Promos+du+Store+Xbox+%3A+les+petits+prix+de+la+semaine','buzztwitter','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Twitter\"></a></li>\n\t\t\t\t\t\t<li class=\"liste-comment\"><a href=\"https://xbox-mag.net/2025/05/20/deals-gold-et-promos-du-store-xbox-les-petits-prix-de-la-semaine-5/#commentaires\" title=\"Commenter l'article\" class=\"nb-comment\"><span></span>commentaires</a></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</header>\n\t\t\t<a href=\"https://xbox-mag.net/2025/05/20/deals-gold-et-promos-du-store-xbox-les-petits-prix-de-la-semaine-5/\" title=\"Deals with Gold et Promos du Store Xbox : les petits prix de la semaine\">\n\t\t\t\t<p class=\"article-titre\">Deals with Gold et Promos du Store Xbox : les petits prix de la semaine</p>\n\t\t\t\t<p class=\"article-accroche\">Les offres disponibles du 20 au 27 mai 2025</p>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n</li><!-- .article -->\n<li class=\"article shadow-light\">\n\t<figure>\n\t\t<!-- type-test type-preview type-dossier -->\n\t\t<span class=\"type-article type-news\">News</span>\n\t\t<a href=\"https://xbox-mag.net/2025/05/19/chrono-odyssey-fait-monter-la-pression-au-travers-dune-courte-video/\" title=\"Chrono Odyssey fait monter la pression au travers d’une courte vidéo\">\n\t\t\t<img src=\"/content/thumbnails/uploads/2023/05/co_4407253_20230503172153-tt-width-300-height-141-fill-1-crop-1-bgcolor-000000.jpg\" width=\"300\" height=\"141\" alt=\"\">\t\t</a>\n\t</figure>\n\t<div class=\"liste-articles-infos\">\n\t\t<div class=\"liste-articles-infos-content\">\n\t\t\t<header>\n\t\t\t\t<div class=\"pull-left\"><span class=\"date\">19.05</span></div>\n\t\t\t\t<div class=\"pull-right\">\n\t\t\t\t\t<ul class=\"article-social-liste\">\n\t\t\t\t\t\t<li class=\"liste-facebook\"><a href=\"javascript:void(0);\" onclick=\"window.open('http://www.facebook.com/sharer.php?u=https%3A%2F%2Fxbox-mag.net%2F2025%2F05%2F19%2Fchrono-odyssey-fait-monter-la-pression-au-travers-dune-courte-video%2F&amp;t=Chrono+Odyssey+fait+monter+la+pression+au+travers+d%26rsquo%3Bune+courte+vid%C3%A9o','buzzfacebook','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Facebook\"></a></li>\n\t\t\t\t\t\t<li class=\"liste-twitter\"><a href=\"#\" onclick=\"window.open('https://twitter.com/share?url=https%3A%2F%2Fxbox-mag.net%2F2025%2F05%2F19%2Fchrono-odyssey-fait-monter-la-pression-au-travers-dune-courte-video%2F&amp;text=Chrono+Odyssey+fait+monter+la+pression+au+travers+d%26rsquo%3Bune+courte+vid%C3%A9o','buzztwitter','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Twitter\"></a></li>\n\t\t\t\t\t\t<li class=\"liste-comment\"><a href=\"https://xbox-mag.net/2025/05/19/chrono-odyssey-fait-monter-la-pression-au-travers-dune-courte-video/#commentaires\" title=\"Commenter l'article\" class=\"nb-comment\"><span></span>commentaires</a></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</header>\n\t\t\t<a href=\"https://xbox-mag.net/2025/05/19/chrono-odyssey-fait-monter-la-pression-au-travers-dune-courte-video/\" title=\"Chrono Odyssey fait monter la pression au travers d’une courte vidéo\">\n\t\t\t\t<p class=\"article-titre\">Chrono Odyssey fait monter la pression au travers d’une courte vidéo</p>\n\t\t\t\t<p class=\"article-accroche\">Un revenant sur le retour ?</p>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n</li><!-- .article -->\n<li class=\"article shadow-light\">\n\t<figure>\n\t\t<!-- type-test type-preview type-dossier -->\n\t\t<span class=\"type-article type-news\">News</span>\n\t\t<a href=\"https://xbox-mag.net/2025/05/19/injustice-3-en-developpement-pour-faire-oublier-la-deception-mortal-kombat-1/\" title=\"Après la déception Mortal Kombat 1, Injustice 3 serait en préparation\">\n\t\t\t<img src=\"/content/thumbnails/uploads/2018/03/injustice-2-legendary-edition-focus-tt-width-300-height-141-fill-1-crop-1-bgcolor-000000.jpg\" width=\"300\" height=\"141\" alt=\"\">\t\t</a>\n\t</figure>\n\t<div class=\"liste-articles-infos\">\n\t\t<div class=\"liste-articles-infos-content\">\n\t\t\t<header>\n\t\t\t\t<div class=\"pull-left\"><span class=\"date\">19.05</span></div>\n\t\t\t\t<div class=\"pull-right\">\n\t\t\t\t\t<ul class=\"article-social-liste\">\n\t\t\t\t\t\t<li class=\"liste-facebook\"><a href=\"javascript:void(0);\" onclick=\"window.open('http://www.facebook.com/sharer.php?u=https%3A%2F%2Fxbox-mag.net%2F2025%2F05%2F19%2Finjustice-3-en-developpement-pour-faire-oublier-la-deception-mortal-kombat-1%2F&amp;t=Apr%C3%A8s+la+d%C3%A9ception+Mortal+Kombat+1%2C+Injustice+3+serait+en+pr%C3%A9paration','buzzfacebook','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Facebook\"></a></li>\n\t\t\t\t\t\t<li class=\"liste-twitter\"><a href=\"#\" onclick=\"window.open('https://twitter.com/share?url=https%3A%2F%2Fxbox-mag.net%2F2025%2F05%2F19%2Finjustice-3-en-developpement-pour-faire-oublier-la-deception-mortal-kombat-1%2F&amp;text=Apr%C3%A8s+la+d%C3%A9ception+Mortal+Kombat+1%2C+Injustice+3+serait+en+pr%C3%A9paration','buzztwitter','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Twitter\"></a></li>\n\t\t\t\t\t\t<li class=\"liste-comment\"><a href=\"https://xbox-mag.net/2025/05/19/injustice-3-en-developpement-pour-faire-oublier-la-deception-mortal-kombat-1/#commentaires\" title=\"Commenter l'article\" class=\"nb-comment\"><span></span>commentaires</a></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</header>\n\t\t\t<a href=\"https://xbox-mag.net/2025/05/19/injustice-3-en-developpement-pour-faire-oublier-la-deception-mortal-kombat-1/\" title=\"Après la déception Mortal Kombat 1, Injustice 3 serait en préparation\">\n\t\t\t\t<p class=\"article-titre\">Après la déception Mortal Kombat 1, Injustice 3 serait en préparation</p>\n\t\t\t\t<p class=\"article-accroche\">Batman Vs Superman 3</p>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n</li><!-- .article -->\n<li class=\"article shadow-light\">\n\t<figure>\n\t\t<!-- type-test type-preview type-dossier -->\n\t\t<span class=\"type-article type-news\">News</span>\n\t\t<a href=\"https://xbox-mag.net/2025/05/19/xbox-game-pass-plusieurs-departs-prevoir-pour-la-fin-mai/\" title=\"Xbox Game Pass : Plusieurs départs à prévoir pour la fin mai\">\n\t\t\t<img src=\"/content/thumbnails/uploads/2025/04/xbox-game-pass-2025-4-tt-width-300-height-141-fill-1-crop-1-bgcolor-000000.jpg\" width=\"300\" height=\"141\" alt=\"\">\t\t</a>\n\t</figure>\n\t<div class=\"liste-articles-infos\">\n\t\t<div class=\"liste-articles-infos-content\">\n\t\t\t<header>\n\t\t\t\t<div class=\"pull-left\"><span class=\"date\">19.05</span></div>\n\t\t\t\t<div class=\"pull-right\">\n\t\t\t\t\t<ul class=\"article-social-liste\">\n\t\t\t\t\t\t<li class=\"liste-facebook\"><a href=\"javascript:void(0);\" onclick=\"window.open('http://www.facebook.com/sharer.php?u=https%3A%2F%2Fxbox-mag.net%2F2025%2F05%2F19%2Fxbox-game-pass-plusieurs-departs-prevoir-pour-la-fin-mai%2F&amp;t=Xbox+Game+Pass+%3A+Plusieurs+d%C3%A9parts+%C3%A0+pr%C3%A9voir+pour+la+fin+mai','buzzfacebook','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Facebook\"></a></li>\n\t\t\t\t\t\t<li class=\"liste-twitter\"><a href=\"#\" onclick=\"window.open('https://twitter.com/share?url=https%3A%2F%2Fxbox-mag.net%2F2025%2F05%2F19%2Fxbox-game-pass-plusieurs-departs-prevoir-pour-la-fin-mai%2F&amp;text=Xbox+Game+Pass+%3A+Plusieurs+d%C3%A9parts+%C3%A0+pr%C3%A9voir+pour+la+fin+mai','buzztwitter','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Twitter\"></a></li>\n\t\t\t\t\t\t<li class=\"liste-comment\"><a href=\"https://xbox-mag.net/2025/05/19/xbox-game-pass-plusieurs-departs-prevoir-pour-la-fin-mai/#commentaires\" title=\"Commenter l'article\" class=\"nb-comment\"><span></span>commentaires</a></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</header>\n\t\t\t<a href=\"https://xbox-mag.net/2025/05/19/xbox-game-pass-plusieurs-departs-prevoir-pour-la-fin-mai/\" title=\"Xbox Game Pass : Plusieurs départs à prévoir pour la fin mai\">\n\t\t\t\t<p class=\"article-titre\">Xbox Game Pass : Plusieurs départs à prévoir pour la fin mai</p>\n\t\t\t\t<p class=\"article-accroche\">Plus une once d'Humanity</p>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n</li><!-- .article -->\n<li class=\"article shadow-light\">\n\t<figure>\n\t\t<!-- type-test type-preview type-dossier -->\n\t\t<span class=\"type-article type-news\">News</span>\n\t\t<a href=\"https://xbox-mag.net/2025/05/19/un-remaster-du-premier-syberia-annonce-pour-cette-fin-dannee/\" title=\"Un remaster du premier Syberia annoncé pour cette fin d’année\">\n\t\t\t<img src=\"/content/thumbnails/uploads/2025/05/grp2peiwkaafrzt-tt-width-300-height-141-fill-1-crop-1-bgcolor-000000.jpeg\" width=\"300\" height=\"141\" alt=\"\">\t\t</a>\n\t</figure>\n\t<div class=\"liste-articles-infos\">\n\t\t<div class=\"liste-articles-infos-content\">\n\t\t\t<header>\n\t\t\t\t<div class=\"pull-left\"><span class=\"date\">19.05</span></div>\n\t\t\t\t<div class=\"pull-right\">\n\t\t\t\t\t<ul class=\"article-social-liste\">\n\t\t\t\t\t\t<li class=\"liste-facebook\"><a href=\"javascript:void(0);\" onclick=\"window.open('http://www.facebook.com/sharer.php?u=https%3A%2F%2Fxbox-mag.net%2F2025%2F05%2F19%2Fun-remaster-du-premier-syberia-annonce-pour-cette-fin-dannee%2F&amp;t=Un+remaster+du+premier+Syberia+annonc%C3%A9+pour+cette+fin+d%26rsquo%3Bann%C3%A9e','buzzfacebook','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Facebook\"></a></li>\n\t\t\t\t\t\t<li class=\"liste-twitter\"><a href=\"#\" onclick=\"window.open('https://twitter.com/share?url=https%3A%2F%2Fxbox-mag.net%2F2025%2F05%2F19%2Fun-remaster-du-premier-syberia-annonce-pour-cette-fin-dannee%2F&amp;text=Un+remaster+du+premier+Syberia+annonc%C3%A9+pour+cette+fin+d%26rsquo%3Bann%C3%A9e','buzztwitter','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Twitter\"></a></li>\n\t\t\t\t\t\t<li class=\"liste-comment\"><a href=\"https://xbox-mag.net/2025/05/19/un-remaster-du-premier-syberia-annonce-pour-cette-fin-dannee/#commentaires\" title=\"Commenter l'article\" class=\"nb-comment\"><span></span>commentaires</a></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</header>\n\t\t\t<a href=\"https://xbox-mag.net/2025/05/19/un-remaster-du-premier-syberia-annonce-pour-cette-fin-dannee/\" title=\"Un remaster du premier Syberia annoncé pour cette fin d’année\">\n\t\t\t\t<p class=\"article-titre\">Un remaster du premier Syberia annoncé pour cette fin d’année</p>\n\t\t\t\t<p class=\"article-accroche\">Retour aux sources pour Kate</p>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n</li><!-- .article -->\n<li class=\"article shadow-light\">\n\t<figure>\n\t\t<!-- type-test type-preview type-dossier -->\n\t\t<span class=\"type-article type-news\">News</span>\n\t\t<a href=\"https://xbox-mag.net/2025/05/17/xbox-game-pass-un-jeu-de-plus-disponible-pour-les-abonnes-ultimate/\" title=\"Xbox Game Pass : Un jeu de plus disponible pour les abonnés Ultimate\">\n\t\t\t<img src=\"/content/thumbnails/uploads/2025/03/xbox-game-pass-logo16850985411097-1024x576-tt-width-300-height-141-fill-1-crop-1-bgcolor-000000.jpg\" width=\"300\" height=\"141\" alt=\"\">\t\t</a>\n\t</figure>\n\t<div class=\"liste-articles-infos\">\n\t\t<div class=\"liste-articles-infos-content\">\n\t\t\t<header>\n\t\t\t\t<div class=\"pull-left\"><span class=\"date\">17.05</span></div>\n\t\t\t\t<div class=\"pull-right\">\n\t\t\t\t\t<ul class=\"article-social-liste\">\n\t\t\t\t\t\t<li class=\"liste-facebook\"><a href=\"javascript:void(0);\" onclick=\"window.open('http://www.facebook.com/sharer.php?u=https%3A%2F%2Fxbox-mag.net%2F2025%2F05%2F17%2Fxbox-game-pass-un-jeu-de-plus-disponible-pour-les-abonnes-ultimate%2F&amp;t=Xbox+Game+Pass+%3A+Un+jeu+de+plus+disponible+pour+les+abonn%C3%A9s+Ultimate','buzzfacebook','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Facebook\"></a></li>\n\t\t\t\t\t\t<li class=\"liste-twitter\"><a href=\"#\" onclick=\"window.open('https://twitter.com/share?url=https%3A%2F%2Fxbox-mag.net%2F2025%2F05%2F17%2Fxbox-game-pass-un-jeu-de-plus-disponible-pour-les-abonnes-ultimate%2F&amp;text=Xbox+Game+Pass+%3A+Un+jeu+de+plus+disponible+pour+les+abonn%C3%A9s+Ultimate','buzztwitter','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Twitter\"></a></li>\n\t\t\t\t\t\t<li class=\"liste-comment\"><a href=\"https://xbox-mag.net/2025/05/17/xbox-game-pass-un-jeu-de-plus-disponible-pour-les-abonnes-ultimate/#commentaires\" title=\"Commenter l'article\" class=\"nb-comment\"><span></span>commentaires</a></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</header>\n\t\t\t<a href=\"https://xbox-mag.net/2025/05/17/xbox-game-pass-un-jeu-de-plus-disponible-pour-les-abonnes-ultimate/\" title=\"Xbox Game Pass : Un jeu de plus disponible pour les abonnés Ultimate\">\n\t\t\t\t<p class=\"article-titre\">Xbox Game Pass : Un jeu de plus disponible pour les abonnés Ultimate</p>\n\t\t\t\t<p class=\"article-accroche\">Vers l'au-delà</p>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n</li><!-- .article -->\n<li class=\"article shadow-light\">\n\t<figure>\n\t\t<!-- type-test type-preview type-dossier -->\n\t\t<span class=\"type-article type-news\">News</span>\n\t\t<a href=\"https://xbox-mag.net/2025/05/16/un-peu-de-gunfights-et-de-conduite-pour-mindseye/\" title=\"Un peu de gunfight et de courses-poursuites pour Mindseye\">\n\t\t\t<img src=\"/content/thumbnails/uploads/2025/02/votre-texte-de-paragraphe-tt-width-300-height-141-fill-1-crop-1-bgcolor-000000.jpg\" width=\"300\" height=\"141\" alt=\"\">\t\t</a>\n\t</figure>\n\t<div class=\"liste-articles-infos\">\n\t\t<div class=\"liste-articles-infos-content\">\n\t\t\t<header>\n\t\t\t\t<div class=\"pull-left\"><span class=\"date\">16.05</span></div>\n\t\t\t\t<div class=\"pull-right\">\n\t\t\t\t\t<ul class=\"article-social-liste\">\n\t\t\t\t\t\t<li class=\"liste-facebook\"><a href=\"javascript:void(0);\" onclick=\"window.open('http://www.facebook.com/sharer.php?u=https%3A%2F%2Fxbox-mag.net%2F2025%2F05%2F16%2Fun-peu-de-gunfights-et-de-conduite-pour-mindseye%2F&amp;t=Un+peu+de+gunfight+et+de+courses-poursuites+pour+Mindseye','buzzfacebook','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Facebook\"></a></li>\n\t\t\t\t\t\t<li class=\"liste-twitter\"><a href=\"#\" onclick=\"window.open('https://twitter.com/share?url=https%3A%2F%2Fxbox-mag.net%2F2025%2F05%2F16%2Fun-peu-de-gunfights-et-de-conduite-pour-mindseye%2F&amp;text=Un+peu+de+gunfight+et+de+courses-poursuites+pour+Mindseye','buzztwitter','status=1,width=580,height=400,top='+($(window).height() - 400) / 2+',left='+($(window).width() - 580) / 2+',scrollbars=no');return false;\" title=\"Publier sur Twitter\"></a></li>\n\t\t\t\t\t\t<li class=\"liste-comment\"><a href=\"https://xbox-mag.net/2025/05/16/un-peu-de-gunfights-et-de-conduite-pour-mindseye/#commentaires\" title=\"Commenter l'article\" class=\"nb-comment\"><span></span>commentaires</a></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</header>\n\t\t\t<a href=\"https://xbox-mag.net/2025/05/16/un-peu-de-gunfights-et-de-conduite-pour-mindseye/\" title=\"Un peu de gunfight et de courses-poursuites pour Mindseye\">\n\t\t\t\t<p class=\"article-titre\">Un peu de gunfight et de courses-poursuites pour Mindseye</p>\n\t\t\t\t<p class=\"article-accroche\">Buenos Diaz</p>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n</li><!-- .article -->\n<li class=\"article shadow-light\">\n\t<a href=\"/highlights/page/2/\" class=\"more\"></a>\n</li>\n\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div><!-- .liste-articles -->\n\t\t\t\t</div><!-- .span8 -->\n\n\t\t\t\t<div class=\"span4\">\n\n    <div class=\"box pub-pave\">\n\t<!-- Sidebar - 300x250/300x600 - 1 -->\n\t<div id=\"cgSidebarATF1\"></div> \n</div><!-- .pub-pave -->\n    \n    <div class=\"box boxStyle1\" id=\"planning\">\n        <div class=\"box-header\">\n            <div class=\"pull-left\">\n                <h2>Planning</h2>\n\n            </div>\n            <div class=\"pull-right\">\n                <a href=\"/planning-des-sorties/xbox-one/\" class=\"article-more-min\" title=\"Tout le planning détaillé\">+</a>\n            </div>\n        </div><!-- .box-header -->\n        <div class=\"box-content box-content-shadow\">\n\t\t\t<!-- debug SELECT SQL_CALC_FOUND_ROWS  DISTINCT  wp_posts.ID FROM wp_posts  INNER JOIN wp_postmeta ON (wp_posts.ID = wp_postmeta.post_id)\nINNER JOIN wp_postmeta AS mt1 ON (wp_posts.ID = mt1.post_id) WHERE 1=1  AND wp_posts.post_type = 'game' AND (wp_posts.post_status = 'publish') AND (wp_postmeta.meta_key = 'release_date'\nAND  (mt1.meta_key = 'release_date' AND CAST(mt1.meta_value AS DATE) >= '2025-05-21') ) /* custom where basics_posts_where */  /* custom where basics_posts_like_where */  /* custom where basics_posts_like_where */  /* custom where basics_posts_like_where */  GROUP BY wp_posts.ID ORDER BY wp_postmeta.meta_value ASC LIMIT 0, 5 -->                <ul class=\"liste-planning\">\n                \t\t\t            \t<li>\n\t\t                    <figure><a href=\"https://xbox-mag.net/jeux/blades-fire/\"><img src=\"/content/thumbnails/uploads/2025/02/apps13676139243409769009949d3b934e-34d4-47c3-8bc6-0e2b6f6be2d9-tt-width-120-height-170-crop-1-bgcolor-000000.jpeg\" width=\"120\" height=\"170\" alt=\"\"></a></figure>\n\t\t                    <div class=\"liste-planning-infos\">\n\t\t                    \t<span class=\"dateCalendrier\">\n\t\t     \n\t\t                    \t\t22<span>May</span>\t\t                        </span>\n\t\t                        <p class=\"support\">Xbox Series X|S / Xbox One</p>\t\t                        \t\t                        <p class=\"titre-jeu\"><a href=\"https://xbox-mag.net/jeux/blades-fire/\" title=\"Blades of Fire\">Blades of Fire</a></p>\n\t\t                    </div>\n\t\t                </li>\n\t\t\t\t\t\t\t            \t<li>\n\t\t                    <figure><a href=\"https://xbox-mag.net/jeux/lynked-banner-spark/\"><img src=\"/content/thumbnails/uploads/2025/03/apps495301446109276060202323f2183b-3750-4685-b275-4fc937b7ee0e-tt-width-120-height-170-crop-1-bgcolor-000000.jpeg\" width=\"120\" height=\"170\" alt=\"\"></a></figure>\n\t\t                    <div class=\"liste-planning-infos\">\n\t\t                    \t<span class=\"dateCalendrier\">\n\t\t     \n\t\t                    \t\t22<span>May</span>\t\t                        </span>\n\t\t                        <p class=\"support\">Xbox Series X|S / Xbox One</p>\t\t                        \t\t                        <p class=\"titre-jeu\"><a href=\"https://xbox-mag.net/jeux/lynked-banner-spark/\" title=\"Lynked: Banner of the Spark\">Lynked: Banner of the Spark</a></p>\n\t\t                    </div>\n\t\t                </li>\n\t\t\t\t\t\t\t            \t<li>\n\t\t                    <figure><a href=\"https://xbox-mag.net/jeux/deliver-costs/\"><img src=\"/content/thumbnails/uploads/2024/09/apps560141428567207915988148ea0982-17ca-434c-8896-67e6d5bc7540-tt-width-120-height-170-crop-1-bgcolor-000000.jpg\" width=\"120\" height=\"170\" alt=\"\"></a></figure>\n\t\t                    <div class=\"liste-planning-infos\">\n\t\t                    \t<span class=\"dateCalendrier\">\n\t\t     \n\t\t                    \t\t22<span>May</span>\t\t                        </span>\n\t\t                        <p class=\"support\">Xbox Series X|S / Xbox One</p>\t\t                        \t\t                        <p class=\"titre-jeu\"><a href=\"https://xbox-mag.net/jeux/deliver-costs/\" title=\"Deliver at All Costs\">Deliver at All Costs</a></p>\n\t\t                    </div>\n\t\t                </li>\n\t\t\t\t\t\t\t            \t<li>\n\t\t                    <figure><a href=\"https://xbox-mag.net/jeux/tridents-tale/\"><img src=\"/content/thumbnails/uploads/2025/04/apps5430913963462207788935bb328f72-d452-4fe9-a5df-89b17858e955-tt-width-120-height-170-crop-1-bgcolor-000000.jpg\" width=\"120\" height=\"170\" alt=\"\"></a></figure>\n\t\t                    <div class=\"liste-planning-infos\">\n\t\t                    \t<span class=\"dateCalendrier\">\n\t\t     \n\t\t                    \t\t22<span>May</span>\t\t                        </span>\n\t\t                        <p class=\"support\">Xbox Series X|S / Xbox One</p>\t\t                        <p class=\"type\"><a href=\"https://xbox-mag.net/jeux/gametype/idxbox/\" rel=\"tag\">ID@Xbox</a></p>\t\t                        <p class=\"titre-jeu\"><a href=\"https://xbox-mag.net/jeux/tridents-tale/\" title=\"Trident’s Tale\">Trident’s Tale</a></p>\n\t\t                    </div>\n\t\t                </li>\n\t\t\t\t\t\t\t            \t<li>\n\t\t                    <figure><a href=\"https://xbox-mag.net/jeux/tainted-grail-fall-avalon/\"><img src=\"/content/thumbnails/uploads/2025/04/apps327241376772929258794864f6ba5d-7d6b-405f-a3e0-fa8c02e99bfd-tt-width-120-height-170-crop-1-bgcolor-000000.jpeg\" width=\"120\" height=\"170\" alt=\"\"></a></figure>\n\t\t                    <div class=\"liste-planning-infos\">\n\t\t                    \t<span class=\"dateCalendrier\">\n\t\t     \n\t\t                    \t\t23<span>May</span>\t\t                        </span>\n\t\t                        <p class=\"support\">Xbox Series X|S / Xbox One</p>\t\t                        <p class=\"type\"><a href=\"https://xbox-mag.net/jeux/gametype/idxbox/\" rel=\"tag\">ID@Xbox</a></p>\t\t                        <p class=\"titre-jeu\"><a href=\"https://xbox-mag.net/jeux/tainted-grail-fall-avalon/\" title=\"Tainted Grail: The Fall of Avalon\">Tainted Grail: The Fall of Avalon</a></p>\n\t\t                    </div>\n\t\t                </li>\n\t\t\t\t\t\t\t\t\t</ul><!-- .liste-planning -->\n\t\t\t        </div><!-- .box-content -->\n    </div><!-- .box .boxStyle1 #planning -->    \n</div><!-- .span4 -->\n\t\t\t</div><!-- row-fluid -->\n\t\t</div><!-- .container -->\n\t</div><!-- #actualites --><div id=\"articles\" class=\"bg-container-gris1 shadow-container\">\n\t<div class=\"title-home\">\n    \t<div class=\"container\">\n            <div class=\"pull-left\">\n            \t<h1 class=\"title-main\">Articles</h1>\n                <a href=\"/news/\" class=\"article-more\" title=\"Toutes les actualités\">+</a>\n            </div>\n            <div class=\"pull-right\">\n            \t<a href=\"/news/feed/\" title=\"Toutes les news en temps réel\" class=\"action-rss\"></a>\n            </div>\n        </div><!-- .container -->\n    </div><!-- .title-home -->\n    <div class=\"container container-padding\">\n        <div class=\"row-fluid\">\n            <div class=\"span12\">\n\n                <div id=\"articlescarousel\" class=\"carousel-articles slide\" data-ride=\"carousel\">\n\t\t\t\t\t\n                    <ol class=\"carousel-indicators\">\n                    \t                        \t<li class=\"active\" data-slide-to=\"0\" data-target=\"#articlescarousel\"></li>\n                                                \t<li data-slide-to=\"1\" data-target=\"#articlescarousel\"></li>\n                                                \t<li data-slide-to=\"2\" data-target=\"#articlescarousel\"></li>\n                                            </ol>\n                    <div class=\"carousel-inner\">\n\t\t\t\t    \t\t\t                        \t\t                        <div class=\"item active\">\n\t\t                            <ul class=\"liste-articles-carousel\">\n\t\t                                                        <li>\n                                    <a href=\"https://xbox-mag.net/jeux/onimusha-2-samurais-destiny/test/xbox-one/\">\n                                        <figure>\n                                        \t                                        \t\n                                            <img src=\"/content/thumbnails/uploads/2025/02/apps2070214056732441331009737c084f-fb0e-4ce9-a6cd-e72675f86e1e-tt-width-120-height-170-crop-1-bgcolor-000000.jpeg\" width=\"120\" height=\"170\" alt=\"\">\n                                            \n                                            <div class=\"note-bloc note-bloc-test\">\n                                                <p class=\"type\">Test</p>\n                                                                                                \t<p title=\"Xbox One\" class=\"note-chiffre\"><span>7</span>/10</p>\n                                                                                            </div>\n                                        </figure>\n                                    </a>\n                                </li>\n\t\t                        \t\t\t\t\t\t\t\t\t\t                                                        <li>\n                                    <a href=\"https://xbox-mag.net/jeux/capcom-fighting-collection-2-2/test/xbox-series-x/\">\n                                        <figure>\n                                        \t                                        \t\n                                            <img src=\"/content/thumbnails/uploads/2024/09/capcom_fighting_collection_2-5915664-tt-width-120-height-170-crop-1-bgcolor-000000.jpg\" width=\"120\" height=\"170\" alt=\"\">\n                                            \n                                            <div class=\"note-bloc note-bloc-test\">\n                                                <p class=\"type\">Test</p>\n                                                                                                \t<p title=\"Xbox One\" class=\"note-chiffre\"><span>9</span>/10</p>\n                                                                                            </div>\n                                        </figure>\n                                    </a>\n                                </li>\n\t\t                        \t\t\t\t\t\t\t\t\t\t                                                        <li>\n                                    <a href=\"https://xbox-mag.net/jeux/towerborne/test/xbox-series-x/\">\n                                        <figure>\n                                        \t                                        \t\n                                            <img src=\"/content/thumbnails/uploads/2023/06/towerborne-tt-width-120-height-170-crop-1-bgcolor-000000.jpg\" width=\"120\" height=\"170\" alt=\"\">\n                                            \n                                            <div class=\"note-bloc note-bloc-test\">\n                                                <p class=\"type\">Test</p>\n                                                                                                \t<p title=\"Xbox One\" class=\"note-chiffre\"><span>8</span>/10</p>\n                                                                                            </div>\n                                        </figure>\n                                    </a>\n                                </li>\n\t\t                        \t\t\t\t\t\t\t\t\t\t                                                        <li>\n                                    <a href=\"https://xbox-mag.net/jeux/precinct/test/xbox-series-x/\">\n                                        <figure>\n                                        \t                                        \t\n                                            <img src=\"/content/thumbnails/uploads/2023/06/the_precinct-tt-width-120-height-170-crop-1-bgcolor-000000.jpg\" width=\"120\" height=\"170\" alt=\"\">\n                                            \n                                            <div class=\"note-bloc note-bloc-test\">\n                                                <p class=\"type\">Test</p>\n                                                                                                \t<p title=\"Xbox One\" class=\"note-chiffre\"><span>7</span>/10</p>\n                                                                                            </div>\n                                        </figure>\n                                    </a>\n                                </li>\n\t\t                        \t\t\t\t\t\t\t\t\t\t                                                        <li>\n                                    <a href=\"https://xbox-mag.net/jeux/elder-scrolls-iv-oblivion-remake/test/xbox-series-x/\">\n                                        <figure>\n                                        \t                                        \t\n                                            <img src=\"/content/thumbnails/uploads/2025/03/apps5450813768907753672648dcd706bb-ce91-4b3f-9525-10b1d4af8423-tt-width-120-height-170-crop-1-bgcolor-000000.jpg\" width=\"120\" height=\"170\" alt=\"\">\n                                            \n                                            <div class=\"note-bloc note-bloc-test\">\n                                                <p class=\"type\">Test</p>\n                                                                                                \t<p title=\"Xbox One\" class=\"note-chiffre\"><span>8</span>/10</p>\n                                                                                            </div>\n                                        </figure>\n                                    </a>\n                                </li>\n\t\t                        \t\t                            </ul><!-- .liste-articles-carousel -->\n\t\t                        </div><!-- .item -->\n\t\t                       \t\t\t\t\t\t\t\t\t\t\t                        \t\t                        <div class=\"item \">\n\t\t                            <ul class=\"liste-articles-carousel\">\n\t\t                                                        <li>\n                                    <a href=\"https://xbox-mag.net/jeux/motogp-25/test/xbox-series-x/\">\n                                        <figure>\n                                        \t                                        \t\n                                            <img src=\"/content/thumbnails/uploads/2025/02/apps56258143704460331285623825c1cd-7e4e-411b-bc46-653ab87d237b-tt-width-120-height-170-crop-1-bgcolor-000000.jpeg\" width=\"120\" height=\"170\" alt=\"\">\n                                            \n                                            <div class=\"note-bloc note-bloc-test\">\n                                                <p class=\"type\">Test</p>\n                                                                                                \t<p title=\"Xbox One\" class=\"note-chiffre\"><span>9</span>/10</p>\n                                                                                            </div>\n                                        </figure>\n                                    </a>\n                                </li>\n\t\t                        \t\t\t\t\t\t\t\t\t\t                                                        <li>\n                                    <a href=\"https://xbox-mag.net/jeux/lost-records-bloom-rage/test/xbox-series-x/\">\n                                        <figure>\n                                        \t                                        \t\n                                            <img src=\"/content/thumbnails/uploads/2023/12/apps5871113933652051346116c13bbe67-324e-411f-a97e-18de58664521-tt-width-120-height-170-crop-1-bgcolor-000000.jpeg\" width=\"120\" height=\"170\" alt=\"\">\n                                            \n                                            <div class=\"note-bloc note-bloc-test\">\n                                                <p class=\"type\">Test</p>\n                                                                                                \t<p title=\"Xbox One\" class=\"note-chiffre\"><span>8</span>/10</p>\n                                                                                            </div>\n                                        </figure>\n                                    </a>\n                                </li>\n\t\t                        \t\t\t\t\t\t\t\t\t\t                                                        <li>\n                                    <a href=\"https://xbox-mag.net/jeux/fatal-fury-city-wolves/test/xbox-series-x/\">\n                                        <figure>\n                                        \t                                        \t\n                                            <img src=\"/content/thumbnails/uploads/2024/03/apps1460314135920026106660b06e746a-f873-48df-a492-ee166984619a-tt-width-120-height-170-crop-1-bgcolor-000000.jpeg\" width=\"120\" height=\"170\" alt=\"\">\n                                            \n                                            <div class=\"note-bloc note-bloc-test\">\n                                                <p class=\"type\">Test</p>\n                                                                                                \t<p title=\"Xbox One\" class=\"note-chiffre\"><span>8</span>/10</p>\n                                                                                            </div>\n                                        </figure>\n                                    </a>\n                                </li>\n\t\t                        \t\t\t\t\t\t\t\t\t\t                                                        <li>\n                                    <a href=\"https://xbox-mag.net/jeux/post-trauma/test/xbox-series-x/\">\n                                        <figure>\n                                        \t                                        \t\n                                            <img src=\"/content/thumbnails/uploads/2024/06/apps73781453675224676743527820da1-f4c8-4780-8aa3-1c7d57363e92-tt-width-120-height-170-crop-1-bgcolor-000000.jpeg\" width=\"120\" height=\"170\" alt=\"\">\n                                            \n                                            <div class=\"note-bloc note-bloc-test\">\n                                                <p class=\"type\">Test</p>\n                                                                                                \t<p title=\"Xbox One\" class=\"note-chiffre\"><span>5</span>/10</p>\n                                                                                            </div>\n                                        </figure>\n                                    </a>\n                                </li>\n\t\t                        \t\t\t\t\t\t\t\t\t\t                                                        <li>\n                                    <a href=\"https://xbox-mag.net/jeux/mandragora/test/xbox-series-x/\">\n                                        <figure>\n                                        \t                                        \t\n                                            <img src=\"/content/thumbnails/uploads/2022/02/mandragora_2022_02-10-22_007-1024x576-e1644586031334-tt-width-120-height-170-crop-1-bgcolor-000000.jpg\" width=\"120\" height=\"170\" alt=\"\">\n                                            \n                                            <div class=\"note-bloc note-bloc-test\">\n                                                <p class=\"type\">Test</p>\n                                                                                                \t<p title=\"Xbox One\" class=\"note-chiffre\"><span>7</span>/10</p>\n                                                                                            </div>\n                                        </figure>\n                                    </a>\n                                </li>\n\t\t                        \t\t                            </ul><!-- .liste-articles-carousel -->\n\t\t                        </div><!-- .item -->\n\t\t                       \t\t\t\t\t\t\t\t\t\t\t                        \t\t                        <div class=\"item \">\n\t\t                            <ul class=\"liste-articles-carousel\">\n\t\t                                                        <li>\n                                    <a href=\"https://xbox-mag.net/2025/04/24/f1-25-les-developpeurs-nous-ont-parle-du-troisieme-volet-du-mode-point-de-rupture/\">\n                                        <figure>\n                                        \t                                        \t\n                                            <img src=\"/content/thumbnails/uploads/2025/03/eas_f1_25_standard_w_7200x10200_rgb-tt-width-120-height-170-crop-1-bgcolor-000000.jpg\" width=\"120\" height=\"170\" alt=\"\">\n                                            \n                                            <div class=\"note-bloc note-bloc-preview\">\n                                                <p class=\"type\">1stlook</p>\n                                                                                                \t<p class=\"note-chiffre\">-</p>\n                                                                                            </div>\n                                        </figure>\n                                    </a>\n                                </li>\n\t\t                        \t\t\t\t\t\t\t\t\t\t                                                        <li>\n                                    <a href=\"https://xbox-mag.net/2025/04/23/horizon-realms/\">\n                                        <figure>\n                                        \t                                        \t\n                                            <img src=\"/content/thumbnails/uploads/2020/06/apps4980013718773309227929bebdcc0e-1ed5-4778-8732-f4ef65a2f445-tt-width-120-height-170-crop-1-bgcolor-000000.jpg\" width=\"120\" height=\"170\" alt=\"\">\n                                            \n                                            <div class=\"note-bloc note-bloc-dossier\">\n                                                <p class=\"type\">Dossier</p>\n                                                                                                \t<p class=\"note-chiffre\">-</p>\n                                                                                            </div>\n                                        </figure>\n                                    </a>\n                                </li>\n\t\t                        \t\t\t\t\t\t\t\t\t\t                                                        <li>\n                                    <a href=\"https://xbox-mag.net/jeux/clair-obscur-expedition-33/test/xbox-series-x/\">\n                                        <figure>\n                                        \t                                        \t\n                                            <img src=\"/content/thumbnails/uploads/2024/06/apps215281432228044328815636e7f1cd-07a6-4e2a-a35d-485380706ab1-tt-width-120-height-170-crop-1-bgcolor-000000.jpg\" width=\"120\" height=\"170\" alt=\"\">\n                                            \n                                            <div class=\"note-bloc note-bloc-test\">\n                                                <p class=\"type\">Test</p>\n                                                                                                \t<p title=\"Xbox One\" class=\"note-chiffre\"><span>10</span>/10</p>\n                                                                                            </div>\n                                        </figure>\n                                    </a>\n                                </li>\n\t\t                        \t\t\t\t\t\t\t\t\t\t                                                        <li>\n                                    <a href=\"https://xbox-mag.net/2025/04/23/joue-onimusha-2-samurais-destiny-sur-xbox-series-x-lelegance-eternelle/\">\n                                        <figure>\n                                        \t                                        \t\n                                            <img src=\"/content/thumbnails/uploads/2025/02/apps2070214056732441331009737c084f-fb0e-4ce9-a6cd-e72675f86e1e-tt-width-120-height-170-crop-1-bgcolor-000000.jpeg\" width=\"120\" height=\"170\" alt=\"\">\n                                            \n                                            <div class=\"note-bloc note-bloc-preview\">\n                                                <p class=\"type\">1stlook</p>\n                                                                                                \t<p class=\"note-chiffre\">-</p>\n                                                                                            </div>\n                                        </figure>\n                                    </a>\n                                </li>\n\t\t                        \t\t\t\t\t\t\t\t\t\t                                                        <li>\n                                    <a href=\"https://xbox-mag.net/2025/04/22/notre-avis-sur-la-manette-ultimate-mini-xbox-et-pc-de-chez-8bitdo/\">\n                                        <figure>\n                                        \t                                        \t\n                                            <img src=\"/content/thumbnails/uploads/2004/01/39519jaquette_matos-tt-width-120-height-170-crop-1-bgcolor-000000.jpg\" width=\"120\" height=\"170\" alt=\"\">\n                                            \n                                            <div class=\"note-bloc note-bloc-dossier\">\n                                                <p class=\"type\">Dossier</p>\n                                                                                                \t<p class=\"note-chiffre\">-</p>\n                                                                                            </div>\n                                        </figure>\n                                    </a>\n                                </li>\n\t\t                        \t\t                            </ul><!-- .liste-articles-carousel -->\n\t\t                        </div><!-- .item -->\n\t\t                       \t\t\t\t\t\t\t\t\t                                            </div>\n                    <a data-slide=\"prev\" href=\"#articlescarousel\" class=\"left carousel-control\">‹</a>\n                    <a data-slide=\"next\" href=\"#articlescarousel\" class=\"right carousel-control\">›</a>\n                </div><!-- .carousel-articles #myCarousel-articles -->\n\n            </div><!-- .span12 -->\n        </div><!-- row-fluid -->\n    </div><!-- .container -->\n</div><!-- #articles -->\n\t\t        <footer id=\"footer\">\n\t\t            <div class=\"container\">\n\t\t                <div class=\"row-fluid\">\n\t\t                \t\t                    <div class=\"span12\">\n\t\t                         <p>\n\t\t                         \t<span><strong>Xbox-mag.net</strong><span class=\"sep\">|</span><a href=\"/a-propos/\">A propos</a><span class=\"sep\">|</span><a href=\"/nous-contacter/\">Nous contacter</a><span class=\"sep\">|</span><a href=\"/publicite/\">Publicité / Nos offres</a><span class=\"sep\">|</span><a href=\"/conditions-d-utilisation/\">Conditions d'utilisation</a><span class=\"sep\">|</span><a href=\"/equipe/\">L'équipe Xboxmag</a></span>\n\t\t                            Toute l’actualité de la Xbox One, Xbox 360 et Xbox de Microsoft - Tous droits réservés © 2002-2025 | © Design : <a href=\"#\" title=\"L77 - Webdesign &amp; Integration\" target=\"_blank\">L77</a> | Développement : <a href=\"http://mahi-mahi.fr\" title=\"Mahi-Mahi - Développement, Ergonomie, Conseil\" target=\"_blank\">Mahi-Mahi</a></p>\n\t\t                         <p></p>\n\t\t                         <p class=\"partenaires\">\n\t\t                         \tPartenaires :\n\t\t                         \t<a target=\"_blank\" title=\"xac-zone\" href=\"http://xac-zone.com/\">xac-zone</a>,\n\t\t                            <a href=\"http://www.p-pokemon.com\" title=\"Pokemon\" target=\"_blank\">Pokemon</a>,\n\t\t                         </p>\n\t\t                         <div class=\"we-are-xm\">\n\t\t                         \t<a href=\"https://xbox-mag.net\"></a>\n\t\t                         \t<p title=\"Bon ok on se la pète mais c'est juste pour déconner hein :)\">We are Xboxmag</p>\n\t\t                         </div>\n\n\t\t                    </div>\n\t\t                </div><!-- row-fluid -->\n\t\t            </div><!-- .container -->\n\t\t        </footer><!-- #footer -->\n\t\t    </div><!-- #skin-container-->\n\t\t</div><!-- #skin -->\n\t<!-- #skin-holder -->\n\t\n\t<script type=\"text/javascript\" src=\"//xbox-mag.net/content/themes/xboxmag/js/jquery-1.10.1.min.js?ver=3.8.35\"></script>\n<script type=\"text/javascript\" src=\"//xbox-mag.net/content/themes/xboxmag/js/console.js?ver=3.8.35\"></script>\n<script type=\"text/javascript\" src=\"//xbox-mag.net/content/themes/xboxmag/js/bootstrap.js?ver=3.8.35\"></script>\n<script type=\"text/javascript\" src=\"//xbox-mag.net/content/themes/xboxmag/js/jquery.scrollTo.js?ver=3.8.35\"></script>\n<script type=\"text/javascript\" src=\"//xbox-mag.net/content/themes/xboxmag/js/typeahead.js?ver=3.8.35\"></script>\n<script type=\"text/javascript\" src=\"//xbox-mag.net/content/themes/xboxmag/js/jquery.validate.min.js?ver=3.8.35\"></script>\n<script type=\"text/javascript\" src=\"//xbox-mag.net/content/themes/xboxmag/js/additional-methods.js?ver=3.8.35\"></script>\n<script type=\"text/javascript\">\n/* <![CDATA[ */\nvar xm_vars = {\"wp_home\":\"https:\\/\\/xbox-mag.net\",\"theme_path\":\"https:\\/\\/xbox-mag.net\\/content\\/themes\\/xboxmag\",\"is_local\":null,\"ajaxurl\":\"https:\\/\\/xbox-mag.net\\/wp\\/wp-admin\\/admin-ajax.php\"};\n/* ]]> */\n</script>\n<script type=\"text/javascript\" src=\"//xbox-mag.net/content/themes/xboxmag/js/functions.js?ver=3.8.35\"></script>\n<script type=\"text/javascript\" src=\"//xbox-mag.net/content/plugins/contact-form-7/includes/js/jquery.form.min.js?ver=3.46.0-2013.11.21\"></script>\n<script type=\"text/javascript\">\n/* <![CDATA[ */\nvar _wpcf7 = {\"loaderUrl\":\"https:\\/\\/xbox-mag.net\\/content\\/plugins\\/contact-form-7\\/images\\/ajax-loader.gif\",\"sending\":\"Envoi en cours ...\",\"cached\":\"1\"};\n/* ]]> */\n</script>\n<script type=\"text/javascript\" src=\"//xbox-mag.net/content/plugins/contact-form-7/includes/js/scripts.js?ver=3.6\"></script>\n\t<script type=\"application/javascript\" src=\"https://do69ll745l27z.cloudfront.net/scripts/master/xbox-mag.js\" async=\"\"></script>\n\n\n<div id=\"cgFooter\"></div><script type=\"text/javascript\" id=\"\" charset=\"\">if(/hero-academia|mha|my-hero-ones-justice|one-piece|naruto|boruto/.test(top.location.href)||/My Hero Academia|MHA|My Hero One's Justice|One Piece|Naruto|Boruto/.test(top.document.title)){var pxMHOJ=new Image(1,1);pxMHOJ.src=\"//www.smartadserver.com/diffx/track/compgb.ashx?keyword\\x3dmhoj\\x26exptime\\x3d365\";document.body.appendChild(pxMHOJ)};</script></body></html>",
  "scripts": [
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "\n\t(function(w, d, s, l, i) {\n\t\tw[l] = w[l] || [];\n\t\tw[l].push({\n\t\t\t'gtm.start': new Date().getTime(),\n\t\t\tevent: 'gtm.js'\n\t\t});\n\t\tvar f = d.getElementsByTagName(s)[0],\n\t\t\tj = d.createElement(s),\n\t\t\tdl = l != 'dataLayer' ? '&l=' + l : '';\n\t\tj.async = true;\n\t\tj.src =\n\t\t\t'https://www.googletagmanager.com/gtm.js?id=' + i + dl;\n\t\tf.parentNode.insertBefore(j, f);\n\t})(window, document, 'script', 'dataLayer', 'GTM-WMW2Z5G');\n",
    "\n\t(function(c, l, a, r, i, t, y) {\n\t\tc[a] = c[a] || function() {\n\t\t\t(c[a].q = c[a].q || []).push(arguments)\n\t\t};\n\t\tt = l.createElement(r);\n\t\tt.async = 1;\n\t\tt.src = \"https://www.clarity.ms/tag/\" + i;\n\t\ty = l.getElementsByTagName(r)[0];\n\t\ty.parentNode.insertBefore(t, y);\n\t})(window, document, \"clarity\", \"script\", \"ln4djqoo5n\");\n",
    "",
    "(function(){ var kleanads=function(e){\"use strict\";const t=\"adm\";const i=\"kleanads_errors\";class n{constructor(e,t,i,n=1){this.tagId=e,this.kleanadsVersion=t,this.throttling=n,this.device=i||\"na\"}handleMessage(e,t,i){const n={source:t??\"kleanads\",type:\"log\",level:e,tagId:this.tagId,kleanadsVersion:this.kleanadsVersion,href:window.location.href,device:this.device,...i};var s,a;s=n,a=this.throttling,100*Math.random()<a&&navigator.sendBeacon(\"https://intake.pbstck.com/v1/trace\",JSON.stringify(s))}error(e){this.handleMessage(\"error\",i,{message:e})}warn(e){this.handleMessage(\"warn\",i,{message:e})}customLogWithPayload(e,t,i=\"info\"){this.handleMessage(i,e,t)}}const s=/kleanads:debug/.test(window.location.href),a=!!window.localStorage?.getItem&&null!==window.localStorage.getItem(\"kleanads\"),r=!!window.localStorage?.getItem&&null!==window.localStorage.getItem(\"kleanads_refresh\"),o=\"kleanads\";let d,c=\"na\",l=\"na\",u=\"na\";function h(){return s||a}function g(e,t){return`[${e}] [${performance.now().toFixed(2)}] ${t}`}function f(e){u=e}function p(e,...t){h()&&console.log(g(o,e),...t)}function m(e,...t){if(h()){const i=\"background: #4D5E98;color: #fff; padding: 2px 4px;font-weight:bold;text-transform:capitalize;border-radius: 1px; margin:0 2px;\";console.debug(\"%cDEBUG\",i,g(o,e),...t)}}function b(e,...t){h()&&console.warn(g(o,e),...t),d?.warn(e)}function v(e,...t){h()&&console.error(g(o,e),...t),d?.error(e),navigator.sendBeacon(`https://intake.pbstck.com/v1/intake/error?tId=${c}&v=${l}&s=${u}&c=1`,JSON.stringify([{message:e}]))}function y(e,t,i){d?.customLogWithPayload(t,{message:e,...i})}function A(e,t){const i={type:\"customEvent\",eventName:e,message:t};window.postMessage(i,\"*\")}function I(e){const t=document.createElement(\"meta\");t.setAttribute(\"name\",\"pbstck_context:pbstck_ab_test\"),t.content=e,document.head.appendChild(t)}function C(e,t){const i=document.createElement(\"meta\");i.setAttribute(\"name\",`pbstck:${e}`),i.content=t,document.head.appendChild(i)}function S(e,t){const i=document.createElement(\"meta\");i.setAttribute(\"name\",`ad:${e}`),i.content=t,document.head.appendChild(i)}function k(e){const t={};e.document.querySelectorAll('meta[name^=\"ad:\"]').forEach((e=>{const i=function(e){const t=e.attributes.getNamedItem(\"name\")?.value||\"\";return t.startsWith(\"ad:\")?t.slice(3):t}(e);i&&(t[i]=function(e){const t=e.attributes.getNamedItem(\"content\")?.value||\"\";return t.split(\",\")}(e))}));const i=new URLSearchParams(e.location.search);for(const e of i.keys())e.startsWith(\"ad:\")&&(t[e.slice(3)]=i.getAll(e));return t}function w(){const e=document.head.querySelector('meta[name=\"ad:no_cmp\"]');return!!e&&\"true\"===e.content}function E(e){return e.mediaTypes.includes(\"Instream\")&&void 0!==e.instreamParams}function T(e){return e.mediaTypes.includes(\"Banner\")&&void 0!==e.bannerSizes}function $(e){return e.mediaTypes.includes(\"Skin\")}const _=(e,t)=>\"fluid\"===e&&\"fluid\"===t||e[0]===t[0]&&e[1]===t[1];function R(e){const t=e.values?e.values.join(\",\"):\"\";return e.value?e.value:t}function O(e){const t=e.values??[];return e.value?e.value:t}const U=e=>e.map(P),P=e=>({bidder:e.bidder,params:e.params}),L=e=>({banner:{sizes:e}}),x=e=>({video:e}),N=e=>({native:e}),D=e=>({video:{context:\"outstream\",playerSize:[640,480],mimes:[\"video/mp4\",\"video/ogg\",\"video/webm\",\"application/javascript\"],protocols:[1,2,3,4,5,6,7,8,11,12,13,14],api:[1,2,3,5,6,7],playbackmethod:[2,3,4],skip:1,linearity:2,startdelay:0,placement:3,plcmt:4,maxduration:30,minduration:0,playVideoVisibleThreshold:25,nonViewableBehavior:\"pause\",renderer:e}}),j=()=>({url:\"https://acdn.adnxs.com/video/outstream/ANOutstreamVideo.js\",options:{adText:\"\",aspectRatio:\"16:9\",skippable:{enabled:!0,skipButtonText:\"SKIP\"}}}),B=e=>{const t=e.ortb2Imp;return t?(t.ext.data={...t.ext.data,adUnitName:e.adUnitName},t):{ext:{data:{adUnitName:e.adUnitName}}}},M=(e,t)=>{const i=e.floors;i&&t&&(i.values.banner=Math.max(i.values.banner,t));const n={code:e.divId,pubstack:{adUnitName:e.adServerAdUnitName,adUnitPath:W(e)},floors:i,ortb2Imp:B(e)},s=e.getTargetings();if(s.find((e=>\"ad_index\"===e.key))){const e=s.find((e=>\"ad_index\"===e.key))?.value;n.pubstack&&(n.pubstack.tags=[`ad_index:${e}`])}return n};function V(e,t){const i=M(e,t?.newFloor);if(E(e))return[{...i,bids:U(e.bidders),mediaTypes:x(e.instreamParams?.mediaTypeParams)}];const n=(t,n,s)=>{const a=function(e,t){const i={};return t.includes(\"Banner\")&&T(e)&&t.includes(\"Skin\")&&$(e)?i.banner=L([[1800,1e3],...e.bannerSizes]).banner:t.includes(\"Banner\")&&T(e)?i.banner=L(e.bannerSizes).banner:t.includes(\"Skin\")&&$(e)&&(i.banner=L([[1800,1e3]]).banner),t.includes(\"Outstream\")&&function(e){return e.mediaTypes.includes(\"Outstream\")}(e)&&(i.video=D(j()).video),t.includes(\"Native\")&&function(e){return e.mediaTypes.includes(\"Native\")&&void 0!==e.nativeParams}(e)&&(i.native=N(e.nativeParams).native),i}(e,t);if(0===Object.keys(a).length)b(`Bidder ${n.bidder} has no Prebid mediaType ${t} for adUnit ${e.adUnitName}`);else{const e=s.find((e=>JSON.stringify(e.mediaTypes)===JSON.stringify(a)));e?e.bids.push(P(n)):s.push({...i,bids:[P(n)],mediaTypes:a})}};return e.bidders.reduce(((e,i)=>(t?.multiformatBidders?.includes(i.bidder)?n(i.mediaTypes,i,e):i.mediaTypes.forEach((t=>{n([t],i,e)})),e)),[])}function W(e){const t=[...e.getTargetings()],i=(e.pubstackDeclarationTargetingKeys??[]).map((e=>{const i=t.find((t=>t.key===e));if(i)return i;{const t=k(window)[e];return t?{key:e,values:t}:void 0}})).filter((e=>!!e)).map((e=>`${e.key}=${R(e)}`)).join(\"&\"),n=e.adUnitPath.includes(\"?\")?\"&\":\"?\";return i.length>0?`${e.adUnitPath}${n}${i}`:e.adUnitPath}function z(e){return null!==document.getElementById(e)}function F(e){const t=document.getElementById(e);if(t){return t.getBoundingClientRect().top}return p(`[DOM] div ${e} not found during get distance from top`),0}function H(e,t){return new Promise(((i,n)=>e().then(i).catch((i=>{return t>1?(s=100,new Promise((e=>setTimeout(e,s)))).then(H.bind(null,e,t-1)).then((e=>e)).catch(n):n(i);var s}))))}const G=async(e,t=3)=>H((()=>import(e)),t).then((e=>e)).catch((i=>{throw v(`Failed to load module ${e} after ${t} retries`,i),new Error(\"Too many failed attempt to load external module.\")})),K=(e,t)=>{const i=function(e,t){const i=document.createElement(\"script\");return i.setAttribute(\"src\",e),i}(e);i.setAttribute(\"async\",\"true\"),i.setAttribute(\"data-kleanads\",\"true\"),document.head.append(i)};async function q(e,t){const{beforeStart:i}=t,n=function(e,t){return(e.extraScripts??[]).filter((i=>i.tagId===e.tagId&&!!i.beforeStart===t))}(e,i);if(n.length>0){p(\"[extra-script]\",i?\"Loading extraScripts before config\":\"Loading extraScripts after consent\");const e=n.filter((({synchronous:e})=>!e)).flatMap((e=>e.scripts)),t=n.filter((({synchronous:e})=>e)).flatMap((e=>e.scripts));if(e.length>0&&(p(`[extra-script] downloading async extra scripts ${e.join(\"\\n\")}`),e.forEach((e=>K(e)))),t.length>0){p(`[extra-script] downloading sync extra scripts ${t.join(\"\\n\")}`);for(const e of t)try{await G(e)}catch(e){b(\"[extra-script] Error while loading sync extra script\",e)}}}}function Y(e,t){return e.size<t.size?1:e.size>t.size?-1:0}function X(e){if(\"fluid\"===e)return\"fluid\";const[t,i]=e.split(\"x\");return[parseInt(t,10),parseInt(i,10)]}function J(e){return e>=100||e>=Math.floor(100*Math.random())+1}function Q(e){return Array.isArray(e)&&2===e.length&&\"number\"==typeof e[0]&&\"number\"==typeof e[1]}const Z=[\"master\",\"master-1\",\"master-2\",\"master-3\",\"companion\",void 0],ee=(e,t)=>Z.indexOf(e.roadblock)-Z.indexOf(t.roadblock)||F(e.divId)-F(t.divId);class te{constructor(){this.uprEnabled=!0,this.disableGptPreAuction=!1,this.kleanadsRunCount=1}setUprState(e,t){switch(\"true\"===function(e,t){const i=`meta[name=\"${t}\"]`,n=e.document.querySelector(i);return null!==n?n.getAttribute(\"content\"):null}(window,\"adm_feature:upr_disabled\")&&(e=\"disabled\"),e){case\"disabled\":this.uprEnabled=!1;break;case\"tested\":this.uprEnabled=J(t??50),this.uprTested=!0;break;default:this.uprEnabled=!0}}setKleanadsRunCount(e){this.kleanadsRunCount=e}static getInstance(){return te.instance||(te.instance=new te),te.instance}}const ie=\"ad_floor-rule\",ne=\"prkv\";function se(e){if(\"string\"==typeof e)return!0;if(Array.isArray(e)){for(const t of e)if(\"string\"!=typeof t)return!1;return!0}return!1}function ae(e,t){const i=e.getTargeting(t);i&&i.length>0&&e.clearTargeting(t)}const re=\"bid_bidder\",oe=\"bid_size\",de=\"bid_mediatype\",ce=\"[instream] [Dailymotion]\";class le{constructor(e,t,i,n){this.callbackAdded=!1,this.configSetOnce=!1,this.adReadyToFetchReceivedOnce=!1,this.adReadyToFetchCallback=()=>{},this.declaredAdUnit=\"\",this.pubstackWindow=e,this.pageContext=t,this.device=i,this.targetings=he(this.device,this.pubstackWindow),this.instreamType=n??\"dailymotion-v1\"}declareAdUnit(e){\"dailymotion-v3\"===this.instreamType&&\"\"===this.declaredAdUnit&&(this.declaredAdUnit=e.divId,this.executeWhenAdServerReady((()=>{const t=this.pubstackWindow.dailymotion;t?t.getPlayer(e.divId).then((t=>{t.on(this.pubstackWindow.dailymotion?.events.AD_READYTOFETCH,(()=>{p(`${ce} ${e.divId} event AD_READYTOFETCH received`),this.adReadyToFetchReceivedOnce||(this.adReadyToFetchReceivedOnce=!0),this.adReadyToFetchCallback()}))})):v(`${ce} unable to get dailymotion on the page`)})))}setApsTargetings(e){if(0!==e.length){p(`${ce} putting targeting keys for aps auction of winning bidder`,e[0]);try{const t=e[0].helpers?.qsParams();if(t)return void this.targetings.push(t.slice(1));const i=e[0].qsParams;if(i)return void this.targetings.push(i.slice(1))}catch(e){v(`${ce} error setting APS targetings`,e)}}}executeWhenAdServerReady(e){this.pubstackWindow.dailymotion?e():setTimeout(this.executeWhenAdServerReady.bind(this,e),100)}async callAdServer(e,t){const i=e.divId;if(\"dailymotion-v3\"===this.instreamType&&e.divId!==this.declaredAdUnit)return void v(`${ce} ${e.divId} call ad server but it is not the same divId as the one declared ${this.declaredAdUnit}`);if(!E(e))return void v(`${ce} ${i} is not an instream adUnit`);p(`${ce} ${i} call ad server`);const n=await(this.pubstackWindow.dailymotion?.getPlayer(i));if(!n)return void v(`${ce} no player found for ${i}`);p(`${ce} ${i} player:`,n);const s=await n.getState();switch(this.customConfig=function(e,t,i,n){const s=function(e){return e.getTargetings().map(ue)}(e);p(`${ce} adUnitTargetings`,s);const a=Array.from(i.entries()).filter((([,e])=>!!e)).map((([e,t])=>`${e}=${t}`)),r=s.concat(t).concat(a).join(\"&\"),o={...e.instreamParams.vast,vpmute:n.playerIsMuted?1:0},d=Object.keys(o).map((function(e){return`${e}=${o[e]}`})).join(\"&\"),c=e.instreamParams.adDeactivationContext;let l=!1;if(c){const e=i.get(c.key);l=!!e&&c.values.includes(e)}const u={dynamiciu:e.adUnitPath,keyvalues:r,keyvalues2:d};return l?{...u,premium:\"true\"}:u}(e,this.targetings,this.pageContext,s),p(`${ce} generated customConfig`,this.customConfig),this.instreamType){case\"dailymotion-v1\":p(`${ce} ${i} setCustomConfig`,this.customConfig),n.setCustomConfig(this.customConfig),p(`${ce} ad server called ${i}`),document.dispatchEvent(new CustomEvent(\"admDailymotionReady\",{detail:{divId:i}})),p(`${ce} ${i} admDailymotionReady event dispatched`);break;case\"dailymotion-v2\":this.callbackAdded||(p(`${ce} ${i} add callback to event ${this.pubstackWindow.dailymotion?.events.AD_READYTOFETCH}`),n.on(this.pubstackWindow.dailymotion?.events.AD_READYTOFETCH,(()=>{p(`${ce} ${i} event AD_READYTOFETCH received, setCustomConfig`,this.customConfig),this.customConfig&&n.setCustomConfig(this.customConfig),t&&(p(`${ce} ${i} event AD_READYTOFETCH, call \"onCallFinished\"`),t())})),this.callbackAdded=!0);break;case\"dailymotion-v3\":!this.configSetOnce&&this.adReadyToFetchReceivedOnce?(p(`${ce} ${e.divId} event AD_READYTOFETCH already received, setting customConfig\"`,this.customConfig),this.customConfig&&(n.setCustomConfig(this.customConfig),this.configSetOnce=!0),t&&(p(`${ce} ${e.divId} event AD_READYTOFETCH, call \"onCallFinished\"`),t())):this.adReadyToFetchCallback=()=>{p(`${ce} ${e.divId} event AD_READYTOFETCH callback, setting customConfig\"`,this.customConfig),this.customConfig&&n.setCustomConfig(this.customConfig)}}}setPbjsTargetings(e,t){if(e){p(`${ce} put pbjs targeting keys for ${t.divId}`);const i=e.getAdserverTargetingForAdUnitCode(t.divId);for(const e of Object.keys(i)){const n=i[e];se(n)?this.targetings.push(`${e}=${n}`):b(`${ce} [targeting] unable to set targeting ${e}=${n} on adUnit ${t.divId}`)}}else v(`${ce} no pbjs given: unable to put header bidding targetings`)}cleanTargetings(){this.targetings.splice(0),this.targetings.push(...he(this.device,this.pubstackWindow))}}function ue(e){const t=O(e);return`${e.key}=${\"string\"==typeof t?t:t.join(\",\")}`}function he(e,i){const n=[],s=k(i);Object.keys(s).forEach((e=>{const t=s[e].join(\",\");n.push(`${e}=${t}`)})),n.push(`${t}=1`),n.push(`device=${e}`);const a=te.getInstance().grapeshotValues;a?.length&&n.push(`gs_cat=${a.join(\",\")}`);try{const e=JSON.parse(i.localStorage._pdfps).slice(0,250).join(\",\");\"\"!==e?n.push(`permutive=${e}`):p(`[${ce}] no permutive targeting found`)}catch(e){p(`[${ce}] error reading permutive targeting, ${e}`)}return n}var ge,fe,pe;!function(e){e.BEGIN_INIT=\"begin_init\",e.CMP_RESPONSE_AVAILABLE=\"cmp_response_available\",e.MAIN_THREAD_END=\"main_thread_end\",e.GOOGLETAG_READY=\"googletag_ready\",e.APSTAG_READY=\"apstag_ready\",e.PREBID_READY=\"prebid_ready\"}(ge||(ge={})),function(e){e.BEGIN_CONFIGURE=\"begin_configure\",e.BEGIN_START=\"begin_start\",e.SPA_RELOAD=\"spa_reload\"}(fe||(fe={})),function(e){e.START_AUCTION=\"start_auction\",e.END_PBJS_AUCTION=\"end_pbjs_auction\",e.END_APS_AUCTION=\"end_aps_auction\",e.START_AD_SERVER_CALL=\"start_ad_server_call\",e.SLOT_RENDER_ENDED_TIME=\"slot_render_ended_time\",e.SLOT_RESPONSE_RECEIVED_TIME=\"slot_response_received_time\"}(pe||(pe={}));const me=[],be=[],ve=\"getEntriesByName\"in performance&&\"measure\"in performance&&\"mark\"in performance;function ye(e){me.includes(e)||(Ce(e),me.push(e))}function Ae(e){Ce(e)}function Ie(e,t){const i=function(e,t){return`${e}_${t}`}(e,t);be.includes(i)||(Ce(i),be.push(i))}function Ce(e){ve&&(performance.mark(e.toString()),m(`[performance] [mark] ${e}: ${performance.getEntriesByName(e)[0].startTime.toFixed(2)}`))}const Se=\"[consent]\";function ke(e){return new Promise(((t,i)=>{!function(e,t,i){(n=e,new Promise(((e,t)=>we(n,e)))).then((()=>{try{!function(e,t){const i=function(e){return e.__tcfapi}(e);i(\"addEventListener\",2,(e=>{if(e&&(\"useractioncomplete\"===e.eventStatus||\"tcloaded\"===e.eventStatus)){m(`${Se} Consent status`,e.eventStatus),ye(ge.CMP_RESPONSE_AVAILABLE);const i=function(e){if(!e.purpose.consents||0===Object.keys(e.purpose.consents).length)return!1;for(const t in e.purpose.consents)if(!e.purpose.consents[t])return!1;return!0}(e);t(i)}}))}(e,t)}catch(e){v(`${Se} Error while loading tcf api`,e),i(e)}})).catch((e=>{v(`${Se} Error while loading tcf api`,e),i(e)}));var n}(e,t,i)}))}function we(e,t,i){const n=e.__tcfapi;n&&function(e){if(\"function\"!=typeof e)throw new Error(\"__tcfapi is not a function\");return!0}(n)?t():setTimeout((()=>we(e,t)),100)}const Ee=\"[context]\";function Te(e){return e.map((e=>({key:e.key.toLowerCase(),defaultValue:e.defaultValue?e.defaultValue.toLowerCase():void 0,otherValues:e.otherValues?e.otherValues.map((e=>e.toLowerCase())):[]})))}function $e(e,t,i){(function(e,t,i){const n=[],s=Te(t).filter((e=>void 0!==e.defaultValue)).map((e=>e.key.toLowerCase())),a=[];e.document.querySelectorAll('meta[name^=\"pbstck_context:\"]').forEach((e=>{const t=e.attributes.getNamedItem(\"name\")?.value.substring(15).toLowerCase();t&&a.push(t)}));for(const e of i)s.includes(e)&&!a.includes(e)&&n.push(e);return n})(e,t,i).forEach((e=>{b(`[context] Missing ${e} context key used in adunit path`)}))}const _e={pbjsFinished:!1,apsFinished:!1},Re=\"[executor] [instream]\";class Oe{constructor(e,t,i,n){this.rank=1,this.adServer=e,this.pbjs=t,this.aps=i,this.kleanadsRunCount=n}executeAdCallRoadblock(e){this.executeAdCall(e)}executeAdCall(e){if(0===e.length)return void b(`${Re} no adunit to monetize`);e.length>1&&b(`cannot monetize multiple instream adunits, using only the first one ${e[0].divId}`);const t=e[0];this.adServer.declareAdUnit(t),this.adUnitAuctionStatus?b(`${Re} cannot make a new ad call, existing one on ${t.divId}.`):(p(`${Re} executeAdCall for adunit`,t),this.startAuction(t))}executeRefresh(e){this.adServer.cleanTargetings();const t={labels:[\"pubstackRefresh\",`pubstackRefreshRank:${e.rank}`]};this.startAuction(e.adUnit,t)}startAuction(e,t){this.adUnitAuctionStatus=_e,Ie(e.divId,pe.START_AUCTION),p(`${Re} starting auctions for ${e.divId}`);const i=te.getInstance().kleanadsRunCount;if(this.pbjs){const n=this.pbjs.getPbjs();this.pbjs.startPbjsAuction([e],(()=>{this.kleanadsRunCount===i?this.pbjsFinished(n,e):p(`${Re} kleanads run count has changed (from ${this.kleanadsRunCount} to ${i}), avoid calling pbjsFinished`)}),t)}this.aps&&this.aps.startApsAuction([e],(t=>{this.kleanadsRunCount===i?this.apsFinished(e,t):p(`${Re} kleanads run count has changed (from ${this.kleanadsRunCount} to ${i}), avoid calling apsFinished`)})),this.pbjs||this.aps||this.adServer.executeWhenAdServerReady((()=>{this.kleanadsRunCount===i?this.callAdServer(e):p(`${Re} kleanads run count has changed (from ${this.kleanadsRunCount} to ${i}), avoid calling AdServer`)}))}isAlreadyMonetized(){return!!this.adUnitAuctionStatus}pbjsFinished(e,t){p(`${Re} pbjs end callback for ${t.divId}`,e.getAllPrebidWinningBids()),Ie(t.divId,pe.END_PBJS_AUCTION),this.adServer.executeWhenAdServerReady((()=>{p(`${Re} pbjs end callback ad server ready ${t.divId}`),this.adServer.setPbjsTargetings(e,t),this.adUnitAuctionStatus&&(this.adUnitAuctionStatus.pbjsFinished=!0),this.canCallAdServer()&&this.callAdServer(t)}))}apsFinished(e,t){p(`${Re} aps end callback ${e.divId}`,t),Ie(e.divId,pe.END_APS_AUCTION),this.adServer.executeWhenAdServerReady((()=>{p(`${Re} aps end callback ad server ready ${e.divId}`),this.adServer.setApsTargetings(t),this.adUnitAuctionStatus&&(this.adUnitAuctionStatus.apsFinished=!0),this.canCallAdServer()&&this.callAdServer(e)}))}canCallAdServer(){const e=this.adUnitAuctionStatus;return this.aps&&!this.pbjs?e&&e.apsFinished:this.pbjs&&!this.aps?e&&e.pbjsFinished:this.pbjs&&this.aps?e&&e.apsFinished&&e.pbjsFinished:void 0}callAdServer(e){Ie(e.divId,pe.START_AD_SERVER_CALL),this.adServer.callAdServer(e,(()=>{p(`${Re} onCallFinished called, adding setTimeout to a new auction`),setTimeout((()=>{this.executeRefresh({adUnit:e,rank:this.rank}),this.rank++}),5e3)})),p(`${Re} ad server called ${e.divId}`)}}const Ue=\"[ExternalApi-AdServer]\";class Pe{constructor(e,t,i){this.callbacks={},this.pbjsRecords={},this.apsRecords={},this.knownAdUnits=[],this.pubstackWindow=e,this.pageContext=t,this.device=i}init(e,t,i,n){}prebidReady(e){}declareAdUnits(e){return this.knownAdUnits.push(...e.map((e=>e.divId))),Promise.resolve()}clean(){this.knownAdUnits=[],this.callbacks={},this.pbjsRecords={},this.apsRecords={}}registerExternalTargetingDeclaration(e){}addCallback(e,t){return!!this.knownAdUnits.includes(e)&&(p(`${Ue} addCallback - params`,e,t),this.callbacks[e]=t,this.pbjsRecords[e]={},this.apsRecords[e]={},!0)}callAdServer(e){p(`${Ue} callAdServer - START`),e.filter((e=>this.knownAdUnits.includes(e.divId))).forEach((e=>{try{p(`${Ue} callAdServer - inside forEach, run provided callback for divId:${e.divId}`);const i=function(e,i,n,s){const a={};n.forEach(((e,t)=>{e&&(a[t]=e)}));const r=k(i);Object.keys(r).forEach((e=>{a[e]=r[e].join(\",\")})),a[t]=\"1\",a.device=s;const o=te.getInstance().grapeshotValues;o?.length&&(a.gs_cat=o.join(\",\"));e.getTargetings().forEach((e=>{a[e.key]=R(e)}));try{const e=JSON.parse(i.localStorage._pdfps).slice(0,250).join(\",\");\"\"!==e?a.permutive=e:p(`[${Ue}] no permutive targeting found`)}catch(e){p(`[${Ue}] error reading permutive targeting, ${e}`)}return a}(e,this.pubstackWindow,this.pageContext,this.device);this.callbacks[e.divId]({...i,...this.pbjsRecords[e.divId],...this.apsRecords[e.divId]})}catch(e){v(`${Ue} error calling callback, ${e}`)}p(`${Ue} callAdServer - inside forEach, run test callback`)})),p(`${Ue} callAdServer - END`)}executeWhenAdServerReady(e){e()}setPbjsTargetings(e,t){e?(m(`${Ue} try to put pbjs targeting keys for ${t.map((e=>e.divId)).join(\",\")}`),t.forEach((t=>{if(this.pbjsRecords[t.divId]){const i=e.getAdserverTargetingForAdUnitCode(t.divId);for(const[e,n]of Object.entries(i))\"string\"==typeof n&&(this.pbjsRecords[t.divId][e]=n)}}))):v(`${Ue} no pbjs given: unable to put header bidding targetings`)}setApsTargetings(e,t){m(`${Ue} putting targeting keys for aps auction`,t),e.forEach((e=>{if(this.apsRecords[e.divId]){const i=t.find((t=>t.slotID===e.divId));if(i&&i.targeting)for(const[t,n]of Object.entries(i.targeting))\"string\"==typeof n&&(this.apsRecords[e.divId][t]=n)}}))}}let Le=4400;const xe=\"[APS]\";let Ne=!1,De=!1;function je(e){const t=e.apstag;if(t.kleanadsBlocker){p(`${xe} getting apstag from blocker's methods`);const e=t;return{...t,fetchBids:e.fetchBidsKleanads,setDisplayBids:e.setDisplayBidsKleanads}}return t}class Be{constructor(e,t){this.pubstackWindow=e,this.apsPubId=t}setEnableApsForTests(e){!function(e){v(`${xe} this function should be used only for testing purpose`),Ne=e}(e)}load(){!function(e){function t(t,i){je(e)?._Q?.push([t,i])}Ne=!0,e.apstag||(e.apstag={_Q:[]}),e.apstag.init=(...e)=>t(\"i\",e),e.apstag.fetchBids=(...e)=>t(\"f\",e),e.apstag.setDisplayBids=()=>{},e.apstag.targetingKeys=()=>[],K(\"//c.amazon-adsystem.com/aax2/apstag.js\")}(this.pubstackWindow)}startApsAuction(e,t){if(!Ne)return p(`${xe} skipping auction for adunits [${e.map((e=>e.divId)).join(\",\")}]`),void t([]);if(!De)return b(`${xe} cannot start auction: apstag is not initialized`),void t([]);const i=je(this.pubstackWindow);if(!i)return b(`${xe} cannot find apstag on the page`),void t([]);const n=function(e){return e.filter((e=>e.headerBiddingEnabled)).reduce(((e,t)=>{const i=t.mediaTypes;if(i.includes(\"Instream\")){const t={slotID:\"videoSlot\",mediaType:\"video\",sizes:[[640,480]]};return[...e,t]}if(T(t)){const i={slotID:t.divId,slotName:t.slotName,sizes:t.bannerSizes};return i.sizes.length?[...e,i]:e}if(i.includes(\"Outstream\")){const i={slotID:t.divId,mediaType:\"video\",sizes:[[640,480]]};return[...e,i]}return[]}),[])}(e);if(0===n.length)return m(`${xe} no slot created, not calling fetchbids`,n),void t([]);m(`${xe} apsSlots created`,n);let s=!1;setTimeout((()=>{s||(b(`${xe} fetchbids did not response before ${Le}ms, calling callback`),s=!0,t([]))}),Le),i.fetchBids({slots:n},(e=>{s||(s=!0,t(e))})),p(`${xe} called fetchBids`,n)}initAps(e,t){if(Ne){Le=e+1400,m(`${xe} configuring failsafe timeout to ${Le}`);const i=je(this.pubstackWindow);if(!i)return void b(`${xe} cannot find apstag on the page`);const n=t?.config;i.init({pubID:this.apsPubId,adServer:\"googletag\",bidTimeout:e,deals:!0,videoAdServer:\"DFP\",schain:n},(()=>{m(`${xe} apstag init done`),ye(ge.APSTAG_READY)})),De=!0}else p(`${xe} apstag init skipped`)}}function Me(e,t,i,n=(()=>!0)){return new Promise(((s,a)=>Ve(e,t,i,s,a,n)))}function Ve(e,t,i,n,s,a){if(e[t])try{a(e[t])?n():setTimeout((()=>Ve(e,t,i,n,s,a)),i)}catch(e){s(e)}else setTimeout((()=>Ve(e,t,i,n,s,a)),i)}const We=\"[GAM]\",ze=\"pbstck_ab_test\",Fe=\"xp_variant\",He=[3,1];let Ge=!1;const Ke=[],qe=50;function Ye(e,i,n,s,a){(function(e){return Me(e,\"googletag\",qe,(e=>e.apiReady??!1))})(e).then((()=>{p(`${We} googletag ready, starting initialization`),e.googletag.pubads().disableInitialLoad(),s?.disableSingleRequest?m(`${We} single request disabled`):e.googletag.pubads().enableSingleRequest()||v(\"unable to enable single request\"),function(e,i,n){const s=e.googletag.pubads();i.forEach(((e,t)=>{e&&s.setTargeting(t,e)}));const a=k(e);m(\"[targetings] setting page level targetings from meta declaration\",a),Object.keys(a).forEach((e=>{s.setTargeting(e,a[e])})),s.setTargeting(t,\"1\");const r=te.getInstance().grapeshotValues;r?.length&&(m(`${We} grapeshot: setting gs_cat gam targeting values`,r),s.setTargeting(\"gs_cat\",r));const o=n?.filter((e=>e.gamTargeting));o?.length&&(m(`${We} setting ab_test gam targeting values`,o),o.forEach((e=>{s.setTargeting(e.name,e.value)})));if(te.getInstance().uprTested){m(`${We} setting xp_variant/pbstck_ab_test gam targeting value any previous value will be ignored`);const e=`floor_optimization:${te.getInstance().uprEnabled}`;s.setTargeting(Fe,e),s.setTargeting(ze,e)}}(e,i,a),s&&s.ppidValue&&e.googletag.pubads().setPublisherProvidedId(s.ppidValue),s&&s?.threadYieldConfig&&e.googletag.setConfig({threadYield:s.threadYieldConfig}),e.googletag.enableServices(),n?.lazyLoadingGoogle?.googleFetchMarginPercent&&n?.lazyLoadingGoogle?.googleRenderMarginPercent&&e.googletag.pubads().enableLazyLoad({fetchMarginPercent:n.lazyLoadingGoogle.googleFetchMarginPercent,renderMarginPercent:n.lazyLoadingGoogle.googleRenderMarginPercent,mobileScaling:n.lazyLoadingGoogle.googleMobileScaling}),e.googletag.pubads().setCentering(!0),p(\"googletag initialized\"),Ge=!0,Ke.forEach((e=>e())),ye(ge.GOOGLETAG_READY),m(\"GAM\",\"googletag slotRenderEnded listener added\"),e.googletag.pubads().addEventListener(\"slotRenderEnded\",Xe),e.googletag.pubads().addEventListener(\"slotResponseReceived\",Je)}))}const Xe=e=>{const t=e.slot,i=t.getSlotElementId();Ie(i,pe.SLOT_RENDER_ENDED_TIME),function(e,t){ae(t,ie),ae(t,ne),m(`removed price rule targetings (${ne} & ${ie}) from slot ${e}`)}(i,t),m(`slot render ended for ${i}`)},Je=e=>{const t=e.slot.getSlotElementId();m(`slot response received for ${t}`),Ie(t,pe.SLOT_RESPONSE_RECEIVED_TIME)};function Qe(e,t){for(const i of e.getTargetings()){const n=O(i),s=i.key;t.setTargeting(s,n),m(`${We} adding targeting (${s}, ${n}) to adunit ${e.divId}`)}t.setTargeting(\"ad_adunitname\",[e.adServerAdUnitName])}function Ze(e){Ge?e():Ke.push(e)}class et{constructor(e,t){this.externalTargetingDeclarations=[],this.googletagSlotsInitialized={},this.pubstackWindow=e,this.prebidOrderIds=t}prebidReady(){}init(e,t,i,n){Ye(this.pubstackWindow,e,t,i,n)}declareAdUnits(e){return this.declareGoogleSlots(e)}registerExternalTargetingDeclaration(e){this.externalTargetingDeclarations.push(e)}clean(){this.externalTargetingDeclarations=[],this.executeWhenAdServerReady((()=>{p(`${We} cleaning slots`,this.pubstackWindow.googletag.pubads().getSlots().map((e=>e.getSlotElementId())),this.pubstackWindow.googletag.pubads().getSlots());const e=[];this.pubstackWindow.googletag.pubads().getSlots().forEach((t=>{const i=this.pubstackWindow.googletag.destroySlots([t]);m(`${We} slot ${t.getSlotElementId()} destroyed ? ${i}`),i||(e.push(t),p(`${We} slot ${t.getSlotElementId()} not destroyed, retrying later`))})),e.length?v(`${We} unable to destroy slot ${tt(e)}`):m(`${We} all slots destroyed`),this.pubstackWindow.googletag.pubads().removeEventListener(\"slotRenderEnded\",Xe),this.pubstackWindow.googletag.pubads().removeEventListener(\"slotResponseReceived\",Je),Ke.splice(0)}))}setPbjsTargetings(e,t){e?(m(`${We} try to put pbjs targeting keys for ${t.map((e=>e.divId)).join(\",\")}`),t.forEach((t=>{const i=this.getSlot(t,\"setPbjsTargetings\");i&&function(e,t,i){i.getTargetingKeys().forEach((e=>{\"bid_\"!==e.substring(0,4)&&\"hb_\"!==e.substring(0,3)||i.clearTargeting(e)}));const n=t.getAdserverTargetingForAdUnitCode(e.divId);for(const t of Object.keys(n)){const s=n[t];se(s)?i.setTargeting(t,s):b(`[targeting] unable to set targeting ${t}=${s} on adUnit ${e.divId}`)}i.setTargeting(\"kuc_version\",\"2503171622\")}(t,e,i)}))):v(`${We} no pbjs given: unable to put header bidding targetings`)}setApsTargetings(e,t){var i;m(`${We} putting targeting keys for aps auction`,t),i=this.pubstackWindow,je(i)?.setDisplayBids()}setRefreshTargeting(e){const t=this.getSlot(e.adUnit,\"setPbjsTargetings\");var i,n;t&&(i=t,n=e.rank,i.setTargeting(\"ad_refresh\",\"1\"),i.setTargeting(\"pbstck_refresh\",\"1\"),i.setTargeting(\"ad_refresh-rank\",function(e){return e<10?`${e}`:\"10-more\"}(n)))}callAdServer(e){m(`${We} preparing call to GAM for ${e.map((e=>e.divId)).join(\",\")}`,e);const t=this.pubstackWindow.googletag.pubads().getSlots(),i=e.map((e=>({adUnit:e,slot:t.find((t=>t.getSlotElementId()===e.divId))}))).filter((e=>!!e.slot));i.forEach((({adUnit:e,slot:t})=>Qe(e,t)));const n=i.map((({slot:e})=>e));p(`${We} calling GAM with ${n.length} slots`,tt(n)),A(\"googletag:refresh\",{slotIds:n.map((e=>e.getSlotElementId()))}),this.refresh(n)}refresh(e){e.every((e=>this.googletagSlotsInitialized[e.getSlotElementId()]))?this.pubstackWindow.googletag.pubads().refresh(e):setTimeout((()=>this.refresh(e)),50)}executeWhenAdServerReady(e){Ge?e():Ke.push(e)}renderListener(e){Ze((()=>{this.renderListenerCallback=t=>{const i=t.slot,n=t.campaignId,s={divId:i.getSlotElementId(),creativeId:t.creativeId,lineItemId:t.lineItemId??t.sourceAgnosticLineItemId,orderId:n,size:it(t),isEmpty:t.isEmpty,advertiserId:t.advertiserId};if(n&&this.prebidOrderIds.includes(n)){const e=i.getTargeting(re);e&&(s.hb_bidder=Array.isArray(e)?e[0]:e);const t=i.getTargeting(oe);t&&t[0]&&(s.size=X(t[0]));const n=i.getTargeting(de);n&&(s.hb_mediaType=Array.isArray(n)?n[0]:n)}e(s)},this.pubstackWindow.googletag.pubads().addEventListener(\"slotRenderEnded\",this.renderListenerCallback)}))}removeRenderListener(){this.renderListenerCallback&&(m(\"GAM\",\"removing render listener\"),this.pubstackWindow.googletag.pubads().removeEventListener(\"slotRenderEnded\",this.renderListenerCallback))}getSlot(e,t){const i=this.pubstackWindow.googletag.pubads().getSlots().filter((t=>t.getSlotElementId()===e.divId));if(0!==i.length)return i.length>1&&v(`${We} multiple slot found for adunit ${e.divId} on operation ${t}`),i[0];v(`${We} slot not found for adunit ${e.divId} on operation ${t}`)}declareGoogleSlots(e){return new Promise((t=>{Ze((()=>{const i=e.sort(ee),n=[],s=[];i.forEach((e=>{if(\"interstitial\"===e.outOfPageType){const t=window.googletag.defineOutOfPageSlot(e.adUnitPath,googletag.enums.OutOfPageFormat.INTERSTITIAL);t?(t.addService(googletag.pubads()),n.push(t),s.push(t),Qe(e,t)):v(`${We} unable to create interstitial slot for ${e.divId}`)}else if(document.getElementById(e.divId)){let t;if(\"default\"===e.outOfPageType)t=window.googletag.defineOutOfPageSlot(e.adUnitPath,e.divId)?.addService(googletag.pubads());else{const i=[He,...e.bannerSizes??[],...e.extraAdServerSizes??[]];$(e)&&i.push([1800,1e3]),t=window.googletag.defineSlot(e.adUnitPath,i,e.divId)?.addService(googletag.pubads())}t?(m(`${We} slot created, displaying ${e.divId}`),googletag.display(e.divId),s.push(t)):v(`${We} unable to create slot for ${e.divId}`)}else m(`${We} unable to display ${e.divId}, the div does not exist`)}));const a=s.map((e=>`\\n${e.getSlotElementId()} (${e.getAdUnitPath()})`)).join();if(p(`${We} slots defined for ${a}`),n.forEach((e=>{m(`${We} calling googletag.display for interstitial slot`,e),googletag.display(e)})),n.length>0&&googletag.pubads().refresh(n),this.externalTargetingDeclarations.length>0){const e=performance.now();let i;const n=new Promise((e=>{i=setTimeout((()=>{b(`${We} failsafe promise for external targeting declarations, some targetings may be missing`),e()}),3e3)}));Promise.race([Promise.all(this.externalTargetingDeclarations.map((e=>e(s)))).then((()=>{i&&clearTimeout(i)})),n]).then((()=>{const i=performance.now();m(`${We} external targetings declarations took ${i-e}ms`),s.forEach((e=>{this.googletagSlotsInitialized[e.getSlotElementId()]=!0})),t()}))}else s.forEach((e=>{this.googletagSlotsInitialized[e.getSlotElementId()]=!0})),t()}))}))}}function tt(e){return e.map((e=>`{id:${e.getSlotElementId()},path:${e.getAdUnitPath()}}`)).toString()}function it(e){return e.size}const nt=\"[instream] [Dailymotion]\";class st{constructor(e,t,i){this.dmIsInitialized=!1,this.dmInitializedQueue=[],this.declaredAdUnit=new Map,this.renderCallbacks=[],this.pubstackWindow=e,this.pageContext=t,this.device=i}renderListener(e){this.renderCallbacks.push(e)}removeRenderListener(){}setRefreshTargeting(){}init(){(function(e){return Me(e,\"dailymotion\",50)})(this.pubstackWindow).then((()=>{this.dmIsInitialized=!0,this.dmInitializedQueue.forEach((e=>e())),this.dmInitializedQueue=[]}))}prebidReady(){}clean(){this.declaredAdUnit.forEach((e=>e.cleanTargetings())),this.declaredAdUnit.clear()}registerExternalTargetingDeclaration(){}async declareAdUnits(e){for(const t of e)if(this.declaredAdUnit.has(t.divId))b(`${nt} ${t.divId} already declared`);else if(E(t)){const e=new dt(t,this.device,this.pubstackWindow);this.declaredAdUnit.set(t.divId,e),this.executeWhenAdServerReady((()=>{e.prepareAdUnit(),e.onImpression((()=>{this.renderCallbacks.forEach((e=>e({divId:t.divId,size:null,lineItemId:null,orderId:null,isEmpty:!1,advertiserId:null})))}))}))}else b(`${nt} ${t.divId} is not an Instream ad unit`)}setApsTargetings(e,t){if(0===t.length)return;const i=e.map((e=>this.declaredAdUnit.get(e.divId))).filter((e=>void 0!==e));p(`${nt} putting targeting keys for aps auction of winning bidder`,t[0]);try{const e=t[0].helpers?.qsParams();if(e)return void i.forEach((t=>t.pushTargeting(e.slice(1))));const n=t[0].qsParams;if(n)return void i.forEach((e=>e.pushTargeting(n.slice(1))))}catch(e){v(`${nt} error setting APS targetings`,e)}}executeWhenAdServerReady(e){this.dmIsInitialized?e():this.dmInitializedQueue.push(e)}async callAdServer(e){for(const t of e){const e=this.declaredAdUnit.get(t.divId);e?await e.callAdServer(this.pageContext):v(`${nt} no handler found for ${t.divId}`)}}setPbjsTargetings(e,t){if(e)for(const i of t){const t=this.declaredAdUnit.get(i.divId);if(t){p(`${nt} put pbjs targeting keys for ${i.divId}`);const n=e.getAdserverTargetingForAdUnitCode(i.divId);for(const e of Object.keys(n)){const s=n[e];se(s)?t.pushTargeting(`${e}=${s}`):b(`${nt} [targeting] unable to set targeting ${e}=${s} on adUnit ${i}`)}}else v(`${nt} no handler found for ${i.divId}`)}else v(`${nt} no pbjs given: unable to put header bidding targetings`)}cleanTargetings(){this.declaredAdUnit.forEach((e=>e.cleanTargetings()))}}function at(e){const t=O(e);return`${e.key}=${\"string\"==typeof t?t:t.join(\",\")}`}function rt(e,t,i,n){const s=function(e){return e.getTargetings().map(at)}(e);p(`${nt} adUnitTargetings`,s);const a=Array.from(i.entries()).filter((([,e])=>!!e)).map((([e,t])=>`${e}=${t}`)),r=s.concat(t).concat(a).join(\"&\"),o={...e.instreamParams.vast,vpmute:n.playerIsMuted?1:0},d=Object.keys(o).map((function(e){return`${e}=${o[e]}`})).join(\"&\"),c=e.instreamParams?.adDeactivationContext;let l=!1;if(c){const e=i.get(c.key);l=!!e&&c.values.includes(e)}const u={dynamiciu:e.adUnitPath,keyvalues:r,keyvalues2:d};return l?{...u,premium:\"true\"}:u}function ot(e,i){const n=[],s=k(i);Object.keys(s).forEach((e=>{const t=s[e].join(\",\");n.push(`${e}=${t}`)})),n.push(`${t}=1`),n.push(`device=${e}`);const a=te.getInstance().grapeshotValues;a?.length&&n.push(`gs_cat=${a.join(\",\")}`);try{const e=JSON.parse(i.localStorage._pdfps).slice(0,250).join(\",\");\"\"!==e?n.push(`permutive=${e}`):p(`[${nt}] no permutive targeting found`)}catch(e){p(`[${nt}] error reading permutive targeting, ${e}`)}return n}class dt{constructor(e,t,i){this.targetings=[],this.configSetOnce=!1,this.adReadyToFetchReceivedOnce=!1,this.adReadyToFetchCallback=()=>{},this.impressionCallbacks=[],this.adUnit=e,this.device=t,this.pubstackWindow=i,this.targetings=ot(t,i)}pushTargeting(e){this.targetings.push(e)}async callAdServer(e){const t=this.adUnit.divId;p(`${nt} ${t} call ad server`);const i=await(this.pubstackWindow.dailymotion?.getPlayer(t));if(!i)return void v(`${nt} no player found for ${t}`);p(`${nt} ${t} player:`,i);const n=await i.getState();this.customConfig=rt(this.adUnit,this.targetings,e,n),p(`${nt} generated customConfig for ${t}`,this.customConfig),!this.configSetOnce&&this.adReadyToFetchReceivedOnce?(p(`${nt} ${t} event AD_READYTOFETCH already received, setting customConfig\"`,this.customConfig),this.customConfig&&(i.setCustomConfig(this.customConfig),this.configSetOnce=!0)):this.adReadyToFetchCallback=()=>{p(`${nt} ${t} event AD_READYTOFETCH callback, setting customConfig\"`,this.customConfig),this.customConfig&&i.setCustomConfig(this.customConfig)}}prepareAdUnit(){const e=this.pubstackWindow.dailymotion;e?e.getPlayer(this.adUnit.divId).then((e=>{e.on(this.pubstackWindow.dailymotion?.events.AD_READYTOFETCH,(()=>{p(`${nt} ${this.adUnit.divId} event AD_READYTOFETCH received`),this.adReadyToFetchReceivedOnce||(this.adReadyToFetchReceivedOnce=!0),this.adReadyToFetchCallback()})),e.on(this.pubstackWindow.dailymotion?.events.AD_IMPRESSION,(()=>{this.impressionEvent()}))})):v(`${nt} unable to get dailymotion on the page`)}cleanTargetings(){this.targetings.splice(0),this.targetings.push(...ot(this.device,this.pubstackWindow))}impressionEvent(){this.impressionCallbacks.forEach((e=>e()))}onImpression(e){this.impressionCallbacks.push(e)}}const ct=\"[Local-AdServer]\";class lt{constructor(){this.managedDivs=[],this.callbacks=[]}prebidReady(e){this.pbjs=e}callAdServer(e){this.pbjs?(p(`${ct} callAdServer`,e),e.forEach((e=>{if(this.managedDivs.includes(e.divId)){const t=this.pbjs.getHighestCpmBids(e.divId);if(t.length>0){const e=t[0];try{!function(e,t){if(p(`${ct} renderOne`,t),!t||!t.adId)throw new Error(`${ct} no winning bid or adId provided ${t}`);{const i=document.getElementById(t.adUnitCode);if(!i)throw new Error(`${ct} unable to find div ${t.adUnitCode}`);{const n=i.getElementsByTagName(\"iframe\");p(`${ct} found ${n.length} iframe to remove`),Array.from(n).forEach((e=>e.remove()));const s=document.createElement(\"iframe\");s.scrolling=\"no\",s.frameBorder=\"0\",s.marginHeight=\"0\",s.name=`prebid_ads_iframe_${t.adUnitCode}`,s.title=\"3rd party ad content\",s.sandbox?.add(\"allow-forms\",\"allow-popups\",\"allow-popups-to-escape-sandbox\",\"allow-same-origin\",\"allow-scripts\",\"allow-top-navigation-by-user-activation\"),s.setAttribute(\"aria-label\",\"Advertisment\"),s.style.setProperty(\"border\",\"0\"),s.style.setProperty(\"margin\",\"0\"),s.style.setProperty(\"overflow\",\"hidden\"),i.appendChild(s);const a=s.contentWindow?.document;if(!a)throw new Error(`${ct} error while getting document from iframe`);{e.renderAd(a,t.adId);const i=\"/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */button,hr,input{overflow:visible}progress,sub,sup{vertical-align:baseline}[type=checkbox],[type=radio],legend{box-sizing:border-box;padding:0}html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}details,main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:ButtonText dotted 1px}fieldset{padding:.35em .75em .625em}legend{color:inherit;display:table;max-width:100%;white-space:normal}textarea{overflow:auto}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}[hidden],template{display:none}\",n=a.createElement(\"style\");n.appendChild(a.createTextNode(i)),a.head.appendChild(n)}}}}(this.pbjs,e);const t={divId:e.adUnitCode,isEmpty:!1,hb_bidder:e.adserverTargeting.bid_bidder,hb_mediaType:e.adserverTargeting.bid_mediatype,size:e.adserverTargeting.bid_size?X(e.adserverTargeting.bid_size):null,advertiserId:null,lineItemId:null,orderId:null,creativeId:null};this.renderListenerCallback(t)}catch(e){v(`${ct} unable to render: ${e}`)}}else{const t={divId:e.divId,isEmpty:!0,size:null,advertiserId:null,lineItemId:null,orderId:null,creativeId:null};this.renderListenerCallback(t)}}}))):v(`${ct} pbjs is not available`)}clean(){p(`${ct} cleanAdUnits - START`),this.managedDivs.forEach((e=>{const t=document.getElementById(e);if(t){const e=t.getElementsByTagName(\"iframe\");p(`${ct} found ${e.length} iframe to remove`),Array.from(e).forEach((e=>e.remove()))}})),this.managedDivs=[],p(`${ct} cleanAdUnits - END`,this.managedDivs)}declareAdUnits(e){return p(`${ct} declareAdUnits (adUnits, managedDivs)`,e,this.managedDivs),e.forEach((e=>{this.managedDivs.includes(e.divId)?v(`${ct} adUnit already declared ${e.divId}`):this.managedDivs.push(e.divId)})),Promise.resolve(void 0)}executeWhenAdServerReady(e){p(`${ct} executeWhenAdServerReady`,e),e()}init(e,t,i,n){p(`${ct} init (nothing to do), this are the input params:`,e,t,i,n)}removeRenderListener(){p(`${ct} removeRenderListener`),this.callbacks=[]}renderListenerCallback(e){p(`${ct} renderListenerCallback called event:`,e),this.callbacks.forEach((t=>t(e)))}renderListener(e){p(`${ct} renderListener`,e),this.callbacks.push(e)}setApsTargetings(){}setPbjsTargetings(){}setRefreshTargeting(){}registerExternalTargetingDeclaration(){}}function ut(e,t,i,n){navigator.sendBeacon(`https://intake.pbstck.com/v1/intake/gam-impression?sId=${t}&tId=${e}&c=1&s=${n}&v=${i}`)}class ht{constructor(){this.name=\"AdServer\",this.scriptLoaded=!1}get adServer(){return this._adServer}get instreamAdServer(){return this._instreamAdServer}get externalApiAdServer(){return this._externalApiAdServer}async onAfterConsentRefused({config:e}){if(!this._adServer)switch(e.consentlessMode){case\"GAM\":this._adServer=new et(window,e.globalRefreshConfig?.prebidOrderIds||[]),this._adServer.renderListener((t=>{t.isEmpty||ut(e.tagId,e.stack.scopeId,e.kleanadsVersion,e.stackVersion)})),this.scriptLoaded||(K(\"https://pagead2.googlesyndication.com/tag/js/gpt.js\"),this.scriptLoaded=!0);break;case\"local\":this._adServer=new lt;break;default:p(\"AdServerModule - onAfterConsentRefused - no ad server configured for consentless\")}}async onAfterConsentAccepted({config:e}){this._adServer||(this._adServer=new et(window,e.globalRefreshConfig?.prebidOrderIds||[]),this._adServer.renderListener((t=>{t.isEmpty||ut(e.tagId,e.stack.scopeId,e.kleanadsVersion,e.stackVersion)})),this.scriptLoaded||(K(\"https://securepubads.g.doubleclick.net/tag/js/gpt.js\"),this.scriptLoaded=!0))}async onStackConfigLoad({config:e,stackConfig:t}){!this._externalApiAdServer&&t.adUnits.some((e=>e.externalAdServer))&&(this._externalApiAdServer=new Pe(window,e.pageContext,e.device)),this._adServer?(this._adServer.init(e.pageContext,t.lazyLoading,t.gamConfig,t.runningABTest),\"dailymotion-v3\"===e.instreamType&&t.adUnits.find((e=>e.isInstream))&&(this._instreamAdServer=new st(window,e.pageContext,e.device),this._instreamAdServer.init(e.pageContext,t.lazyLoading,t.gamConfig,t.runningABTest))):v(\"AdServerModule - onStackConfigLoad - no ad server configured\")}async onPrepareAdUnits({toPreparedAdUnits:e}){const t=(e??[]).filter((e=>!e.externalAdServer)),i=t.filter((e=>!e.mediaTypes.includes(\"Instream\"))),n=t.filter((e=>e.mediaTypes.includes(\"Instream\"))),s=(e??[]).filter((e=>e.externalAdServer));return this._externalApiAdServer?.declareAdUnits(s),this._instreamAdServer&&n.length>0?Promise.all([this._instreamAdServer.declareAdUnits(n),this._adServer?.declareAdUnits(i)]).then((()=>{})):this._adServer?.declareAdUnits(i)}async onAfterPrebidReady({prebid:e}){const t=e.getPbjs();this._adServer?this._adServer.prebidReady(t):v(\"AdServerModule - onAfterPrebidReady - no ad server configured\")}async clean(){this._externalApiAdServer?.clean(),this._adServer?this._adServer.clean():v(\"AdServerModule - clean - no ad server configured\")}}class gt{constructor(){this.name=\"Aps\"}get aps(){return this._aps}async onStackConfigLoadSync({stackConfig:e}){this._aps=function(e,t){if(e&&t.some((e=>e.headerBiddingEnabled&&(e.isInstream||e.canOutstream||e.sizes.some((e=>\"fluid\"!==e)))))){p(`${xe} downloading amazon apstag`);const t=new Be(window,e);return t.load(),t}}(e.tamConfig?.apsPubId,e.adUnits)}async onStackConfigLoad({config:e,stackConfig:t}){const i=t.tamConfig?.disableSchain,n=i?void 0:t.prebidConfig?.pbjsConfig.schain;this._aps?.initAps(t.prebidConfig?.adCallTimeout??e.adCallTimeout,n)}async clean(){}}const ft=\"[ModuleService]\";class pt{constructor(e,t){this.modules=t,this.lifecycleState={config:e},m(`${ft} ${t.length} modules registered: ${t.map((e=>e.name)).join(\", \")}`);const i=this.modules.filter((e=>!!e.load));m(`${ft} Loading modules, ${i.length} modules to load`),this.loadModules(i)}getModules(){return this.modules}getLoadedModuleInstance(e){return this.modules.find((t=>t instanceof e))}loadModules(e){e.length&&m(`${ft} Loading modules: ${e.map((e=>e.name)).join(\", \")}`);for(const t of e)try{t.load?.(this.lifecycleState)}catch(e){v(`${ft} Error while loading module ${t.name}`,e)}}async modulesDispatchEvent(e,...t){this.lifecycleState={...this.lifecycleState,...t[0]};const i=this.lifecycleState,n=this.modules.filter((t=>t[e]&&\"function\"==typeof t[e]||t[`${e}Sync`]&&\"function\"==typeof t[`${e}Sync`]));m(`${ft} event call: ${e}. ${n.map((e=>e.name)).join(\", \")}`);const s=[];for(const t of n){const n=t[`${e}Sync`]?.(i);n instanceof Promise&&s.push(n)}return await Promise.all(s),new Promise((t=>{const s=[];for(const t of n){const n=t[e]?.(i);n instanceof Promise&&s.push(n)}t(s)}))}async modulesCleanUp(){const e=this.modules;e.length&&m(`${ft} Cleaning modules: ${e.map((e=>e.name)).join(\", \")}`);for(const t of e)await t.clean(this.lifecycleState);this.modules=[]}}const mt=[];for(let e=0;e<256;++e)mt.push((e+256).toString(16).slice(1));let bt;const vt=new Uint8Array(16);var yt={randomUUID:\"undefined\"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function At(e,t,i){if(yt.randomUUID&&!e)return yt.randomUUID();const n=(e=e||{}).random??e.rng?.()??function(){if(!bt){if(\"undefined\"==typeof crypto||!crypto.getRandomValues)throw new Error(\"crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\");bt=crypto.getRandomValues.bind(crypto)}return bt(vt)}();if(n.length<16)throw new Error(\"Random bytes length must be >= 16\");return n[6]=15&n[6]|64,n[8]=63&n[8]|128,function(e,t=0){return(mt[e[t+0]]+mt[e[t+1]]+mt[e[t+2]]+mt[e[t+3]]+\"-\"+mt[e[t+4]]+mt[e[t+5]]+\"-\"+mt[e[t+6]]+mt[e[t+7]]+\"-\"+mt[e[t+8]]+mt[e[t+9]]+\"-\"+mt[e[t+10]]+mt[e[t+11]]+mt[e[t+12]]+mt[e[t+13]]+mt[e[t+14]]+mt[e[t+15]]).toLowerCase()}(n)}const It=\"[pbjs][initPbjs][sublime]\";function Ct(e,t){const i=function(e,t){const i=e.filter((e=>e.bidders.find((e=>kt(e.bidder,t)))));if(0===i.length)return;if(i.length>1)return void b(`${It} Sublime bidder has multiple adUnits ${i.map((e=>e.divId)).join(\"\")}`,i);const n=i[0].bidders.find((e=>kt(e.bidder,t)))?.params;if(n){const e=n.zoneId;if(e&&(\"string\"==typeof e||\"number\"==typeof e))return`${e}`}else b(`${It} unable to extract Sublime zoneId from ${i[0].divId}`,i[0])}(e,t);if(i){const e=`https://sac.ayads.co/sublime/${i}/prebid`;m(`${It} loading sublime script ${e}`),K(e)}}function St(e,t){const i=function(){window.sublime=window.sublime||{};const e=window.sublime.notifyId||At();return window.sublime.notifyId=e,e}();return kt(e.bidder,t)?(m(`${It} generate notify id`),{...e,params:{...e.params,notifyId:i}}):e}function kt(e,t=[]){return\"sublime\"===e||t?.some((t=>\"sublime\"===t.bidderSource&&t.bidderLabel===e))}function wt(e,t){return e.flatMap((e=>Et(e,t)))}function Et(e,t){return[e,...t?.filter((t=>t.bidderSource===e)).map((e=>e.bidderLabel))||[]]}const Tt=(e,t)=>e.delimiter===t.delimiter&&\"|\"===e.delimiter&&e.fields.length+1===t.fields.length&&e.fields.every(((e,i)=>e===t.fields[i]));function $t(e){const t=e.flatMap((e=>e.bidders)).map((e=>e.bidder));return[...new Set(t)]}const _t=1900,Rt=\"[pbjs]\";function Ot(e,t){const i=e.cpm,n=i>0?function(e,t){let i;if(t.forEach((t=>{const n=parseFloat(t.max);n>e&&(i=!i||n<parseFloat(i.max)?t:i)})),!i)return Math.max(...t.map((e=>parseFloat(e.max))));const n=parseFloat(i.increment);return parseFloat((Math.floor(e/n)*n).toFixed(2))}(i,t):0,s=Math.max(...t.map((e=>parseFloat(e.max))));return Math.min(n,s).toFixed(2)}function Ut(e,t,i,n,s){const a=t.filter((e=>e.headerBiddingEnabled&&e.bidders.length>0));m(`${Rt} using only ad units with prebid enabled`,a);const r=a.flatMap((t=>{if(t.dynamicPrebidFloor){const i=e.getHighestCpmBids(t.divId);if(i.length>0){const e=i[0].cpm;return V(t,{newFloor:Math.floor(100*e)/100,multiformatBidders:s})}}return V(t,{multiformatBidders:s})}));if(r.length>0){const t=n?.timeout,s=n?.labels,o=function(e){const t=e.getConfig(\"bidderTimeout\");if(t){if(\"number\"==typeof t)return t+_t;if(parseInt(t))return parseInt(t)+_t}return 3e3+_t}(e);let d=!1;setTimeout((()=>{d||(b(`${Rt} prebid requestBids did not response before ${o}ms, calling callback`),d=!0,i())}),o);const c=()=>{d||(d=!0,i())};if(!(e=>1===new Set(e.map((e=>e.floors)).filter((e=>void 0!==e)).map((e=>[...e.schema.fields,e.schema.delimiter].join(\"\")))).size)(a)){const e=(e=>e.map((e=>e.floors)).filter((e=>void 0!==e)).map((e=>e.schema)).reduce(((e,t)=>(e?t.fields.length>e.fields.length&&(e=t):e=t,e)),void 0))(a);e&&(m(`${Rt} floors schema are not the same, unifying schema`),((e,t)=>{e.forEach((i=>{if(i.floors&&i.floors?.schema!==t){const n=i.floors.schema;if(Tt(n,t)){i.floors.schema=t;const e=i.floors.values;i.floors.values={};for(const t of Object.keys(e))i.floors.values[`${t}|*`]=e[t]}else v(`Unable to unify schema for adUnits ${e.map((e=>e.divId)).join(\", \")}.`,t)}}))})(a,e))}e.requestBids({timeout:t,adUnits:r,bidsBackHandler:c,labels:s}),p(`${Rt} called requestBids`,r)}else p(`${Rt} no prebid auction to start for [${t.map((e=>e.divId)).join(\",\")}]`),i()}function Pt(e,t,i){const n=e.flatMap((e=>e.bidders)).map((e=>e.bidder)),s=[...new Set(n)],a=[t,...i?.filter((e=>e.bidderSource===t)).map((e=>e.bidderLabel))||[]];return s.some((e=>a?.includes(e)))}class Lt{constructor(e){this.pbjs=e.getPbjs()}initPbjs(e,t,i,n,s){this.multiformatBidders=s,function(e,t,i,n,s){m(`${Rt}[initPbjs] Start prebid initialization`);const{currency:a,userSync:r,priceGranularity:o,bidderAdjustments:d,bidderAliases:c,bidderConfigs:l,floors:u,analytics:h,schain:g,outbrain:f,realTimeData:v,allowLocalStorage:y,dsaConfig:A,s2sConfig:I,enableTIDs:C,useBaseGvlid:S}=i;if(e.setConfig(n),a&&(m(`${Rt}[initPbjs] set currency config`,a),e.setConfig({currency:a,priceGranularity:\"dense\"}),o&&(m(`${Rt}[initPbjs] set priceGranularity config`,o),e.setConfig({priceGranularity:o}))),I&&(m(`${Rt}[initPbjs] set prebid server config`,I),e.setConfig({s2sConfig:I})),r){const t=I?.bidders??[],i=wt([\"optidigital\",\"richaudience\",\"justpremium\",\"impactify\",\"smilewanted\",\"onetag\",\"connectad\",\"adagio\",\"appnexus\",\"yobee\",\"equativ\",\"teal\",\"smartadserver\"],c??[]),n=t.reduce(((e,t)=>[...e,(c??[]).find((e=>e.bidderLabel===t))?.bidderSource??t]),[]),s=new Set(i.concat(n));if(e.installedModules?.includes(\"utiqIdSystem\")){const e=r.userIds?.find((e=>\"utiq\"===e.name));e&&(e.name=\"utiqId\")}const a={auctionDelay:50,aliasSyncEnabled:!0,filterSettings:{iframe:{bidders:[...s],filter:\"include\"},image:{bidders:\"*\",filter:\"include\"}},...r};m(`${Rt}[initPbjs] set userSync config`,a),e.setConfig({userSync:a})}else{const t=e.getConfig(\"userSync\")||{};t.auctionDelay=50,e.setConfig({userSync:t})}if(f&&(m(`${Rt}[initPbjs] set Outbrain config:`,f),e.setConfig({outbrain:f})),v&&(m(`${Rt}[initPbjs] set realTimeData config`,v),e.setConfig({realTimeData:v})),u&&(m(`${Rt}[initPbjs] set floors config`,u),e.setConfig({floors:u})),h&&(p(`${Rt}[initPbjs] enable analytics`,h),e.enableAnalytics(h)),g&&(m(`${Rt}[initPbjs] set schain config`,g),e.setConfig({schain:g})),(e.installedModules?.includes(\"paapi\")||e.installedModules?.includes(\"paapiForGpt\"))&&e.setConfig({paapi:{enabled:!0,defaultForSlots:1}}),i.secondaryBidders&&(m(`${Rt}[initPbjs] set secondary bidders config`,i.secondaryBidders),e.setConfig({auctionOptions:{secondaryBidders:i.secondaryBidders.secondaryBidders,suppressStaleRender:i.secondaryBidders.suppressStaleRender||!1,suppressExpiredRender:i.secondaryBidders.suppressExpiredRender||!1}})),l){m(`${Rt}[initPbjs] set bidder config`,l);for(const t of l)e.setBidderConfig(t)}const k={};if(d){m(`${Rt}[initPbjs] set bidder adjustments config`,d);for(const e of d)k[e.bidder]={bidCpmAdjustment:function(t){return t*e.adjustment}}}if(y)for(const e of $t(t))k[e]={...k[e],storageAllowed:!0};if(k.standard={adserverTargeting:[{key:re,val:function(e){return e.bidderCode}},{key:\"bid_id\",val:function(e){return e.adId}},{key:\"bid_cpm\",val:function(e){return e.pbCg}},{key:oe,val:function(e){return e.size}},{key:de,val:function(e){return e.mediaType}},{key:\"bid_videoId\",val:function(e){return e.videoCacheKey}}]},s&&te.getInstance().uprEnabled&&(k.standard={adserverTargeting:[...k.standard.adserverTargeting,{key:\"prkv\",val:e=>Ot(e,s)},{key:\"ad_floor-rule\",val:e=>Ot(e,s)}]}),Object.keys(k).length>0&&(e.bidderSettings=k),c){m(`${Rt}[initPbjs] set alias bidder`,c);for(const t of c)S?e.aliasBidder(t.bidderSource,t.bidderLabel,{useBaseGvlid:!0}):e.aliasBidder(t.bidderSource,t.bidderLabel)}if(Pt(t,\"sublime\",c)&&Ct(t,c),e.installedModules?.includes(\"utiqSystem\")||e.installedModules?.includes(\"utiqIdSystem\")){const t=localStorage.getItem(\"utiqPass\");if(t)try{const i=JSON.parse(t),n=null!==i?.connectId?.idGraph?.[0].atid;m(`${Rt}[initPbjs] set Utiq key values isUtiqPresent=`,n),e.mergeConfig({ortb2:{site:{keywords:\"isUtiqPresent=\"+n}}})}catch(e){b(`${Rt}[initPbjs] Utiq config is not valid JSON, ${e}`,t)}}A&&(m(`${Rt}[initPbjs] set DSA config`,A),e.mergeConfig({ortb2:{regs:{ext:{dsa:A}}}})),Pt(t,\"criteo\",c)&&e.setConfig({criteo:{fastBidVersion:\"latest\"}}),void 0!==C&&(m(`${Rt}[initPbjs] setting enableTIDs to`,C),e.setConfig({enableTIDs:C})),te.getInstance().disableGptPreAuction&&e.setConfig({gptPreAuction:{enabled:!1}}),ye(ge.PREBID_READY),p(`${Rt}[initPbjs] Prebid is initialized`)}(this.pbjs,e,t,i,n)}roundUpToNearestIncrement(e,t){return function(e,t){const i=e.sort(((e,t)=>e.max<t.max?-1:1)),n=i.filter((e=>t<=e.max));if(0===n.length)return p(`${Rt}[Price granularity] round up - initial CpmValue : ${t} // rounded value : ${i[i.length-1].max} `),i[i.length-1].max.toFixed(2);const s=n[0].increment;let a=t%s==0?t:t+(s-t%s);const r=t.toString().split(\".\"),o=r.length>1?r[1].split(\"\").length:0;(a-s).toFixed(o)===t.toFixed(o)&&(a=t);const d=a.toFixed(2);return p(`${Rt}[Price granularity] round up - initial CpmValue : ${t} // rounded value : ${d} `),d}(e,t)}startPbjsAuction(e,t,i){Ut(this.pbjs,e,t,i,this.multiformatBidders)}getPbjs(){return this.pbjs}}class xt{constructor(){this.name=\"Prebid\"}get pbjs(){return this._pbjs}async onStackConfigLoadSync({config:e,stackConfig:t}){this._pbjs=await async function(e,t){if(t.some((e=>e.headerBiddingEnabled&&e.bidders.length)))try{const t=await G(e);return new Lt(t)}catch(e){return void v(\"[config] Error while loading the kleanadsPbjs module\",e)}}(e.newPrebidUrl,t.adUnits),this._pbjs&&this.aliasWindowPbjs(window,this._pbjs.getPbjs())}async onStackConfigLoad({config:e,stackConfig:t}){if(!t.adUnits.some((e=>e.headerBiddingEnabled&&e.bidders.length)))return;if(!this._pbjs)throw new Error(\"PrebidModule is not loaded\");const i=t?.prebidConfig?.adCallTimeout??e.adCallTimeout,n={...t.prebidConfig.pbjsConfig},s={gdpr:{cmpApi:\"iab\",timeout:8e3,defaultGdprScope:!0}},a=this._pbjs.getPbjs().installedModules;let r;a.includes(\"consentManagementUsp\")&&(s.usp={cmpApi:\"iab\",timeout:8e3}),a.includes(\"consentManagementGpp\")&&(s.gpp={cmpApi:\"iab\",timeout:8e3}),a.includes(\"anonymisedRtdProvider\")&&(s.gdpr.rules=[{purpose:\"storage\",enforcePurpose:!0,enforceVendor:!0,vendorExceptions:[\"anonymised\"]}]),t.prebidConfig?.pbjsConfig?.useCanonicalUrl&&(r=window.document.querySelector(\"link[rel='canonical']\")?.getAttribute(\"href\"));const o={bidderTimeout:i,useBidCache:!0,maxRequestsPerOrigin:6,consentManagement:e.noCmp?void 0:s,enableSendAllBids:!1,pageUrl:r||document.location.href,cache:{url:\"https://prebid.adnxs.com/pbc/v1/cache\",ignoreBidderCacheKey:!0},timeoutBuffer:400};this._pbjs.initPbjs(t.adUnits,n,o,e.priceRuleBuckets,t.multiformatBidders)}async clean(){this.setDefaultPbjsConfig();const e=this._pbjs?.getPbjs();e&&(e.bidderSettings={})}aliasWindowPbjs(e,t){e.pbjs=t}setDefaultPbjsConfig(){this._pbjs?.getPbjs().setConfig({bidderTimeout:3e3,enableSendAllBids:!0,useBidCache:!1,deviceAccess:!0,timeoutBuffer:400,disableAjaxTimeout:!1,maxNestedIframes:10,priceGranularity:\"medium\",customPriceBucket:{},mediaTypePriceGranularity:{},bidderSequence:\"random\",auctionOptions:{},userSync:{syncEnabled:!0,filterSettings:{image:{bidders:\"*\",filter:\"include\"}},syncsPerBidder:5,syncDelay:3e3,auctionDelay:50}})}}class Nt{constructor(e,t){this.pubstackWindow=e,this.rule=t}isDivIdMatchingRule(e){const t=document.getElementById(e);if(t){const e=t.getBoundingClientRect();return this.rule(this.pubstackWindow,e)}return!1}}const Dt=(e,t,i)=>{if(function(e){return 0===e.top&&0===e.bottom&&0===e.left&&0===e.right&&0===e.width&&0===e.height}(t))return!1;const n=-i*e.innerHeight,s=(1+i)*e.innerHeight>t.top,a=t.bottom>n;return s&&a};function jt(e,t,i,n){const s=e.filter((e=>e.roadblock)).filter((e=>!e.mediaTypes.includes(\"Instream\"))).filter((e=>!e.externalAdServer)).filter((e=>z(e.divId))),a=e.filter((e=>!e.roadblock)).filter((e=>!e.mediaTypes.includes(\"Instream\"))).filter((e=>!e.externalAdServer)).filter((e=>z(e.divId))),r=e.filter((e=>e.mediaTypes.includes(\"Instream\"))).filter((e=>!e.externalAdServer)).filter((e=>z(e.divId)));t.executeAdCallRoadblock(s),r.length>0&&i?.executeAdCall(r);const o=function(e){if(e&&e.lazyLoadingKleanads){const t=e.lazyLoadingKleanads.viewportPercent/100;return m(`[lazyloading] lazy loading enabled with ${t} viewports`),(e,i)=>Dt(e,i,t)}}(n);if(o){Bt(a,[],new Nt(window,o),t)}else t.executeAdCall(a)}function Bt(e,t,i,n){const s=e.filter((e=>!t.includes(e.divId))).filter((e=>e.anchor?.mode||e.outOfPageType||i.isDivIdMatchingRule(e.divId)));n.executeAdCall(s),t.push(...s.map((e=>e.divId))),e.length>t.length&&setTimeout((()=>Bt(e,t,i,n)),200)}const Mt=\"[optimization]\",Vt=async e=>{try{const t=await Wt();if(e?.prebidConfig.adCallTimeout){const i=t.getTimeout(e?.prebidConfig.adCallTimeout);m(`${Mt} Ad call timeout optimized from ${e?.prebidConfig.adCallTimeout} to ${i}`),e.prebidConfig.adCallTimeout=i}}catch(e){v(`${Mt} Error while loading optimization engine`,e)}return e},Wt=async()=>new Promise(((e,t)=>{try{const i={env:{}};WebAssembly.instantiateStreaming(fetch(\"https://cdn-adm.pbstck.com/kleanads/wasm/volt.wasm\"),i).then((t=>{m(`${Mt} WebAssembly module loaded successfully`,t),e(t.instance.exports)})).catch((e=>{t(e)}))}catch(e){t(e)}}));class zt extends TypeError{constructor(e,t){let i;const{message:n,explanation:s,...a}=e,{path:r}=e,o=0===r.length?n:`At path: ${r.join(\".\")} -- ${n}`;super(s??o),null!=s&&(this.cause=o),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>i??(i=[e,...t()])}}function Ft(e){return\"object\"==typeof e&&null!=e}function Ht(e){return Ft(e)&&!Array.isArray(e)}function Gt(e){if(\"[object Object]\"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function Kt(e){return\"symbol\"==typeof e?e.toString():\"string\"==typeof e?JSON.stringify(e):`${e}`}function qt(e,t,i,n){if(!0===e)return;!1===e?e={}:\"string\"==typeof e&&(e={message:e});const{path:s,branch:a}=t,{type:r}=i,{refinement:o,message:d=`Expected a value of type \\`${r}\\`${o?` with refinement \\`${o}\\``:\"\"}, but received: \\`${Kt(n)}\\``}=e;return{value:n,type:r,refinement:o,key:s[s.length-1],path:s,branch:a,...e,message:d}}function*Yt(e,t,i,n){var s;Ft(s=e)&&\"function\"==typeof s[Symbol.iterator]||(e=[e]);for(const s of e){const e=qt(s,t,i,n);e&&(yield e)}}function*Xt(e,t,i={}){const{path:n=[],branch:s=[e],coerce:a=!1,mask:r=!1}=i,o={path:n,branch:s,mask:r};a&&(e=t.coercer(e,o));let d=\"valid\";for(const n of t.validator(e,o))n.explanation=i.message,d=\"not_valid\",yield[n,void 0];for(let[c,l,u]of t.entries(e,o)){const t=Xt(l,u,{path:void 0===c?n:[...n,c],branch:void 0===c?s:[...s,l],coerce:a,mask:r,message:i.message});for(const i of t)i[0]?(d=null!=i[0].refinement?\"not_refined\":\"not_valid\",yield[i[0],void 0]):a&&(l=i[1],void 0===c?e=l:e instanceof Map?e.set(c,l):e instanceof Set?e.add(l):Ft(e)&&(void 0!==l||c in e)&&(e[c]=l))}if(\"not_valid\"!==d)for(const n of t.refiner(e,o))n.explanation=i.message,d=\"not_refined\",yield[n,void 0];\"valid\"===d&&(yield[void 0,e])}class Jt{constructor(e){const{type:t,schema:i,validator:n,refiner:s,coercer:a=(e=>e),entries:r=function*(){}}=e;this.type=t,this.schema=i,this.entries=r,this.coercer=a,this.validator=n?(e,t)=>Yt(n(e,t),t,this,e):()=>[],this.refiner=s?(e,t)=>Yt(s(e,t),t,this,e):()=>[]}assert(e,t){return function(e,t,i){const n=Zt(e,t,{message:i});if(n[0])throw n[0]}(e,this,t)}create(e,t){return function(e,t,i){const n=Zt(e,t,{coerce:!0,message:i});if(n[0])throw n[0];return n[1]}(e,this,t)}is(e){return Qt(e,this)}mask(e,t){return function(e,t,i){const n=Zt(e,t,{coerce:!0,mask:!0,message:i});if(n[0])throw n[0];return n[1]}(e,this,t)}validate(e,t={}){return Zt(e,this,t)}}function Qt(e,t){return!Zt(e,t)[0]}function Zt(e,t,i={}){const n=Xt(e,t,i),s=function(e){const{done:t,value:i}=e.next();return t?void 0:i}(n);if(s[0]){return[new zt(s[0],(function*(){for(const e of n)e[0]&&(yield e[0])})),void 0]}return[void 0,s[1]]}function ei(e,t){return new Jt({type:e,schema:null,validator:t})}function ti(e){return new Jt({type:\"array\",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[i,n]of t.entries())yield[i,n,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${Kt(e)}`})}function ii(){return ei(\"boolean\",(e=>\"boolean\"==typeof e))}function ni(e){const t={},i=e.map((e=>Kt(e))).join();for(const i of e)t[i]=i;return new Jt({type:\"enums\",schema:t,validator:t=>e.includes(t)||`Expected one of \\`${i}\\`, but received: ${Kt(t)}`})}function si(){return ei(\"never\",(()=>!1))}function ai(e){return new Jt({...e,validator:(t,i)=>null===t||e.validator(t,i),refiner:(t,i)=>null===t||e.refiner(t,i)})}function ri(){return ei(\"number\",(e=>\"number\"==typeof e&&!isNaN(e)||`Expected a number, but received: ${Kt(e)}`))}function oi(e){const t=e?Object.keys(e):[],i=si();return new Jt({type:\"object\",schema:e||null,*entries(n){if(e&&Ft(n)){const s=new Set(Object.keys(n));for(const i of t)s.delete(i),yield[i,n[i],e[i]];for(const e of s)yield[e,n[e],i]}},validator:e=>Ht(e)||`Expected an object, but received: ${Kt(e)}`,coercer(t,i){if(!Ht(t))return t;const n={...t};if(i.mask&&e)for(const t in n)void 0===e[t]&&delete n[t];return n}})}function di(e){return new Jt({...e,validator:(t,i)=>void 0===t||e.validator(t,i),refiner:(t,i)=>void 0===t||e.refiner(t,i)})}function ci(e,t){return new Jt({type:\"record\",schema:null,*entries(i){if(Ft(i))for(const n in i){const s=i[n];yield[n,n,e],yield[n,s,t]}},validator:e=>Ht(e)||`Expected an object, but received: ${Kt(e)}`,coercer:e=>Ht(e)?{...e}:e})}function li(){return ei(\"string\",(e=>\"string\"==typeof e||`Expected a string, but received: ${Kt(e)}`))}function ui(e){const t=si();return new Jt({type:\"tuple\",schema:null,*entries(i){if(Array.isArray(i)){const n=Math.max(e.length,i.length);for(let s=0;s<n;s++)yield[s,i[s],e[s]||t]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${Kt(e)}`,coercer:e=>Array.isArray(e)?e.slice():e})}function hi(e){const t=Object.keys(e);return new Jt({type:\"type\",schema:e,*entries(i){if(Ft(i))for(const n of t)yield[n,i[n],e[n]]},validator:e=>Ht(e)||`Expected an object, but received: ${Kt(e)}`,coercer:e=>Ht(e)?{...e}:e})}function gi(e){const t=e.map((e=>e.type)).join(\" | \");return new Jt({type:\"union\",schema:null,coercer(t,i){for(const n of e){const[e,s]=n.validate(t,{coerce:!0,mask:i.mask});if(!e)return s}return t},validator(i,n){const s=[];for(const t of e){const[...e]=Xt(i,t,n),[a]=e;if(!a[0])return[];for(const[t]of e)t&&s.push(t)}return[`Expected the value to satisfy a union of \\`${t}\\`, but received: ${Kt(i)}`,...s]}})}function fi(){return ei(\"unknown\",(()=>!0))}function pi(e,t,i){return new Jt({...e,coercer:(n,s)=>Qt(n,t)?e.coercer(i(n,s),s):e.coercer(n,s)})}function mi(e,t,i={}){return pi(e,fi(),(e=>{const n=\"function\"==typeof t?t():t;if(void 0===e)return n;if(!i.strict&&Gt(e)&&Gt(n)){const t={...e};let i=!1;for(const e in n)void 0===t[e]&&(t[e]=n[e],i=!0);if(i)return t}return e}))}const bi=oi({bidder:li(),params:di(ci(li(),fi()))}),vi=oi({currency:li(),schema:oi({delimiter:li(),fields:ti(li())}),values:ci(li(),ri())}),yi=oi({ext:oi({})}),Ai=oi({playerSize:gi([ui([ri(),ri()]),ti(ui([ri(),ri()]))]),context:di(li()),protocols:di(ti(ri())),api:di(ti(ri())),playbackmethod:di(ti(ri())),skip:di(ri()),mimes:di(ti(li())),linearity:di(ri()),startdelay:di(ri()),placement:di(ri()),plcmt:di(ri()),maxduration:di(ri()),minduration:di(ri()),playVideoVisibleThreshold:di(ri()),nonViewableBehavior:di(li())}),Ii=ci(li(),fi()),Ci=ni([\"low\",\"medium\",\"high\",\"auto\",\"dense\",\"custom\"]),Si=oi({buckets:ti(oi({precision:di(ri()),max:ri(),increment:ri()}))}),ki=gi([ui([ri(),ri()]),function(e){const t=Kt(e);return new Jt({type:\"literal\",schema:e,validator:i=>i===e||`Expected the literal \\`${t}\\`, but received: ${Kt(i)}`})}(\"fluid\")]),wi=(Ei=oi({key:li(),value:di(li()),values:di(ti(li()))}),Ti=\"KeyValueTargeting\",$i=e=>!!e.value||!!e.values,new Jt({...Ei,*refiner(e,t){yield*Ei.refiner(e,t);const i=Yt($i(e,t),t,Ei,e);for(const e of i)yield{...e,refinement:Ti}}}));var Ei,Ti,$i,_i;!function(e){e.USE_EXISTING_DIV=\"useExistingDiv\",e.CREATE_NEW_DIV=\"createNewDiv\"}(_i||(_i={}));const Ri=oi({mode:ni([_i.USE_EXISTING_DIV,_i.CREATE_NEW_DIV])}),Oi=ni([\"default\",\"interstitial\"]),Ui=ni([\"master\",\"companion\",\"master-1\",\"master-2\",\"master-3\"]),Pi=hi({sizes:ti(ki),divId:li(),adUnitName:li(),adServerAdUnitName:li(),slotName:di(li()),bidders:ti(bi),parallax:mi(ii(),!1),dynamic:mi(ii(),!1),targeting:di(wi),extraTargetings:di(ti(wi)),anchor:di(Ri),floors:di(vi),dynamicPrebidFloor:di(ii()),extraAdServerSizes:di(ti(ki)),headerBiddingEnabled:mi(ii(),!0),canOutstream:di(ii()),canNative:di(ii()),isInstream:di(ii()),biddersNative:di(ti(bi)),biddersOutstream:mi(ti(li()),[]),outOfPageType:di(Oi),biddersSkin:di(ti(li())),roadblock:di(Ui),ortb2Imp:di(yi),nativeParams:di(ci(li(),fi())),instreamParams:di(oi({mediaTypeParams:di(Ai),params:di(ci(li(),li())),vast:ci(li(),gi([li(),ri()])),targetings:di(ci(li(),li())),adDeactivationContext:di(oi({key:li(),values:ti(li())}))})),externalAdServer:di(ii())}),Li=oi({googleFetchMarginPercent:di(ri()),googleRenderMarginPercent:di(ri()),googleMobileScaling:di(ri())}),xi=oi({viewportPercent:ri()}),Ni=oi({configName:li(),lazyLoadingGoogle:di(Li),lazyLoadingKleanads:pi(di(xi),ai(xi),(e=>e??void 0))}),Di=oi({bidders:mi(ti(li()),[]),sizes:mi(ti(ki),[]),timer:pi(di(ri()),ai(ri()),(e=>e??void 0))});var ji;!function(e){e.Stop=\"stop\",e.Continue=\"continue\",e.InstantSecondChance=\"instantSecondChance\"}(ji||(ji={}));const Bi=hi({adUnitNames:ti(li()),timer:ri(),capping:di(ri()),specificRules:ti(Di),alwaysInView:di(ii()),refreshBehaviorOnEmpty:di(ni([ji.Stop,ji.Continue,ji.InstantSecondChance])),adxTimer:di(ri())}),Mi=oi({adUnitConfig:ti(Bi)}),Vi=gi([ci(li(),fi()),oi({ppid:di(li()),userIds:di(ti(ci(li(),fi())))})]),Wi=oi({provider:li(),options:ci(li(),fi()),includeEvents:di(ti(li())),excludeEvents:di(ti(li()))}),zi=oi({bidder:li(),adjustment:ri()}),Fi=oi({bidderLabel:li(),bidderSource:li()}),Hi=oi({name:li(),waitForIt:di(ii()),params:ci(li(),fi())}),Gi=oi({auctionDelay:ri(),dataProviders:ti(Hi)}),Ki=oi({sendKVTargetings:ii(),biddersBlackList:ti(li())}),qi=oi({bidderUrl:di(li()),usersyncUrl:di(li())}),Yi=ci(li(),fi()),Xi=oi({aliases:di(ci(li(),li())),cache:di(ci(li(),fi())),targeting:di(Yi),returnallbidstatus:di(ii())}),Ji=hi({accountId:li(),adapter:li(),bidders:di(ti(li())),enabled:di(ii()),endpoint:li(),extPrebid:di(Xi),syncEndpoint:li(),timeout:di(ri())}),Qi=oi({currency:di(pi(Ii,li(),(e=>JSON.parse(e)))),userSync:di(pi(Vi,li(),(e=>JSON.parse(e)))),sendAdditionalWinningBidTargeting:di(ii()),analytics:di(pi(ti(Wi),li(),(e=>JSON.parse(e)))),bidderConfigs:di(pi(ti(ci(li(),fi())),li(),(e=>JSON.parse(e)))),bidderAdjustments:di(ti(zi)),bidderAliases:di(ti(Fi)),priceGranularity:di(pi(gi([Ci,Si]),li(),(e=>JSON.parse(e)))),realTimeData:di(pi(Gi,li(),(e=>JSON.parse(e)))),floors:di(pi(ci(li(),fi()),li(),(e=>JSON.parse(e)))),schain:di(pi(ci(li(),fi()),li(),(e=>JSON.parse(e)))),allowLocalStorage:di(mi(ii(),!0)),targetingBehaviors:di(Ki),outbrain:di(qi),fledgeForGpt:di(ii()),paapi:di(ci(li(),fi())),dsaConfig:di(ci(li(),fi())),s2sConfig:di(Ji),enableTIDs:di(ii())});var Zi;!function(e){e.DISABLED=\"DISABLED\",e.ENABLED_ALL_SLOTS=\"ENABLED_ALL_SLOTS\"}(Zi||(Zi={}));const en=oi({networkId:ri(),adUnitPathConfig:ti(li()),mcmIds:di(ti(ri())),ppidValue:di(li()),threadYieldConfig:di(ni([Zi.DISABLED,Zi.ENABLED_ALL_SLOTS])),disableSingleRequest:di(ii())}),tn=oi({enabled:ii(),measureOnly:di(ii()),publisherId:li()}),nn=oi({pubId:li()}),sn=oi({name:li(),ratio:ri(),configToMerge:di(ai(oi({adUnits:ti(Pi)})))}),an=oi({name:li(),ratio:ri(),configToMerge:di(ai(oi({lazyLoading:di(Ni)})))}),rn=oi({name:li(),ratio:ri(),configToMerge:di(ai(oi({refreshConfig:di(Mi)})))}),on=oi({adUnits:ti(Pi),lazyLoading:di(Ni),refreshConfig:di(Mi),prebidConfig:oi({adCallTimeout:ri(),pbjsConfig:Qi}),gamConfig:di(en),tamConfig:di(oi({apsPubId:li(),disableSchain:di(ii())})),xplnConfig:di(tn),iasConfig:di(nn),abTest:di(gi([ti(sn),ti(an),ti(rn)]))});var dn,cn,ln,un,hn,gn,fn,pn,mn,bn,vn,yn;!function(e){e.firstId=\"firstId\",e.utiqId=\"utiqId\",e.sharedId=\"sharedId\"}(dn||(dn={})),function(e){e.id5id=\"id5Id\"}(cn||(cn={})),function(e){e.INSTREAM=\"instream\",e.OUTSTREAM=\"outstream\"}(ln||(ln={})),function(e){e[e.LINEAR=1]=\"LINEAR\",e[e.NON_LINEAR=2]=\"NON_LINEAR\"}(un||(un={})),function(e){e[e.IN_STREAM=1]=\"IN_STREAM\",e[e.IN_BANNER=2]=\"IN_BANNER\",e[e.IN_ARTICLE=3]=\"IN_ARTICLE\",e[e.IN_FEED=4]=\"IN_FEED\",e[e.INTERSTITIAL=5]=\"INTERSTITIAL\"}(hn||(hn={})),function(e){e[e.INSTREAM=1]=\"INSTREAM\",e[e.ACCOMPANYING_CONTENT=2]=\"ACCOMPANYING_CONTENT\",e[e.INTERSTITIAL=3]=\"INTERSTITIAL\",e[e.NO_CONTENT=4]=\"NO_CONTENT\"}(gn||(gn={})),function(e){e[e.UNKNOWN=0]=\"UNKNOWN\",e[e.ABOVE_THE_FOLD=1]=\"ABOVE_THE_FOLD\",e[e.LOCKED=2]=\"LOCKED\",e[e.BELOW_THE_FOLD=3]=\"BELOW_THE_FOLD\",e[e.HEADER=4]=\"HEADER\",e[e.FOOTER=5]=\"FOOTER\",e[e.SIDEBAR=6]=\"SIDEBAR\",e[e.FULLSCREEN=7]=\"FULLSCREEN\"}(fn||(fn={})),function(e){e[e.VAST_1_0=1]=\"VAST_1_0\",e[e.VAST_2_0=2]=\"VAST_2_0\",e[e.VAST_3_0=3]=\"VAST_3_0\",e[e.VAST_1_0_WRAPPER=4]=\"VAST_1_0_WRAPPER\",e[e.VAST_2_0_WRAPPER=5]=\"VAST_2_0_WRAPPER\",e[e.VAST_3_0_WRAPPER=6]=\"VAST_3_0_WRAPPER\",e[e.VAST_4_0=7]=\"VAST_4_0\",e[e.VAST_4_0_WRAPPER=8]=\"VAST_4_0_WRAPPER\",e[e.DAAST_1_0=9]=\"DAAST_1_0\",e[e.DAAST_1_0_WRAPPER=10]=\"DAAST_1_0_WRAPPER\",e[e.VAST_4_1=11]=\"VAST_4_1\",e[e.VAST_4_1_WRAPPER=12]=\"VAST_4_1_WRAPPER\",e[e.VAST_4_2=13]=\"VAST_4_2\",e[e.VAST_4_2_WRAPPER=14]=\"VAST_4_2_WRAPPER\"}(pn||(pn={})),function(e){e[e.VPAID_1_0=1]=\"VPAID_1_0\",e[e.VPAID_2_0=2]=\"VPAID_2_0\",e[e.MRAID_1_0=3]=\"MRAID_1_0\",e[e.ORMMA=4]=\"ORMMA\",e[e.MRAID_2_0=5]=\"MRAID_2_0\",e[e.MRAID_3_0=6]=\"MRAID_3_0\",e[e.OMID_1_0=7]=\"OMID_1_0\",e[e.SIMID_1_0=8]=\"SIMID_1_0\",e[e.SIMID_1_1=9]=\"SIMID_1_1\"}(mn||(mn={})),function(e){e[e.AUTO_PLAY_SOUND_ON=1]=\"AUTO_PLAY_SOUND_ON\",e[e.AUTO_PLAY_SOUND_OFF=2]=\"AUTO_PLAY_SOUND_OFF\",e[e.CLICK_TO_PLAY=3]=\"CLICK_TO_PLAY\",e[e.MOUSE_OVER=4]=\"MOUSE_OVER\",e[e.INVIEW_SOUND_ON=5]=\"INVIEW_SOUND_ON\",e[e.INVIEW_SOUND_OFF=6]=\"INVIEW_SOUND_OFF\",e[e.CONTINUOUS_PLAYBACK=7]=\"CONTINUOUS_PLAYBACK\"}(bn||(bn={})),function(e){e.VIDEO_MP4=\"video/mp4\",e.VIDEO_WEBM=\"video/webm\",e.VIDEO_OGG=\"video/ogg\",e.VIDEO_MPEG=\"video/mpeg\",e.APPLICATION_JAVASCRIPT=\"application/javascript\"}(vn||(vn={})),function(e){e[e.NON_SKIPPABLE=0]=\"NON_SKIPPABLE\",e[e.SKIPPABLE=1]=\"SKIPPABLE\"}(yn||(yn={}));const An={playerSize:[[640,480]],context:ln.INSTREAM,api:[mn.VPAID_1_0,mn.VPAID_2_0,mn.MRAID_1_0,mn.MRAID_2_0,mn.MRAID_3_0,mn.OMID_1_0],linearity:un.LINEAR,mimes:[vn.VIDEO_MP4,vn.VIDEO_OGG,vn.VIDEO_WEBM,vn.APPLICATION_JAVASCRIPT],maxduration:30,minduration:1,protocols:[pn.VAST_1_0,pn.VAST_2_0,pn.VAST_3_0,pn.VAST_4_0,pn.VAST_1_0_WRAPPER,pn.VAST_2_0_WRAPPER,pn.VAST_3_0_WRAPPER,pn.VAST_4_0_WRAPPER,pn.VAST_4_1,pn.VAST_4_1_WRAPPER,pn.VAST_4_2,pn.VAST_4_2_WRAPPER],startdelay:0,placement:hn.IN_STREAM,plcmt:gn.INSTREAM,playbackmethod:[bn.AUTO_PLAY_SOUND_OFF,bn.CLICK_TO_PLAY,bn.MOUSE_OVER],skip:yn.SKIPPABLE,skipafter:0,pos:fn.UNKNOWN,minbitrate:1,maxbitrate:6e3},In=\"[pocOverride]\";function Cn(e,t,i){Object.keys(e??{}).some((e=>\"scope\"!==e&&\"sites\"!==e&&\"stacks\"!==e))&&v(\"Invalid override object\",e);const n=e?.stacks?.[i],s=e?.sites?.[t],a=e?.scope;return n??s??a}function Sn(e,t){if(t)return t[e]??t.type}function kn(e){const t=(\"; \"+document.cookie).split(\"; \"+e+\"=\");if(2===t.length)return t.pop()?.split(\";\").shift()}class wn{constructor(e,t){this.stackLoadedConfig={...e,runningABTest:[]},this.pocOverrides=t}withConvertToInstreamAdUnit(){const e=this.pocOverrides.convertToInstreamAdUnits;if(e){const t=[];this.stackLoadedConfig.adUnits.forEach((i=>{const n=e[i.adUnitName];n&&(i.isInstream=!0,i.dynamic=!1,i.parallax=!1,i.anchor=void 0,i.canOutstream=!1,i.biddersOutstream=[],i.floors=n.floors,i.instreamParams={...n.instreamParams,vast:n.instreamParams?.vast||{},mediaTypeParams:{...An,...n.instreamParams?.mediaTypeParams}},t.push(i.adUnitName))})),\"dailymotion-v3\"===this.pocOverrides.instreamConfig?.type&&this.stackLoadedConfig.refreshConfig?.adUnitConfig.push({adUnitNames:t,timer:10,specificRules:[],alwaysInView:!0})}return this}withUseNativeAlias(){if(this.pocOverrides.useNativeAlias)for(const e of this.stackLoadedConfig.adUnits){const t=e=>e.bidder.includes(\"native\")||e.bidder.endsWith(\"_na\"),i=e.bidders.filter((e=>t(e)));i.length>0&&(e.biddersNative=i),e.bidders=e.bidders.filter((e=>!t(e)))}return this}withConvertToNativeAdUnit(){const e=this.pocOverrides.convertToNativeAdUnits;return e&&this.stackLoadedConfig.adUnits.forEach((t=>{const i=e[t.adUnitName];if(i){if(t.canNative=!0,i.useNativeTemplate&&this.pocOverrides.nativeParamsTemplate?t.nativeParams=this.pocOverrides.nativeParamsTemplate:t.nativeParams=i.nativeParams,i.useNativeAlias){const e=e=>e.bidder.includes(\"native\")||e.bidder.endsWith(\"_na\");t.biddersNative=t.bidders.filter((t=>e(t))),t.bidders=t.bidders.filter((t=>!e(t)))}i.nativeOnly&&(t.sizes=[],t.extraAdServerSizes?.includes(\"fluid\")?t.extraAdServerSizes=[\"fluid\"]:t.extraAdServerSizes=[],t.isInstream=!1,t.parallax=!1,t.anchor=void 0,t.canOutstream=!1,t.biddersOutstream=[])}})),this}withFirstId(){if(this.pocOverrides?.firstId){const e=function(){const e=new RegExp(\"(?:(?:^|.*; *)firstid *= *([^;]*).*$)|^.*$\",\"i\"),t=document.cookie.match(e);return t&&t[1]?decodeURIComponent(t[1]):void 0}();if(e){const t=this.stackLoadedConfig.prebidConfig.pbjsConfig.userSync?.userIds??[];t.push({name:\"pubProvidedId\",params:{eids:[{source:\"first-id.fr\",uids:[{id:e,atype:1,ext:{stype:\"ppuid\"}}]}]}}),this.stackLoadedConfig.prebidConfig.pbjsConfig.userSync={...this.stackLoadedConfig.prebidConfig.pbjsConfig.userSync,userIds:t}}}return this}withId5Id(){if(this.pocOverrides?.id5id){const e=localStorage.getItem(this.pocOverrides.id5id.pd);e&&(this.stackLoadedConfig.prebidConfig.pbjsConfig.userSync?.userIds??[]).forEach((t=>{\"id5Id\"===t.name&&(t.params||(t.params={}),t.params.pd=e)}))}return this}withConvertToInterstitialAdUnit(){const e=this.pocOverrides.convertToInterstitialAdUnits;return e&&this.stackLoadedConfig.adUnits.forEach((t=>{e.includes(t.adUnitName)&&(t.outOfPageType=\"interstitial\",p(`Interstitial adUnit found: ${t.adUnitName}`))})),this}withSkinRenderingSettings(e,t){const i=this.pocOverrides?.skinRenderingSettings,n=i?.stackLevel?.[t],s=i?.siteLevel?.[e];return s?.disableSkinBids||n?.disableSkinBids?this.stackLoadedConfig.adUnits=this.stackLoadedConfig.adUnits.map((e=>({...e,sizes:e.sizes.filter((e=>!_(e,[1800,1e3])))}))):(s?.biddersOverride||n?.biddersOverride)&&(this.stackLoadedConfig.adUnits=this.stackLoadedConfig.adUnits.map((e=>e.sizes.some((e=>_(e,[1800,1e3])))?{...e,biddersSkin:n?.biddersOverride??s?.biddersOverride}:e))),this}withPpidSolution(e,t){const i=Cn(this.pocOverrides?.ppidSolutions,e,t);if(i){const e=Array.isArray(i.ppidSolution)?i.ppidSolution:[i.ppidSolution],{type:t,value:n}=function(e){for(const i of e)switch(i){case dn.firstId:return{type:\"prebid\",value:\"first-id.fr\"};case dn.sharedId:return{type:\"prebid\",value:\"pubcid.org\"};case dn.utiqId:return{type:\"prebid\",value:\"utiq.com\"};case cn.id5id:{const e=localStorage.getItem(\"id5id\");if(e)return{type:\"other\",value:(t=e,JSON.parse(decodeURIComponent(t)).gp)};break}default:{let e=localStorage.getItem(i);if(e)return{type:\"other\",value:e};if(e=kn(i)??null,e)return{type:\"other\",value:e}}}var t;return{type:\"other\",value:\"\"}}(e);if(\"prebid\"===t)this.stackLoadedConfig.prebidConfig.pbjsConfig.userSync={...this.stackLoadedConfig.prebidConfig.pbjsConfig.userSync,ppid:n};else this.stackLoadedConfig.gamConfig&&n&&(this.stackLoadedConfig.gamConfig.ppidValue=n)}return this}withRefreshAlwaysInView(e,t){const i=this.pocOverrides?.refreshAlwaysInViewAdUnitNames;if(Array.isArray(i)&&this.stackLoadedConfig.refreshConfig&&i&&i.length>0){const e=[];this.stackLoadedConfig.refreshConfig.adUnitConfig.forEach((t=>{i.forEach((i=>{t.adUnitNames?.includes(i)&&(e.push({...t,alwaysInView:!0,adUnitNames:[i]}),t.adUnitNames.splice(t.adUnitNames.indexOf(i),1))}))})),this.stackLoadedConfig.refreshConfig.adUnitConfig=[...this.stackLoadedConfig.refreshConfig.adUnitConfig.filter((e=>(e.adUnitNames||[]).length>0)),...e]}else if(i&&!Array.isArray(i)){const n=Cn(i,e,t);if(this.stackLoadedConfig.refreshConfig&&n&&n.length>0){const e=[];this.stackLoadedConfig.refreshConfig.adUnitConfig.forEach((t=>{\"string\"==typeof n&&\"all\"===n?t.alwaysInView=!0:\"object\"==typeof n&&n.forEach((i=>{t.adUnitNames?.includes(i)&&(e.push({...t,alwaysInView:!0,adUnitNames:[i]}),t.adUnitNames.splice(t.adUnitNames.indexOf(i),1))}))})),this.stackLoadedConfig.refreshConfig.adUnitConfig=[...this.stackLoadedConfig.refreshConfig.adUnitConfig.filter((e=>(e.adUnitNames||[]).length>0)),...e]}}return this}withrefreshBehaviorOnEmpty(){const e=this.pocOverrides?.refreshBehaviorOnEmpty;return e&&this.stackLoadedConfig.refreshConfig?.adUnitConfig.forEach((t=>{t.refreshBehaviorOnEmpty=e})),this}withOutbrainConfig(e){if(this.pocOverrides?.outbrainConfig){const t=this.pocOverrides.outbrainConfig.find((t=>t.siteId===e)),i=this.pocOverrides.outbrainConfig.find((e=>!e.siteId)),n=t||i;n&&(this.stackLoadedConfig.prebidConfig.pbjsConfig.outbrain={bidderUrl:n.bidderUrl,usersyncUrl:n.usersyncUrl})}return this}withXplnConfig(e,t){const i=Cn(this.pocOverrides.xplnConfig,e,t);return i&&(this.stackLoadedConfig.xplnConfig=i),this}withFloorEnforcement(e){const t=this.pocOverrides?.floorEnforcement;if(t){const t=this.pocOverrides?.floorEnforcement?.sites?.[e],i=this.pocOverrides?.floorEnforcement?.scope;(t||i)&&(this.stackLoadedConfig.prebidConfig.pbjsConfig.floors={...this.stackLoadedConfig.prebidConfig.pbjsConfig.floors,enforcement:{...t??i}})}return this}withDynamicPrebidFloors(e){const t=this.pocOverrides?.dynamicPrebidFloors;if(t){const t=this.pocOverrides?.dynamicPrebidFloors?.sites?.[e],i=this.pocOverrides?.dynamicPrebidFloors?.scope;(t||i)&&this.stackLoadedConfig.adUnits.forEach((e=>{e.dynamicPrebidFloor=!0}))}return this}withSkinFloor(e){const t=this.pocOverrides?.skinFloor;if(t){const i=t.specificFloor?.[e]??t.defaultFloor;this.stackLoadedConfig.adUnits.forEach((e=>{if(e.sizes.some((e=>_(e,[1800,1e3]))))if(e.floors){const t=e.floors?.values.banner;t?e.floors={...e.floors,schema:{delimiter:\"|\",fields:[\"mediaType\",\"size\"]},values:{\"banner|*\":t,\"banner|1800x1000\":i}}:v(\"no banner value found in floors, skin floor cannot be applied.\",e.floors)}else e.floors={currency:t.currency,schema:{delimiter:\"|\",fields:[\"mediaType\",\"size\"]},values:{\"banner|1800x1000\":i}}}))}return this}withDsaConfig(){return this.pocOverrides?.dsaConfig&&(this.stackLoadedConfig.prebidConfig.pbjsConfig={...this.stackLoadedConfig.prebidConfig.pbjsConfig,dsaConfig:this.pocOverrides?.dsaConfig}),this}withPrebidServerConfig(e){if(this.pocOverrides?.prebidServer&&this.pocOverrides.prebidServer.siteIds.includes(e)){if(J(this.pocOverrides.prebidServer.ratio)){p(\"Run ABTest hybrid monetization PBJS + PBS\");const e=J(void 0!==this.stackLoadedConfig.prebidConfig.pbjsConfig?.priceGranularity&&this.pocOverrides.prebidServer.ratioPriceGranularity?this.pocOverrides.prebidServer.ratioPriceGranularity:0);this.stackLoadedConfig.prebidConfig.pbjsConfig={...this.stackLoadedConfig.prebidConfig.pbjsConfig,s2sConfig:{...this.pocOverrides.prebidServer.s2sConfig}};let t=this.pocOverrides.prebidServer.metaABTestServerSide??\"rule2\";e&&this.stackLoadedConfig.prebidConfig.pbjsConfig.s2sConfig?.extPrebid?.targeting&&(this.stackLoadedConfig.prebidConfig.pbjsConfig.s2sConfig.extPrebid.targeting.priceGranularity=this.stackLoadedConfig.prebidConfig.pbjsConfig.priceGranularity,t=`${t}_with_pg`,p(\"Run ABTest for PriceGranularity on Prebid Server side\")),I(t)}else I(this.pocOverrides.prebidServer.metaABTestClientSide??\"rule1\")}return this}withRoadblockOrder(e,t){const i=Cn(this.pocOverrides?.roadblockOrder,e,t);return i&&this.stackLoadedConfig.adUnits.forEach((e=>{i[e.adUnitName]&&(e.roadblock=i[e.adUnitName])})),this}withDisableThreadYield(e,t){const i=window.location.search,n=new URLSearchParams(i);return(Cn(this.pocOverrides?.disableThreadYield,e,t)||n.get(\"disableThreadYield\"))&&this.stackLoadedConfig.gamConfig&&(this.stackLoadedConfig.gamConfig.threadYieldConfig=Zi.DISABLED),this}withDisableGptPreAuction(e,t){return Cn(this.pocOverrides?.disableGptPreAuction,e,t)&&(te.getInstance().disableGptPreAuction=!0),this}withDisableSchainForTam(e,t){return Cn(this.pocOverrides?.disableSchainForTam,e,t)&&this.stackLoadedConfig.tamConfig&&(this.stackLoadedConfig.tamConfig={...this.stackLoadedConfig.tamConfig,disableSchain:!0}),this}withIASConfig(e,t){const i=Cn(this.pocOverrides.iasConfig,e,t);return i&&(this.stackLoadedConfig.iasConfig=i,p(\"[IAS Module] IAS Config override\",i)),this}withDisableSingleRequest(e,t){const i=Cn(this.pocOverrides?.disableSingleRequest,e,t),n=this.stackLoadedConfig.adUnits.some((e=>e.roadblock));return i&&this.stackLoadedConfig.gamConfig&&!n&&(this.stackLoadedConfig.gamConfig.disableSingleRequest=!0),this}withDisableFetchLazyLoading(e,t){return Cn(this.pocOverrides?.disableFetchLazyLoading,e,t)&&(this.stackLoadedConfig.lazyLoading={...this.stackLoadedConfig.lazyLoading,configName:\"lazyLoadingGoogle disabled\",lazyLoadingGoogle:{...this.stackLoadedConfig.lazyLoading?.lazyLoadingGoogle,googleFetchMarginPercent:-1}}),this}withUseBaseGvlid(e,t){return Cn(this.pocOverrides?.useBaseGvlid,e,t)&&(this.stackLoadedConfig.prebidConfig.pbjsConfig={...this.stackLoadedConfig.prebidConfig.pbjsConfig,useBaseGvlid:!0}),this}withAdxRefreshTimer(e,t){const i=Cn(this.pocOverrides?.adxRefreshTimer,e,t);return i&&this.stackLoadedConfig.refreshConfig?.adUnitConfig.forEach((e=>{e.adxTimer=i})),this}withExternalAdServer(e,t){const i=Cn(this.pocOverrides?.externalAdServer,e,t);return i&&this.stackLoadedConfig.adUnits.forEach((e=>{i.includes(e.adUnitName)&&(e.externalAdServer=!0)})),this}withUseCanonicalUrl(e,t){return Cn(this.pocOverrides?.useCanonicalUrl,e,t)&&(this.stackLoadedConfig.prebidConfig.pbjsConfig.useCanonicalUrl=!0),this}withSecondaryBidders(e,t){const i=Cn(this.pocOverrides?.secondaryBidders,e,t);return i&&(this.stackLoadedConfig.prebidConfig.pbjsConfig.secondaryBidders=i),this}withReplaceS2SConfigWithNodeConfig(e,t){const i=Cn(this.pocOverrides?.replaceS2SConfigWithNodeConfig,e,t);if(i&&this.stackLoadedConfig.prebidConfig.pbjsConfig.s2sConfig){const e=\"pubstack_server\",t=this.stackLoadedConfig.prebidConfig?.pbjsConfig?.s2sConfig?.bidders??[];this.stackLoadedConfig.adUnits.filter((e=>i.includes(e.adUnitName))).forEach((i=>{const n=i.bidders.filter((e=>!t.includes(e.bidder)));!0===i.canOutstream&&i.biddersOutstream.push(e),i.bidders=[...n,{bidder:e,params:{adUnitName:i.adUnitName}}]}));const n=this.stackLoadedConfig.adUnits.filter((e=>e.bidders.some((e=>t.includes(e.bidder))))).flatMap((e=>e.bidders)).map((e=>e.bidder)).filter((e=>t.includes(e)));this.stackLoadedConfig.prebidConfig.pbjsConfig.s2sConfig.bidders=[e,...n];const s=this.stackLoadedConfig.prebidConfig.pbjsConfig.bidderAliases?.filter((e=>t.includes(e.bidderLabel))).map((t=>(t.bidderSource=e,t)))??[];this.stackLoadedConfig.prebidConfig.pbjsConfig.bidderAliases?.push(...s)}return this}withCustomTimeInView(e,t){const i=Cn(this.pocOverrides?.customTimeInView,e,t),n=this.stackLoadedConfig.refreshConfig;return i&&n&&n.adUnitConfig.forEach((e=>{e.customTimeInView=i})),this}withUpdateRefreshTimerInView(e,t){const i=Cn(this.pocOverrides?.updateRefreshTimerInView,e,t);if(this.stackLoadedConfig.refreshConfig&&i&&i.length>0){const e=[];this.stackLoadedConfig.refreshConfig.adUnitConfig.forEach((t=>{i.forEach((i=>{t.adUnitNames?.includes(i)&&(e.push({...t,refreshTimerInView:!0,adUnitNames:[i]}),t.adUnitNames.splice(t.adUnitNames.indexOf(i),1))}))})),this.stackLoadedConfig.refreshConfig.adUnitConfig=[...this.stackLoadedConfig.refreshConfig.adUnitConfig.filter((e=>(e.adUnitNames||[]).length>0)),...e]}return this}build(){return this.stackLoadedConfig}}function En(e,t,i,n){const{pocOverrides:s,runningABTest:a}=function(e,t,i){const{overrideABTest:n,...s}=e,a=Cn(n,t,i);if(!a||!function(e){return\"populationB\"in e&&\"object\"==typeof e.populationB&&\"ratio\"in e&&\"number\"==typeof e.ratio||(v(\"ABTest populationB should be an object and ratio a number\"),!1)}(a))return{pocOverrides:s,runningABTest:[]};const r=J(a.ratio),o=Object.keys(a.populationB);if(r){const e=Object.assign({...s},{...a.populationB});return m(`${In} Drew Poc Override ABTest: winner population B`,e),{pocOverrides:e,runningABTest:[{name:\"adm_ab_test\",value:\"poc:B\",gamTargeting:!0},...o.map((e=>({name:e,value:\"B\"})))]}}return m(`${In} Drew Poc Override ABTest: winner population A`,s),{pocOverrides:s,runningABTest:[{name:\"adm_ab_test\",value:\"poc:A\",gamTargeting:!0},...o.map((e=>({name:e,value:\"A\"})))]}}(t.pocOverrides??{},t.tagId,n.stackId),r=new wn(e,s).withConvertToInstreamAdUnit().withConvertToNativeAdUnit().withUseNativeAlias().withFirstId().withId5Id().withSkinRenderingSettings(t.tagId,n.stackId).withRefreshAlwaysInView(t.tagId,n.stackId).withrefreshBehaviorOnEmpty().withXplnConfig(t.tagId,n.stackId).withOutbrainConfig(t.tagId).withSkinFloor(t.tagId).withDsaConfig().withPrebidServerConfig(t.tagId).withPpidSolution(t.tagId,n.stackId).withConvertToInterstitialAdUnit().withFloorEnforcement(t.tagId).withDynamicPrebidFloors(t.tagId).withRoadblockOrder(t.tagId,n.stackId).withDisableThreadYield(t.tagId,n.stackId).withDisableGptPreAuction(t.tagId,n.stackId).withDisableSchainForTam(t.tagId,n.stackId).withIASConfig(t.tagId,n.stackId).withDisableSingleRequest(t.tagId,n.stackId).withDisableFetchLazyLoading(t.tagId,n.stackId).withAdxRefreshTimer(t.tagId,n.stackId).withExternalAdServer(t.tagId,n.stackId).withUseBaseGvlid(t.tagId,n.stackId).withUseCanonicalUrl(t.tagId,n.stackId).withSecondaryBidders(t.tagId,n.stackId).withReplaceS2SConfigWithNodeConfig(t.tagId,n.stackId).withCustomTimeInView(t.tagId,n.stackId).withUpdateRefreshTimerInView(t.tagId,n.stackId).build();return{...r,runningABTest:[...a,...r.runningABTest]}}const Tn=e=>!!e.priority&&!!e.conditions,$n=e=>!e.priority&&!e.conditions,_n=e=>\"elements\"in e;const Rn={AND:({elements:e},t)=>e.every((e=>Un(e,t))),OR:({elements:e},t)=>e.some((e=>Un(e,t)))},On={IN:({key:e,values:t},i)=>t.some((t=>t===i.get(e))),NOT_IN:({key:e,values:t},i)=>!t.some((t=>t===i.get(e)))};function Un(e,t){return _n(e)?Rn[e.op](e,t):On[e.op](e,t)}const Pn=e=>{if(e.abTest){if(!(e.abTest.length<2)){m(\"[A/B test] variants\",e.abTest.map((e=>e.name)).join(\", \"));const t=function(e){if(100!==e.reduce(((e,t)=>e+t),0))return p(\"[drawComplexAbTests] The sum of all probabilities should be equal to 100 and is not, we use the first version of the ab test\"),1;const t=e.reduce(((e,t)=>(e.length?e.push(e[e.length-1]+t):e.push(t),e)),[]),i=Math.floor(100*Math.random())+1;return t.findIndex((e=>i<=e))+1}(e.abTest.map((e=>e.ratio))),i=e.abTest[t-1];return m(\"[A/B test] winner\",i.name),{config:{...e,...i.configToMerge},winner:i.name}}v(\"The A/B test config is invalid: not enough variants\")}return{config:e}};class Ln{constructor(e,t,i){this.config=e,this.stack=t,this.stackVersion=i,this.runningABTest=[]}applyRulesABTest(){const{config:e,winner:t}=Pn(this.config);return this.config=e,t&&this.runningABTest.push({name:\"pbstck_ab_test\",value:t,gamTargeting:!0}),this}applyEngineABTest(e){const t=[];return e.multiformat&&!e.pocOverrides?.disableMultiformat&&(this.multiformatBidders=wt(e.multiformat.bidders,this.config.prebidConfig.pbjsConfig.bidderAliases??[]),e.multiformat.abTest&&(J(e.multiformat.abTest.ratio)?(t.push(\"mf:A\"),this.multiformatBidders.push(...wt(e.multiformat.abTest.bidders,this.config.prebidConfig.pbjsConfig.bidderAliases??[]))):t.push(\"mf:B\"))),t.length&&this.runningABTest.push({name:\"engine_ab_test\",value:t,gamTargeting:!0}),this}applyPocOverrides(e,t){if(e.pocOverrides){const{runningABTest:t,...i}=En(this.config,e,0,this.stack);this.config=i,this.runningABTest.push(...t)}return this}applyPageLevelBidderConfig(e){return this.config=function(e,t){const i=e.prebidConfig.pbjsConfig.bidderAliases??[];if(e.adUnits.forEach((e=>{e.bidders=e.bidders.map((e=>St(e,i)))})),e.prebidConfig.pbjsConfig.targetingBehaviors?.sendKVTargetings){const n=k(window),s=function(e,t,i){const n={};for(const[t,i]of e)n[t]=i;for(const e in t)1===t[e].length?n[e]=t[e][0]:n[e]=t[e];return{bidders:i,config:{ortb2:{site:{ext:{data:n}}},appnexusAuctionKeywords:n}}}(t,n,$t(e.adUnits).filter((t=>!e.prebidConfig.pbjsConfig.targetingBehaviors?.biddersBlackList.includes(t))));e.prebidConfig.pbjsConfig.bidderConfigs=[...e.prebidConfig.pbjsConfig.bidderConfigs||[],s];const a=Et(\"smartadserver\",i).filter((t=>!e.prebidConfig.pbjsConfig.targetingBehaviors?.biddersBlackList.includes(t)));a.length>0&&function(e,t,i,n){let s=\"\";for(const[t,i]of e)s+=`${t}=${i};`;for(const e in t)1===t[e].length?s+=`${e}=${t[e][0]};`:t[e].forEach((t=>{s+=`${e}=${t};`}));i.forEach((e=>{e.bidders.filter((e=>n.includes(e.bidder))).forEach((e=>{const t=e.params??{};t.target||(t.target=s)}))}))}(t,n,e.adUnits,a)}return e}(this.config,e),this}build(){return{...this.config,multiformatBidders:this.multiformatBidders,scopeId:this.stack.scopeId,stackId:this.stack.stackId,stackName:this.stack.stackName,version:this.stackVersion,runningABTest:this.runningABTest}}}async function xn(e,t,i,n){const s=function(e,t,i,n){const s=function(e,t,i,n,s){return`${e}/config/${t.scopeId.substring(0,8)}/${n.substring(0,8)}/${t.stackId}/${i}/${s}.json`}(e.configUrl,i,n,e.tagId,t);return s.replace(/([^:]\\/)\\/+/g,\"$1\")}(e,t,i,n);return new Promise((e=>{fetch(s).then((t=>{t.text().then((async t=>{try{const i=function(e){const t=JSON.parse(e),[i,n]=Zt(t,on,{coerce:!0});if(n)return n;throw new Error(`unable to parse JSON: ${i}`)}(t);e(i)}catch(t){v(`unable to load the configuration ${t}`),e(void 0)}}))})).catch((async t=>{v(`unable to load the configuration ${t}`),e(void 0)}))}))}async function Nn(e){return xn(e,e.device,e.stack,e.stackVersion).then((t=>{if(t)return function(e,t,i,n,s){return new Ln(e,t,i).applyRulesABTest().applyEngineABTest(n).applyPocOverrides(n,s).applyPageLevelBidderConfig(s).build()}(t,e.stack,e.stackVersion,e,e.pageContext)}))}var Dn,jn,Bn;!function(e){e.HISTORY_MUTATION=\"_pbstck_kleanads_historyMutation\",e.PAGE_CHANGE=\"_pbstck_kleanads_pageChange\",e.REFRESH_INIT=\"_pbstck_kleanads_refreshInit\"}(Dn||(Dn={})),function(e){e.SPA_RELOAD=\"admSPAReload\"}(jn||(jn={})),function(e){e.REPLACE_STATE=\"replaceState\",e.PUSH_STATE=\"pushState\"}(Bn||(Bn={}));const Mn=e=>{window.history[e]=new Proxy(window.history[e],{apply(t,i,n){const s=window.location.href,a=t.apply(i,n),r=new CustomEvent(Dn.HISTORY_MUTATION,{detail:{referrer:s,stateObj:n[0],title:n[1],url:n[2],type:e}});return dispatchEvent(r),a}})},Vn=()=>{Mn(Bn.REPLACE_STATE),Mn(Bn.PUSH_STATE)},Wn={excludedAdvertisers:[],excludedOrders:[],excludedLineItems:[],adxLineItems:[]},zn={pbjsFinished:!1,apsFinished:!1},Fn=\"[executor] [buffered]\";var Hn;!function(e){e[e.FirstCall=0]=\"FirstCall\",e[e.Refresh=1]=\"Refresh\"}(Hn||(Hn={}));class Gn{constructor(e,t,i,n){this.buffer=[],this.auctionRunning=!1,this.adUnitAuctionStatus=new Map,this.adServer=e,this.pbjs=t,this.aps=i,this.kleanadsRunCount=n}executeAdCall(e){if(0===e.length)return;const t=e.sort(((e,t)=>F(e.divId)-F(t.divId)));p(`${Fn} buffering adunits`,e),t.forEach((e=>{this.bufferAdUnits({adUnits:[e],origin:Hn.FirstCall})}))}executeAdCallRoadblock(e){if(0===e.length)return;const t=e.sort(ee);p(`${Fn} buffering adunits`,e),A(\"executor:roadblock\",{slotIds:t.map((e=>e.divId))}),this.bufferAdUnits({adUnits:t,origin:Hn.FirstCall})}bufferAdUnits(e){switch(this.buffer.push(e),e.origin){case Hn.FirstCall:e.adUnits?.forEach((e=>{this.adUnitAuctionStatus.set(e.divId,zn)}));break;case Hn.Refresh:this.adUnitAuctionStatus.set(e.refreshableAdUnit.adUnit.divId,zn);break;default:v(`${Fn} unknown buffer entry origin`)}this.startAuctionForBufferedAdUnits()}executeRefresh(e){this.bufferAdUnits({refreshableAdUnit:e,origin:Hn.Refresh})}startAuctionForBufferedAdUnits(){if(this.auctionRunning)return void m(`${Fn} auction already running, not starting a new one`);const e=this.buffer.shift();if(m(`${Fn} adunit taken from buffer`,e),e)switch(e.origin){case Hn.FirstCall:this.startAuction(e.adUnits);break;case Hn.Refresh:this.startAuction([e.refreshableAdUnit.adUnit],{labels:[\"pubstackRefresh\",`pubstackRefreshRank:${e.refreshableAdUnit.rank}`]});break;default:v(`${Fn} unknown buffer entry origin`)}else m(`${Fn} no more adunit to monetize in buffer`)}startAuction(e,t){this.auctionRunning=!0,e.forEach((e=>{Ie(e.divId,pe.START_AUCTION)})),p(`${Fn} starting header bidding for ${e.map((e=>e.divId))}`);const i=te.getInstance().kleanadsRunCount;if(this.pbjs){const n=this.pbjs.getPbjs();this.pbjs.startPbjsAuction(e,(()=>{this.kleanadsRunCount===i?this.pbjsFinished(n,e):p(`${Fn} kleanads run count has changed (from ${this.kleanadsRunCount} to ${i}), avoid calling pbjsFinished`)}),t)}this.aps&&this.aps.startApsAuction(e,(t=>{this.kleanadsRunCount===i?this.apsFinished(e,t):p(`${Fn} kleanads run count has changed (from ${this.kleanadsRunCount} to ${i}), avoid calling apsFinished`)})),this.pbjs||this.aps||this.adServer.executeWhenAdServerReady((()=>{this.kleanadsRunCount===i?this.callAdServer(e):p(`${Fn} kleanads run count has changed (from ${this.kleanadsRunCount} to ${i}), avoid calling AdServer`)}))}pbjsFinished(e,t){m(`${Fn} pbjs end callback for ${t.map((e=>e.divId)).join(\",\")}`,e.getAllPrebidWinningBids()),t.forEach((e=>{Ie(e.divId,pe.END_PBJS_AUCTION)})),this.adServer.executeWhenAdServerReady((()=>{m(`${Fn} pbjs end callback ad server ready ${t.map((e=>e.divId)).join(\",\")}`),this.adServer.setPbjsTargetings(e,t),t.forEach((e=>{const t=this.adUnitAuctionStatus.get(e.divId);t&&this.adUnitAuctionStatus.set(e.divId,{...t,pbjsFinished:!0})})),this.canCallAdServer(t)&&this.callAdServer(t)}))}apsFinished(e,t){m(`${Fn} aps end callback ${e.map((e=>e.divId)).join(\",\")}`,t),e.forEach((e=>Ie(e.divId,pe.END_APS_AUCTION))),this.adServer.executeWhenAdServerReady((()=>{m(`${Fn} aps end callback ad server ready ${e.map((e=>e.divId)).join(\",\")}`),this.adServer.setApsTargetings(e,t),e.forEach((e=>{const t=this.adUnitAuctionStatus.get(e.divId);t&&this.adUnitAuctionStatus.set(e.divId,{...t,apsFinished:!0})})),this.canCallAdServer(e)&&this.callAdServer(e)}))}canCallAdServer(e){const t=e.filter((e=>{const t=this.adUnitAuctionStatus.get(e.divId);return this.aps&&!this.pbjs?t&&t.apsFinished:this.pbjs&&!this.aps?t&&t.pbjsFinished:this.pbjs&&this.aps?t&&t.apsFinished&&t.pbjsFinished:void 0}));return t.length>0&&t.length!==e.length&&v(`${Fn} cannot call ad server for ${e.map((e=>e.divId)).join(\",\")}, some ad units are not ready`),t.length>0}callAdServer(e){if(this.auctionRunning=!1,this.startAuctionForBufferedAdUnits(),e.forEach((e=>{Ie(e.divId,pe.START_AD_SERVER_CALL)})),e.length>0){this.adServer.callAdServer(e);const t=e.map((e=>e.divId));p(`${Fn} ad server called ${t.join(\",\")}`)}}}const Kn=\"adServerAdUnitName\";function qn(e,t,i,n){const s=[];if(\"number\"!=typeof t&&\"\"===t||s.push(t),i&&0!==i.length){const e=function(e,t){return e.filter((e=>e!==Kn)).map((e=>t.get(e))).filter((e=>e)).join(\"/\")}(i,n);e&&s.push(e)}else b(\"Ad unit path config is missing for this site\");const a=`/${s.join(\"/\")}`;return i&&i.includes(Kn)?`${a}/${e}`:`${a}`}function Yn(e){return new Promise(((t,i)=>{if(window.lucead_loaded)return void t();window.lucead_loaded=!0;const n=document.createElement(\"script\");n.src=`https://s.lucead.com/prebid/${e}.js`,n.onload=()=>t(window.lucead_prebid),n.onerror=i,document.head.appendChild(n)}))}function Xn(e){return e.startsWith(\"css:\")?e.replace(\"css:\",\"\"):void 0}const Jn=[\"adyoulike\"],Qn=(e,t,i,n,s)=>{const a=[];if(e.includes(\"Banner\")&&a.push(\"Banner\"),e.includes(\"Outstream\")&&i.includes(t.bidder)&&a.push(\"Outstream\"),e.includes(\"Native\")&&!s&&a.push(\"Native\"),e.includes(\"Skin\")){const e=Jn.includes(t.bidder);n?n.includes(t.bidder)&&!e&&a.push(\"Skin\"):e||a.push(\"Skin\")}return e.includes(\"Instream\")&&a.push(\"Instream\"),a},Zn=e=>{return(t=e.sizes,t.filter(Q)).filter((e=>!_(e,[1800,1e3])));var t},es=e=>{const t=Zn(e);return 0===t.length?{}:{bannerSizes:t}},ts=e=>{const t=(e=>{const t=[];if(e.isInstream){if(void 0!==e.instreamParams)return[\"Instream\"];b(`Instream ad unit ${e.divId} is missing instreamParams`)}return Zn(e).length>0&&t.push(\"Banner\"),e.canOutstream&&t.push(\"Outstream\"),e.canNative&&(void 0!==e.nativeParams?t.push(\"Native\"):b(`Native ad unit ${e.divId} is missing nativeParams`)),e.sizes.some((e=>_(e,[1800,1e3])))&&t.push(\"Skin\"),t})(e),i=!!e.biddersNative?.length,n=e.bidders.map((n=>({mediaTypes:Qn(t,n,e.biddersOutstream,e.biddersSkin,i),bidder:n.bidder,params:n.params}))).filter((e=>e.mediaTypes.length>0));if(i&&e.biddersNative){const t=e.biddersNative.map((e=>({mediaTypes:[\"Native\"],bidder:e.bidder,params:e.params})));n.push(...t)}return{bidders:n,mediaTypes:t}};function is(e,t,i,n,s){return e.flatMap((e=>{const a=qn(e.adServerAdUnitName,i,n,t);if(e.bidders.forEach((e=>{if(\"lucead\"===e.bidder&&e.params?.siteId){const{siteId:t,...i}=e.params;e.params={...i,loader:Yn(t)}}})),e.dynamic)return function(e,t,i){return function(e){const t=Xn(e.divId)||`[id^=\"${e.divId}\"]`;try{return Array.from(document.querySelectorAll(t))}catch(e){return v(`${t} is not a valid CSS selector, ${e}`),[]}}(e).map((n=>{const s=n.id;return s||v(`Unable to find an id on DOM element for adUnit.divId ${e.divId}`),{...e,...es(e),...ts(e),divId:s,slotName:n?.attributes.getNamedItem(\"data-aps-slotname\")?.value||e.slotName||t,dynamic:!1,adUnitPath:n?.attributes.getNamedItem(\"data-adunitpath\")?.value||t,adServerAdUnitName:e.adServerAdUnitName,pubstackDeclarationTargetingKeys:i??[],getTargetings:()=>[...[...e.targeting?[e.targeting]:[],...e.extraTargetings||[]],...[...ss(n?.attributes),ns(s)]]}}))}(e,a,s);{const t=function(e){const t=Xn(e);try{return t?document.querySelector(t):document.getElementById(e)}catch(t){return v(`${e} is not a valid CSS selector, ${t}`),null}}(e.divId);if(t||\"interstitial\"===e.outOfPageType||e.anchor?.mode===_i.CREATE_NEW_DIV){t&&!t?.id&&v(`Unable to find an id on DOM element for adUnit.divId ${e.divId}`);const i=t?.attributes.getNamedItem(\"data-adunitpath\")?.value||a;return[{...e,...es(e),...ts(e),divId:t?.id??e.divId,adUnitPath:i,slotName:t?.attributes.getNamedItem(\"data-aps-slotname\")?.value||e.slotName||i,adServerAdUnitName:e.adServerAdUnitName,pubstackDeclarationTargetingKeys:s??[],getTargetings:()=>[...[...e.targeting?[e.targeting]:[],...e.extraTargetings||[]],...[...ss(t?.attributes)]]}]}return m(`Div id missing for ${e.divId}, no further action on this ad unit`),[]}}))}function ns(e){const t=new RegExp(\"\\\\D\",\"g\");return{key:\"ad_index\",value:e.replace(t,\"\")}}function ss(e){return Array.from(e??[]).filter((e=>e.name.startsWith(\"data-ad-\"))).map((e=>({key:e.name.replace(\"data-ad-\",\"\"),value:e.value})))}class as{constructor(e,t,i){this.stackConfig=e,this.kleanAdsConfig=t,this.pageContext=i,this.adUnits=[],this.callbacks=[]}alreadyUsedDivIds(){return this.adUnits.map((e=>e.divId))}setConfig(e,t,i){this.stackConfig=e,this.kleanAdsConfig=t,this.pageContext=i,this.adUnits=[],this.callbacks=[]}async executeWhenAdUnitsFound(e){const t=(i=this.stackConfig,n=this.kleanAdsConfig,s=this.pageContext,rs(i.adUnits,i,n,s)).filter((e=>!this.alreadyUsedDivIds().includes(e.divId)));var i,n,s;if(this.adUnits.push(...t),await e(this.adUnits),this.callbacks.push(e),!this.adUnitObserver){const e=async e=>{const t=function(e,t,i,n){return rs([e],t,i,n)}(e,this.stackConfig,this.kleanAdsConfig,this.pageContext).filter((e=>!this.alreadyUsedDivIds().includes(e.divId))).reduce(((e,t)=>(e.find((e=>e.divId===t.divId))?v(`We tried to prepare two times the same divId, skipping adUnit ${t.adServerAdUnitName} from the list`,t):(e.push(t),m(\"New adUnit dynamicaly loaded\",t.divId)),e)),[]);t.length>0&&(this.adUnits.push(...t),this.callbacks.forEach((async e=>{await e(t)})))};this.startAdUnitObserver(e)}}cleanObserverAndAdUnits(){this.adUnitObserver?.disconnect(),this.adUnitObserver=void 0,this.adUnits=[]}startAdUnitObserver(e){const t=this.alreadyUsedDivIds(),i=this.stackConfig.adUnits.filter((e=>!t.includes(e.divId)||e.dynamic)),n=document.body;if(!n)return void v(\"Body not found, cannot start observer\");const s=new MutationObserver(function(e,t){return(i,n)=>{i.filter((e=>\"childList\"===e.type&&e.addedNodes.length>0)).forEach((i=>{Array.from(i.addedNodes).filter((e=>e.nodeType===Node.ELEMENT_NODE)).forEach((i=>{e.forEach((e=>{const n=e.divId.startsWith(\"css:\")?e.divId.replace(\"css:\",\"\"):e.dynamic?`[id^=\"${e.divId}\"]`:`[id=\"${e.divId}\"]`;(i.matches(n)||i.querySelectorAll(n).length>0)&&t(e)}))}))}))}}(i,e));s.observe(n,{childList:!0,subtree:!0}),this.adUnitObserver=s}}function rs(e,t,i,n){const s=t?.gamConfig?.adUnitPathConfig??[];return is(e,n,function(e,t){const i=t?.gamConfig?.networkId??e.networkId,n=t?.gamConfig?.mcmIds&&t?.gamConfig?.mcmIds.length>0?t?.gamConfig?.mcmIds:e.mcmIds;return i?n?[i,...n].join(\",\"):i:\"\"}(i,t),s,i.pubstackDeclarationTargetingKeys)}class os{constructor(){this.name=\"AdUnitsManager\"}get adUnitsManager(){return this._adUnitsManager}async onStackConfigLoadSync({config:e,stackConfig:t}){this._adUnitsManager=new as(t,e,e.pageContext)}async onStackConfigLoad({config:e,stackConfig:t}){this._adUnitsManager?.setConfig(t,e,e.pageContext)}async clean(){this._adUnitsManager?.cleanObserverAndAdUnits()}}class ds{constructor(e,t){this.element=e,this.dateIn=0,this.pastTimeInView=0,this.isInview=!1,this.alwaysInView=t??!1,this.isTabActivated=\"visible\"===window.document.visibilityState,this.isVisible=!window.document.hidden,this.resetAt=0,this.hasBeenReset=!1}getTimeInView(e){return this.hasBeenReset?e>=this.dateIn&&this.dateIn>0&&(this.isInview||this.alwaysInView)&&this.isTabActivated?this.pastTimeInView+(e-this.dateIn):this.pastTimeInView:0}getTimeOnPage(e){return this.hasBeenReset?e-this.resetAt:0}resetTimer(e){(this.isInview||this.alwaysInView)&&this.isTabActivated&&(this.dateIn=e),this.resetAt=e,this.hasBeenReset=!0,this.pastTimeInView=0}updateTimerOnInViewChange(e,t){this.isInview=e,this.updateTimer(t)}updateTimerOnTabStatusChange(e,t){this.isTabActivated=e,this.updateTimer(t)}updateTimerOnVisibleChange(e,t){this.isVisible=e,this.updateTimer(t)}updateTimer(e){if((this.isInview||this.alwaysInView)&&this.isTabActivated)return 0===this.dateIn?void(this.dateIn=e):this.dateIn>0?void 0:void(this.dateIn=e);this.dateIn>0&&(e>=this.dateIn&&(this.pastTimeInView=this.pastTimeInView+(e-this.dateIn)),this.dateIn=0)}}const cs={root:null,rootMargin:\"0px\",threshold:.5},ls=\"[adUnitsObserver]\";class us{constructor(e,t){this.elements={},this.observer=new IntersectionObserver((e=>{this.handleIntersect(e,this)}),cs),this.configAlwaysInView=t,e.forEach((e=>{this.elements[e.id]=new ds(e,t?.[e.id]),this.observer.observe(e)})),addEventListener(\"visibilitychange\",(()=>{m(`${ls} visibilitychange`,window.document.visibilityState),\"visible\"===window.document.visibilityState?Object.keys(this.elements).forEach((e=>{this.elements[e].updateTimerOnTabStatusChange(!0,Date.now())})):Object.keys(this.elements).forEach((e=>{this.elements[e].updateTimerOnTabStatusChange(!1,Date.now())}))}))}isObserving(e){return e in this.elements}unobserve(e){this.isObserving(e)&&(this.observer.unobserve(this.elements[e].element),delete this.elements[e])}observe(e){this.isObserving(e.id)||(this.elements[e.id]=new ds(e,this.configAlwaysInView?.[e.id]),this.observer.observe(e))}getObservedDivIds(){return Object.keys(this.elements)}getTimeInView(e,t){return this.isObserving(e)?this.elements[e].getTimeInView(t):0}isInView(e){return!!this.isObserving(e)&&this.elements[e].isInview}getTimeOnPage(e,t){return this.isObserving(e)?this.elements[e].getTimeOnPage(t):0}resetTimers(e,t){e.forEach((e=>{this.isObserving(e)&&(m(`${ls} reseting time for ${e}`),this.elements[e].resetTimer(t))}))}getAdUnitInViewTimer(e){return this.elements[e]}handleIntersect(e,t){e.forEach((e=>{const i=Date.now();t.elements[e.target.id].updateTimerOnInViewChange(e.isIntersecting,i),m(`${ls}`,e.target.id,e.isIntersecting?\"in view\":\"out of view\")}))}}function hs(e,t,i,n,s,a){if(r){const r=document.getElementById(t),o=r?.parentElement,d=\"refresh_kleanads\";let c=document.getElementById(`${d}_${t}-refresh-debug`);c||(c=document.createElement(\"div\"),c.id=`${d}_${t}-refresh-debug`,c.style.position=\"absolute\",c.style.bottom=\"5px\",c.style.left=\"5px\",c.style.zIndex=\"99999999\",c.style.backdropFilter=\"blur(6px)\",c.style.textShadow=\"1px 1px 1px rgba(0, 0, 0, 0.3)\",c.style.fontFamily=\"Arial, sans-serif\",c.style.borderRadius=\"5px\",c.style.color=\"white\",c.style.padding=\"8px 16px\",c.style.display=\"flex\",c.style.flexDirection=\"column\",c.style.gap=\"5px\",c.style.textAlign=\"left\",c.style.border=\"1px solid white\",c.style.transition=\"background-color 250ms linear\",o?.prepend(c));let l=document.getElementById(`${d}_${t}-refresh-div-id`);l||(l=document.createElement(\"span\"),l.id=`${d}_${t}-refresh-div-id`,c.appendChild(l)),l.textContent=`${t}`,l.style.fontSize=\"1rem\",l.style.fontWeight=\"bold\";let u=document.getElementById(`${d}_${t}-refresh-debug-timer`);u||(u=document.createElement(\"span\"),u.id=`${d}_${t}-refresh-debug-timer`,c.appendChild(u)),u.textContent=`Time in view : ${Math.floor(i/1e3).toString()}`,u.style.fontSize=\"1rem\";let h=document.getElementById(`${d}_${t}-refresh-debug-refresh-rank`);h||(h=document.createElement(\"span\"),h.id=`${d}_${t}-refresh-debug-refresh-rank`,c.appendChild(h));const g=n??\"∞\";h.textContent=`Refresh rank : ${e.getRefreshRank(t).toString()} / ${g}`,h.style.fontSize=\"1rem\",c.style.backgroundColor=s&&a?\"rgba(55, 110, 79, 0.7)\":\"rgba(140, 71, 79, 0.7)\"}}const gs=\"[RefreshState]\";class fs{constructor(e,t,i){this.adUnitsObserver=new us(e,i),this.exclusions=t,this.lastRenderInfo={},this.refreshRank={},this.hasAuctionInProgress={},this.shouldRefreshBeforeTimerEnd={},this.consecutiveSecondChanceAttempts={},e.forEach((e=>{this.refreshRank[e.id]=0,this.hasAuctionInProgress[e.id]=!1,this.shouldRefreshBeforeTimerEnd[e.id]=!1,this.consecutiveSecondChanceAttempts[e.id]=0}))}unobserve(e){m(`${gs} refresh unobserve`,e),this.adUnitsObserver.unobserve(e)}addAdUnits(e){e.forEach((e=>{m(`${gs} refresh addAdUnit`,e.id),this.adUnitsObserver.observe(e),this.refreshRank[e.id]=0,this.hasAuctionInProgress[e.id]=!1}))}getTimeInView(e,t){return this.adUnitsObserver.getTimeInView(e,t)}getTimeOnPage(e,t){return this.adUnitsObserver.getTimeOnPage(e,t)}isInView(e){return this.adUnitsObserver.isInView(e)}needRefresh(e,t){const i=t.divId;if(!this.adUnitsObserver.isObserving(i))return!1;if(this.cappingReached(i,t.capping))return!1;if(this.hasAuctionInProgress[i])return!1;if(this.shouldRefreshBeforeTimerEnd[i])return this.shouldRefreshBeforeTimerEnd[i]=!1,!0;const n=this.getTimeInView(i,e),s=this.getTimeOnPage(i,e),a=this.getTimer(i,t.timer,t.refreshSpecificRules,t.adxTimer);hs(this,i,n,t.capping,this.adUnitsObserver.getAdUnitInViewTimer(i)?.isTabActivated,this.adUnitsObserver.getAdUnitInViewTimer(i)?.isInview);const r=t.alwaysInView,o=t.refreshTimerInView,d=this.getLastWinningMediaType(i),c=\"video\";if(r||d===c||o)return r&&d!==c?s>=a:n>=a;{const e=this.isInView(i),r=t.customTimeInView??1e3;return e&&n>=r&&s>=a}}cappingReached(e,t){return!!t&&t<this.getRefreshRank(e)}getTimer(e,t,i,n){if(\"video\"===this.getLastWinningMediaType(e))return 3e4;if(this.isLastWinningAdx(e))return n?1e3*n:1e3*t;const s=this.getLastWinningBidder(e),a=this.getLastSize(e),r=[];return i.forEach((e=>{if(!e.timer)return;const t=!!s&&e.bidders.includes(s)&&0===e.sizes.length,i=a&&e.sizes.find((e=>_(e,a)))&&0===e.bidders.length,n=s&&a&&e.bidders.includes(s)&&e.sizes.find((e=>_(e,a)));(t||i||n)&&r.push(1e3*e.timer)})),r.length>0?Math.max(...r):1e3*t}getObservedDivIds(){return this.adUnitsObserver.getObservedDivIds()}getRefreshRank(e){const t=this.refreshRank[e];return this.adUnitsObserver.isObserving(e)&&t?t:0}updateAdUnitStatus(e,t){const i=e.divId;if(this.refreshRank[i]+=1,this.lastRenderInfo[i]=e,m(`${gs} update status ${i} new refresh rank ${this.refreshRank[i]}`),e.isEmpty){if(t.refreshBehaviorOnEmpty===ji.Continue)return;if(t.refreshBehaviorOnEmpty===ji.InstantSecondChance)return void(this.consecutiveSecondChanceAttempts[t.divId]<1&&(this.consecutiveSecondChanceAttempts[t.divId]++,this.shouldRefreshBeforeTimerEnd[t.divId]=!0));m(`${gs} ${i} is excluded from refresh from now on (empty impression)`),this.unobserve(i)}else this.consecutiveSecondChanceAttempts[t.divId]=0;const n=t.refreshSpecificRules.filter((e=>!e.timer)),s=this.getLastWinningBidder(t.divId),a=this.getLastSize(t.divId);(!!n.find((e=>{const t=!!s&&e.bidders.includes(s),i=!!a&&!!e.sizes.find((e=>_(e,a))),n=t&&0===e.sizes.length,r=i&&0===e.bidders.length;return n||r||t&&i}))||this.isExcludedByConfig(t.divId)||this.cappingReached(i,t.capping))&&(m(`${gs} ${i} is excluded from refresh from now on`),this.unobserve(i))}getLastSize(e){return this.lastRenderInfo[e]?.size||void 0}getLastAdvertiserId(e){return this.lastRenderInfo[e]?.advertiserId||void 0}getLastWinningBidder(e){return this.lastRenderInfo[e]?.hb_bidder}getLastWinningMediaType(e){return this.lastRenderInfo[e]?.hb_mediaType}resetTimer(e,t){this.adUnitsObserver.resetTimers([e],t),this.hasAuctionInProgress[e]=!1}setAuctionInProgress(e){this.hasAuctionInProgress[e]=!0}isExcludedByConfig(e){const t=this.getLastAdvertiserId(e),i=this.getLastWinningLineItemId(e),n=this.getLastWinningOrderId(e),s=!!t&&this.exclusions.excludedAdvertisers.includes(t),a=!!n&&this.exclusions.excludedOrders.includes(n),r=!!i&&this.exclusions.excludedLineItems.includes(i);return s||a||r}getLastWinningLineItemId(e){return this.lastRenderInfo[e]?.lineItemId||void 0}getLastWinningOrderId(e){return this.lastRenderInfo[e]?.orderId||void 0}isLastWinningAdx(e){return-1===this.lastRenderInfo[e]?.lineItemId||this.exclusions.adxLineItems.includes(this.lastRenderInfo[e]?.lineItemId||0)}}const ps=\"[refresh]\";const ms=\"[refresh]\";async function bs(e,t,i,n,s,a){const r=[],o=[],d={},c=new fs([],n,d);e.executeWhenAdUnitsFound((async e=>{const t=e.filter((e=>a?e.mediaTypes.includes(\"Instream\"):!e.mediaTypes.includes(\"Instream\")));p(a?`${ms} [instream] adUnits found for refresh`:`${ms} adUnits found for refresh`,t),function(e,t){return e.flatMap((e=>{const i=e.adUnitNames.flatMap((e=>t.filter((t=>t.adUnitName.startsWith(e))))),n=e.specificRules;return i.filter((e=>!!e)).flatMap((t=>({...t,alwaysInView:e.alwaysInView,refreshTimerInView:e.refreshTimerInView,capping:e.capping,timer:e.timer,refreshSpecificRules:n,refreshBehaviorOnEmpty:e.refreshBehaviorOnEmpty,adxTimer:e.adxTimer,customTimeInView:e.customTimeInView})))}))}(i,t).forEach((e=>{r.push(e),e.alwaysInView&&(d[e.divId]=!0);const t=document.getElementById(e.divId);t?(o.push(t),c.addAdUnits([t])):p(`${ms} element to refresh not found with id`,e.divId)}))})),s.renderListener((e=>function(e,t,i){const n=e.divId,s=t.find((e=>e.divId===n));if(s){const t=e.hb_bidder;i.resetTimer(n,Date.now()),i.updateAdUnitStatus(e,s),t&&m(`${ps} we have a winning bidder for ${n} that is from prebid: ${t}`),m(`${ps} render on`,n)}}(e,r,c)));const l=()=>{const e=[],i=Date.now();c.getObservedDivIds().forEach((t=>{const n=r.find((e=>e.divId===t));n&&c.needRefresh(i,n)&&e.push(n)})),e.length>0&&e.forEach((e=>{const i=c.getRefreshRank(e.divId);p(`${ms} refresh on ${e.divId} with rank ${i}`);const n={adUnit:e,rank:i};s.setRefreshTargeting(n),t.executeRefresh(n),c.setAuctionInProgress(e.divId)})),c.getObservedDivIds().length>=0?setTimeout((()=>{l()}),100):p(\"${LOG_PREFIX} There is no more adUnits observed, stop refreshCycle\")};l();window.dispatchEvent(new CustomEvent(Dn.REFRESH_INIT,{detail:{stopRefresh:e=>{e&&Array.isArray(e)&&e?.length>0?e.forEach((e=>{c.unobserve(e)})):c.getObservedDivIds().forEach((e=>{c.unobserve(e)}))}}}));const u=()=>{window.removeEventListener(Dn.PAGE_CHANGE,u),p(\"${LOG_PREFIX} history mutation event received\"),s.removeRenderListener(),o.forEach((e=>{c.resetTimer(e.id,Date.now()),c.unobserve(e.id)})),c.refreshRank={},c.lastRenderInfo={}};window.addEventListener(Dn.PAGE_CHANGE,u)}async function vs(e,t){Ae(fe.BEGIN_CONFIGURE),await q(e,{beforeStart:!0});const i=window,s=e.pocOverrides?.waitForEventToConfigure;s&&await new Promise(((e,t)=>{const i=setTimeout((()=>{v(\"Wait for configure event is too long\"),t()}),6e4),n=()=>{window.removeEventListener(s||\"\",n),clearTimeout(i),e()};m(`[CONFIGURE] wait for event ${s} to start kleanads`),window.addEventListener(s,n)})),p(`Configure kleanads.js (version: ${e.kleanadsVersion}, run count: ${te.getInstance().kleanadsRunCount})`);const a=function(e,t){const i=t.sort(Y);for(const t of i)if(e>=t.size)return t.device;return\"desktop\"}(i.innerWidth,e.screenSizeBreakpoints);!function(e,t,i,s){d=new n(e,t,i,s),c=e,l=t}(e.tagId,e.kleanadsVersion,a,function(e,t){return Cn(e,t,\"\")}(e.pocOverrides?.traceThrottling,e.tagId)),te.getInstance().setUprState(e.pocOverrides?.uprState,e.pocOverrides?.uprRatio);const r=function(e,t){const i=Te(t),n=new Map(i.map((({key:e,defaultValue:t})=>[e,t])));e.document.querySelectorAll('meta[name^=\"pbstck_context:\"]').forEach((e=>{const t=e.attributes.getNamedItem(\"name\")?.value.substring(15).toLowerCase(),s=e.attributes.getNamedItem(\"content\")?.value.toLowerCase();if(t&&s){const e=i.find((({key:e})=>e===t));e&&(function(e,t){return t.defaultValue===e||(t.otherValues??[]).includes(e)}(s,e)?n.set(t,s):b(`${Ee} Unknown ${t} value ${s}`))}}));const s=new URLSearchParams(e.location.search);for(const e of s.keys())e.startsWith(\"pbstck_context:\")&&n.set(e.slice(15),s.get(e)||\"\");return n}(i,e.context);if(0===r.size)p(\"[context] No context set\");else{let e=\"\";r.forEach(((t,i)=>{e+=`\\n${i}=>${t}`})),p(`[context] The following context will be used:${e}`,r)}const o=function(e,t){const i=e.filter(Tn).sort(((e,t)=>e.priority-t.priority)),n=e.filter($n);if(0===n.length)return void v(\"[stacks] Could not find default stack\");n.length>1&&v(\"[stacks] Multiple default stacks found\");const s=n[0];return i.find((e=>Un(e.conditions,t)))??s}(e.stacks,r);if(!o)return void v(\"No stack found, stopping monetization\");p(`[stacks] served stack: ${o.stackId} ${o.priority||o.conditions?\"\":\"(default stack)\"}`);const u=As(o.versions).toString(),h={...e,device:a,stack:o,stackVersion:u,pageContext:r,consentlessMode:e.pocOverrides?.consentlessMode,noCmp:w(),spaMode:e.spaConfig?.[e.tagId]?.mode,pubstackWindow:i,instreamType:Sn(e.tagId,e.pocOverrides?.instreamConfig)},g=new pt(h,t);f(u);return{configPromise:Nn(h),kleanAdsConfig:h,moduleService:g}}async function ys(e){const{configPromise:t,kleanAdsConfig:i,moduleService:n}=e;p(\"Starting kleanads\"),Ae(fe.BEGIN_START);const s=i.noCmp||await ke(window);await n.modulesDispatchEvent(\"onAfterConsent\"),await q(i,{beforeStart:!1});const a=i.stacks.find((e=>e.stackId===function(e){return e.pocOverrides?.consentlessStacks?.[e.tagId]}(i)));if(s){const e=await n.modulesDispatchEvent(\"onAfterConsentAccepted\");await Promise.all(e)}else{p(\"Consent refused\");const e=await n.modulesDispatchEvent(\"onAfterConsentRefused\");await Promise.all(e),a&&(i.stack=a,i.stackVersion=As(a.versions).toString(),f(i.stackVersion),p(\"Using following consentless stack\",a.stackId,a))}if(s||i.consentlessMode||a){await n.modulesDispatchEvent(\"onBeforeStackConfigLoad\");const e=s?t:Nn(i);let a=await e;if(a&&i.pocOverrides?.optimizationModule&&(a=await Vt(a),m(\"[pocOverrides] Optimization module finished\")),p(\"[config] kleanAdsConfig:\",i),p(\"[config] stackLoadedConfig:\",a),a){if(document.body||v(\"no body element found\"),i.pocOverrides&&i.pocOverrides.grapeshotTargetings){m(\"[pocOverrides] Poc Grapeshot enabled\");const e=await async function(e){return new Promise((t=>{const i=`${e}${encodeURIComponent(window.location.href)}`,n=document.createElement(\"script\");n.async=!0,n.src=i,n.onload=()=>t(window.gs_channels),setTimeout((()=>t(void 0)),3e3),n.onerror=()=>t(void 0),document.head.append(n)}))}(i.pocOverrides.grapeshotTargetings);te.getInstance().grapeshotValues=e}await n.modulesDispatchEvent(\"onStackConfigLoad\",{stackConfig:a});const e=n.getLoadedModuleInstance(xt)?.pbjs;e&&await n.modulesDispatchEvent(\"onAfterPrebidReady\",{prebid:e});const t=n.getLoadedModuleInstance(gt)?.aps,s=n.getLoadedModuleInstance(ht)?.adServer;s&&await n.modulesDispatchEvent(\"onAfterAdServerReady\",{adServer:s});const r=n.getLoadedModuleInstance(os)?.adUnitsManager;if(!s)return void v(\"no adServer found, stopping monetization\");if(!r)return void v(\"no adUnitManager found, stopping monetization\");$e(window,i.context,a.gamConfig?.adUnitPathConfig??[]);const o=te.getInstance().kleanadsRunCount,d=new Gn(s,e,t,o),c=n.getLoadedModuleInstance(ht)?.instreamAdServer,l=c?function(e,t,i,n,s){return e.adUnits.some((e=>e.isInstream))?new Gn(s,t,i,n):void 0}(a,e,t,o,c):function(e,t,i,n,s){return e.adUnits.some((e=>e.isInstream))?new Oe(new le(window,t.pageContext,t.device,t.instreamType),i,n,s):void 0}(a,i,e,t,o),u=async e=>{p(\"[config] adUnits to monetize:\",e),await n.modulesDispatchEvent(\"onPrepareAdUnits\",{toPreparedAdUnits:e}),jt(e,d,l,a.lazyLoading)};await r.executeWhenAdUnitsFound(u);const h=a.refreshConfig;if(i.globalRefreshConfig&&h){const e=Cn(i.pocOverrides?.disableRefreshExclusions,i.tagId,a.stackId),t=i.networkId&&!e?await ks(i.configUrl,i.networkId,i.stack.scopeId):Wn;bs(r,d,h.adUnitConfig,t,s,!1),l&&c&&function(e){return\"executeRefresh\"in e}(l)&&bs(r,l,h.adUnitConfig,t,c,!0)}const g=n.getLoadedModuleInstance(ht)?.externalApiAdServer,f=g?new Gn(g,e,t,o):void 0;f&&g&&await n.modulesDispatchEvent(\"onAfterExternalApiReady\",{monetize:e=>{const t=r.adUnits.find((t=>t.divId===e));return t?function(e,t,i){return new Promise(((n,s)=>{t.addCallback(e.divId,n)?i.executeAdCall([e]):s(`KSERR_03 - id ${e.divId} is not correctly configured for manual monetization`)}))}(t,g,f):Promise.reject(`KSERR_02 - id ${e} not found on page`)}})}else v(\"no input configuration, stopping monetization\")}else p(\"consent not given, no monetization\");switch(i.spaMode){case\"manual\":m(\"[SPA] manual SPA enabled\"),Ss((()=>{m(\"[SPA] manual page change requested, restarting kleanads.js\"),Is(i,n)}));break;case\"auto\":m(\"[SPA] auto SPA enabled\"),Vn(),Cs((()=>{m(\"[SPA] page change detected, restarting kleanads.js\"),Is(i,n)}))}ye(ge.MAIN_THREAD_END)}function As(e){const t=e.sort(((e,t)=>e.ratio-t.ratio));return J(void 0!==t[0].ratio?t[0].ratio:100)?t[0].version:t[1].version}const Is=async(e,t)=>{Ae(fe.SPA_RELOAD);const i=te.getInstance();i.setKleanadsRunCount(i.kleanadsRunCount+1);const n=t.getModules();await t.modulesCleanUp(),p(\"Restarting kleanads\");const s=await vs(e,n);s&&ys(s)},Cs=e=>{const t=new MutationObserver((()=>{n()})),i=e=>{const i=e,n=new URL(i.detail.referrer),s=(a=i.detail.url)?`${a}`.startsWith(\"http\")?new URL(a).pathname:`${a}`:\"\";var a;n.pathname!==s&&t.observe(document.head,{attributes:!0,childList:!0,subtree:!0})};window.addEventListener(Dn.HISTORY_MUTATION,i);const n=()=>{window.removeEventListener(Dn.HISTORY_MUTATION,i),t.disconnect(),window.dispatchEvent(new CustomEvent(Dn.PAGE_CHANGE)),e()}},Ss=e=>{const t=()=>{i()};window.addEventListener(jn.SPA_RELOAD,t);const i=()=>{window.removeEventListener(jn.SPA_RELOAD,t),window.dispatchEvent(new CustomEvent(Dn.PAGE_CHANGE)),e()}},ks=async(e,t,i)=>await fetch(`${e}/refresh-exclusions/${t}/${i}/currentRefreshInfo.json`).then((async e=>e.json().then((e=>e)).catch((e=>{v(`unable to extract line items with no refresh: ${e}`)})))).catch((e=>v(`unable to get line items with no refresh: ${e}`)));const ws=\"[parallax]\";class Es{constructor(e,t=[]){this.id=e.divId,this.blockedBidders=wt(Es.BLOCKED_ADAPTERS,t);const i=document.getElementById(this.id);if(!i)throw new Error(`${ws} container not found for adUnit ${this.id}`);const n=(e.bannerSizes??[]).reduce(((e,[,t])=>t>e?t:e),0);this.adUnitContainerMaxHeightPx=Math.max(n,600)/2,this.minViewableHeightPx=Math.min(this.adUnitContainerMaxHeightPx+10,310),this.adUnitContainer=i;const s=this.adUnitContainer.attachShadow({mode:\"open\"});s.innerHTML=`\\n      <div id=\"${Es.PARALLAX_CLIP_ID}\"><slot></slot></div>\\n    `,this.adUnitContainerShadowRoot=s,this.cacheLatestBidWon(),this.observeMutations(),m(`${ws} prepared parallax for adUnit ${this.id}`)}getHighestChildRect(e){const t=e.children;if(0===t.length)return;const i=(e=>e.reduce(((e,t)=>{const i=getComputedStyle(e),n=getComputedStyle(t);return parseInt(n.height)>parseInt(i.height)?t:e}),e[0]))(Array.from(t));return i.getBoundingClientRect()}cacheLatestBidWon(){const e=window?.kleanadsPbjs;if(e)try{e.onEvent(\"auctionEnd\",(e=>{e.adUnitCodes?.includes(this.id)&&(this.latestBidWonInfo=void 0)})),e.onEvent(\"bidWon\",(t=>{if(t.adUnitCode===this.id){const{bidderCode:i,size:n}=t,s=this.blockedBidders.some((t=>i===t||e?.aliasRegistry?.[i]===t)),a=Es.BLOCKED_SIZES.some((e=>e===n)),r=\"banner\"===t?.mediaType;this.latestBidWonInfo={isParallaxable:r&&!a&&!s}}}))}catch(e){b(`${ws} unable to listen to bidWon event`,e)}else b(`${ws} pbjs not loaded, unable to listen to bidWon event`)}observeMutations(){this.resizeObserver=new ResizeObserver((e=>{const t=e.some((e=>Array.from(e.target.parentElement?.children??[]).some((e=>e.getBoundingClientRect().height>this.adUnitContainerMaxHeightPx))));(this.latestBidWonInfo?this.latestBidWonInfo.isParallaxable&&t:t)?this.renderParallax():this.cleanUp()})),this.mutationObserver=new MutationObserver((e=>{this.mutationDebounceTimeout&&clearTimeout(this.mutationDebounceTimeout),this.mutationDebounceTimeout=setTimeout((()=>{this.mutationDebounceTimeout=void 0,e.flatMap((e=>Array.from(e.addedNodes))).forEach((e=>{e instanceof HTMLElement&&this.resizeObserver?.observe(e)})),e.flatMap((e=>Array.from(e.removedNodes))).forEach((e=>{e instanceof HTMLElement&&this.resizeObserver?.unobserve(e)}))}),Es.MUTATION_DEBOUNCE_TIMEOUT_VALUE_MS)})),this.mutationObserver.observe(this.adUnitContainer,{childList:!0})}renderParallax(){this.adUnitContainer.classList.add(Es.PARALLAX_ADUNIT_CONTAINER_CLASS),this.adUnitContainerShadowRoot.getElementById(Es.PARALLAX_CLIP_ID)?.classList.add(Es.PARALLAX_CLIP_ENABLED_CLASS);const e=this.getHighestChildRect(this.adUnitContainer),t=10+(window.innerHeight-(e?.height??0))/2,i=new CSSStyleSheet;i.insertRule(`#${Es.PARALLAX_CLIP_ID}.${Es.PARALLAX_CLIP_ENABLED_CLASS} { height: ${this.minViewableHeightPx}px; width: ${e?.width??0}px; clip-path: rect(0 auto ${this.minViewableHeightPx}px 0); position: relative; margin: 0 auto; } `),i.insertRule(`#${Es.PARALLAX_CLIP_ID}.${Es.PARALLAX_CLIP_ENABLED_CLASS} ::slotted(*) {\\n        position: fixed;\\n        top: ${t}px;\\n      }`),this.adUnitContainerShadowRoot.adoptedStyleSheets=[i]}cleanUp(){this.adUnitContainer.classList.remove(Es.PARALLAX_ADUNIT_CONTAINER_CLASS),this.adUnitContainerShadowRoot.getElementById(Es.PARALLAX_CLIP_ID)?.classList.remove(Es.PARALLAX_CLIP_ENABLED_CLASS)}}Es.MUTATION_DEBOUNCE_TIMEOUT_VALUE_MS=40,Es.PARALLAX_ADUNIT_CONTAINER_CLASS=\"adm-parallax\",Es.PARALLAX_CLIP_ID=\"adm-parallax-clip\",Es.PARALLAX_CLIP_ENABLED_CLASS=\"adm-parallax-clip-enabled\",Es.BLOCKED_ADAPTERS=[\"invibes\",\"seedtag\",\"kargo\",\"ogury\"],Es.BLOCKED_SIZES=[\"1x1\"];const Ts=(e,t)=>{try{return new Es(e,t)}catch(t){b(`${ws} unable to prepareParallax for adUnit ${e.divId}`,t)}};var $s;class _s extends HTMLElement{constructor(){super();const e=window.kleanadsPbjs;if(this.aliasedBidders={},e){try{this.aliasedBidders=e.aliasRegistry}catch(e){b(\"[pbstck-sticky] unable get the list of aliases\",e)}try{e.onEvent(\"bidWon\",this.winningBid.bind(this))}catch(e){b(\"[pbstck-sticky] unable to listen to bidWon event\",e)}}else b(\"[pbstck-sticky] pbjs not loaded, unable to listen to bidWon event\");this.attachShadow({mode:\"open\"}),this.mutationObserver=new MutationObserver((e=>{this.isAddingCreative(e)&&($s.shouldDisplay=!0),this.updateShadowLayout()})),this.addEventListener(\"close\",(()=>{m('[pbstck-sticky] event \"close\" caught'),this.close()}))}isBidderNotToDisplay(e){return $s.adaptersNotToDisplay.includes(e)||$s.adaptersNotToDisplay.includes(this.aliasedBidders[e])}winningBid(e){e.adUnitCode===this.id&&this.isBidderNotToDisplay(e.bidderCode)&&(m(\"[pbstck-sticky] blocked bidder, preventing display\",e),$s.shouldDisplay=!1,this.updateShadowLayout())}close(){m(\"[pbstck-sticky] closing sticky component\"),this.shadowRoot&&(this.mutationObserver.disconnect(),this.shadowRoot.innerHTML=\"\\n          <style>\\n              :host {\\n                display: none;\\n              }\\n          </style>\")}isAddingCreative(e){return e[0]?.addedNodes[0]&&e[0]?.target.parentElement?.id===this.id}connectedCallback(){this.isConnected&&(this.setAttribute(\"data-pbstck-component\",\"no-ad\"),this.setShadowDom(\"<div></div>\"),this.updateShadowLayout(),this.mutationObserver.observe(this,{subtree:!0,childList:!0}))}disconnectedCallback(){this.mutationObserver.disconnect()}attributeChangedCallback(){this.updateShadowLayout()}getHighestChild(){const e=Array.from(this.children);if(0!==e.length)return Rs(e)}setShadowDom(e){this.shadowRoot&&($s.shouldDisplay?this.shadowRoot.innerHTML=`\\n          <style> \\n              :host {\\n                display: block;\\n                max-height: ${$s.maxHeight}px;\\n                overflow: hidden;\\n                position: fixed;\\n                bottom: 0;\\n                left: 0;\\n                right: 0;\\n                margin: 0;\\n                padding: 0;\\n                z-index: 99999999;\\n              }\\n              .sticky-button {\\n                height: 28px;\\n                width: 28px;\\n                background: ${$s.backgroundColor};\\n                position: absolute;\\n                bottom: 0;\\n                right: 0;\\n                border-radius: 5px 0 0 0;\\n                box-shadow: rgba(0, 0, 0, 0.2) -2px -2px 3px -1px, rgba(0, 0, 0, 0.1) -1px -1px 2px -1px !important;\\n              }\\n              .sticky-button-container {\\n                height: 30px;\\n                position: relative;\\n              }\\n              .sticky-button-text {\\n                display: block;\\n                height: 22px;\\n                width: 22px;\\n                padding: 3px;\\n              }\\n              .sticky-container {\\n                background: ${$s.backgroundColor};\\n                padding: 8px 0;\\n                box-shadow: rgba(0, 0, 0, 0.2) 0px -1px 5px -1px, rgba(0, 0, 0, 0.1) 0px 1px 2px -1px !important;\\n              }\\n              .sticky-container slot > * {\\n                position: relative;\\n              }\\n              ::slotted(*) {\\n                position: relative;\\n              }\\n              .cross {\\n                display: block;\\n              }\\n              .sticky-container slot {\\n                width: fit-content;\\n                width: -moz-fit-content;\\n                block-size: fit-content;\\n                margin: 0 auto !important;\\n                display: block;\\n              }\\n            }\\n          </style>\\n          ${e}`:this.shadowRoot.innerHTML=\"\\n          <style>\\n              :host {\\n                display: block;\\n                width: 100%;\\n                height: 1px;\\n                background: transparent;\\n                position: fixed;\\n                bottom: 0;\\n              }\\n          </style><div></div>\")}updateShadowLayout(){if(m(`[pbstck-sticky] updating element ${this.id}`),!this.shadowRoot)return;this.setAttribute(\"data-pbstck-component\",\"sticky\");const e=document.createElement(\"div\");e.className=\"sticky-container\";const t=document.createElement(\"slot\");e.append(t),this.setShadowDom(`${e.outerHTML}`);const i=this.getHighestChild();if(i&&$s.shouldDisplay){i.style.display=\"block\",i.style.margin=\"0 auto\",i.style.bottom=\"0\",i.style.maxHeight=`${$s.maxCreativeHeight}px`;const e=document.createElement(\"div\");e.className=\"sticky-button-container\";const t=document.createElement(\"div\");t.className=\"sticky-button\";const n=document.createElement(\"div\");n.className=\"sticky-button-text\",n.addEventListener(\"click\",(()=>{m(\"[pbstck-sticky] Close button pressed\"),this.close()}));const s=document.createElementNS(\"http://www.w3.org/2000/svg\",\"path\");s.setAttribute(\"d\",\"M 5.3,18.7 C 5.5,18.9 5.7,19 6,19 6.3,19 6.5,18.9 6.7,18.7 l 5.3,-5.3 5.3,5.3 c 0.2,0.2 0.5,0.3 0.7,0.3 0.2,0 0.5,-0.1 0.7,-0.3 0.4,-0.4 0.4,-1 0,-1.4 L 13.4,12 18.7,6.7 c 0.4,-0.4 0.4,-1 0,-1.4 -0.4,-0.4 -1,-0.4 -1.4,0 L 12,10.6 6.7,5.3 c -0.4,-0.4 -1,-0.4 -1.4,0 -0.4,0.4 -0.4,1 0,1.4 l 5.3,5.3 -5.3,5.3 c -0.4,0.4 -0.4,1 0,1.4 z\");const a=document.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\");a.setAttribute(\"viewBox\",\"0 0 24 24\"),a.setAttribute(\"class\",\"cross\"),a.setAttribute(\"height\",\"22px\"),a.setAttribute(\"width\",\"22px\"),a.setAttribute(\"fill\",\"#333\"),a.append(s),n.append(a),t.append(n),e.append(t),this.shadowRoot.prepend(e)}}}$s=_s,_s.backgroundColor=\"rgb(250, 250, 250)\",_s.maxCreativeHeight=216,_s.buttonHeight=32,_s.maxHeight=$s.maxCreativeHeight+$s.buttonHeight,_s.shouldDisplay=!1,_s.adaptersNotToDisplay=[\"ogury\",\"missena\",\"seedtag\",\"kargo\",\"gumgum\",\"bliink\",\"sublime\"];const Rs=e=>e.reduce(((e,t)=>t.offsetHeight>e.offsetHeight?t:e),e[0]);function Os(e){if(e.anchor){const t=e.divId,i=document.getElementById(t);if(m(`[pbstck-sticky] preparing sticky for ${e.adUnitName}`,e),\"pbstck-sticky\"===i?.localName)return void m(`[pbstck-sticky] div ${t} already prepared`);const n=document.createElement(\"pbstck-sticky\");n.id=t;const s=`adm-sticky-${t}`;if(i)i.id=s,i.appendChild(n);else{const e=document.createElement(\"div\");e.id=s,e.appendChild(n),document.body?document.body.appendChild(e):v(\"Body not found, cannot append sticky\")}p(`[pbstck-sticky] prepared sticky for ${e.adUnitName}`,e)}}const Us=\"adm-ad-loading\",Ps=\"adm-ad-empty\",Ls=\"adm-ad-rendered\",xs=\"adm-ad-skin\",Ns=\"data-adm-skin\",Ds=[\"sublime\",\"justpremium\",\"gumgum\",\"dspx\",\"richaudience\"];const js=(e,t,i,n)=>t>15?(b(\"Could not declare XPLN targetings, xpln_targeting function is undefined\"),void n()):e.xpln_targeting&&e.xpln_targeting.toString().length>100?(e.xpln_targeting(),p(`XPLN targeting called after ${t} retry`),void i()):void setTimeout((()=>js(e,t+1,i,n)),300),Bs=e=>new Promise(((t,i)=>js(e,0,t,i))),Ms=\"[IAS Module]\";const Vs=\"[instream]\",Ws=20,zs=\"https://intake.pbstck.com/v1/intake/impression\";function Fs(e,t){const i=function(e,t){const i=e.getElementsByTagName(\"TrackingEvents\"),n=function(e){const t=e.getElementsByTagName(\"VAST\")[0],i=t?.getAttribute(\"version\"),n=t?.getAttribute(\"xmlns\");return{version:i,xmlns:n}}(e);if(!n.version)return v(`${Vs} Invalid vast version string, tracking events are not added`),e;if(m(`${Vs} VAST version ${n.version} with namespace ${n.xmlns}`),!i[0]){m(`${Vs} No TrackingEvents found in VAST XML`);const t=e.getElementsByTagName(\"Linear\"),i=n.xmlns?e.createElementNS(n.xmlns,\"TrackingEvents\"):e.createElement(\"TrackingEvents\");t[0].appendChild(i)}return Object.entries(t).forEach((([t,s])=>{if(s)if(\"impression\"!==t){const a=n.xmlns?e.createElementNS(n.xmlns,\"Tracking\"):e.createElement(\"Tracking\");a.setAttribute(\"event\",t),a.innerHTML=`<![CDATA[${s}]]>`,i[0].appendChild(a)}else{const t=function(e){const t=e.getElementsByTagName(\"InLine\")[0];if(t)return t;const i=e.getElementsByTagName(\"Wrapper\")[0];if(i)return i}(e);if(t){const i=n.xmlns?e.createElementNS(n.xmlns,\"Impression\"):e.createElement(\"Impression\");i.innerHTML=`<![CDATA[${s}]]>`,t.appendChild(i)}}})),e}((new DOMParser).parseFromString(e,\"text/xml\"),t);return(new XMLSerializer).serializeToString(i)}function Hs(e,t){const i=\"pbstck\",n=new Map,s=function(e){const t=document.getElementsByTagName(\"meta\");return Array.from(t).filter((t=>t.name.includes(`${e}:`)))}(i);s.forEach((e=>{const t=(s=e.name,a=i,s.replace(`${a}:`,\"\"));var s,a;n.has(t)&&b(`Custom dim ${t} is present many times`),n.size<Ws?n.set(t,e.content):b(`Skipping custom dim ${t} with ${e.content}: limit of ${Ws} keys exceeded`)})),n.set(\"kleanadsDefaultDevice\",e),n.set(\"windowWidth\",t.innerWidth.toString()),n.set(\"windowHeight\",t.innerHeight.toString());const a=Object.assign({},...Array.from(n.entries()).map((([e,t])=>({[e]:t}))));return n.size>0&&m(\"Custom dim found :\",a),a}function Gs(e,t,i,n,s){const a=function(e,t,i,n,s){const a={scopeId:t.scopeId,tagId:e.tagId,device:Ks(),kleanAdsStackId:t.stackId,kleanAdsStackVersion:t.version,browserName:\"unknown\",browserVersion:\"unknown\",osName:\"unknown\",osVersion:\"unknown\",pbstckVersion:\"unknown\",pbjsVersion:i,pubstackManaged:!0,pubstackRefresh:!1,pubstackRefreshRank:0,refresh:!1,domain:qs(e.pubstackWindow.location),hasUserId:\"notAvailable\",userIdProviderList:[],viewabilityMeasurable:!1,userConsentState:n,userConsentVersion:\"notAvailable\",lastAuctionId:\"\",href:Ys(e.pubstackWindow.location),networkConnectionEffectiveType:navigator.connection?.effectiveType,pageId:e.pubstackWindow.__pbstck_page_id||\"unknown\",customFields:Hs(e.device,e.pubstackWindow)},r={adUnit:s.adUnitCode,adUnitPath:s.adUnitCode,adapterCode:s.bidderCode,bidderCode:s.bidderCode,bidId:s.adId,cpm:s.cpm,cpmUplift:0,size:s.size,tags:[]};return{...a,...r}}(e,t,i,n,s);return{impression:Xs(zs,a)}}const Ks=()=>{const e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?\"tablet\":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?\"mobile\":\"desktop\"},qs=e=>{const t=e?.host??\"unknown\";return t.startsWith(\"www.\")?t.substring(4):t},Ys=e=>{let t;return t=e&&e.protocol&&e.host&&e.pathname?`${e.protocol}//${e.host}${e.pathname}`:\"unknown\",t};function Xs(e,t){return e+`?event=${btoa(JSON.stringify(t))}`}const Js=\"kleanads_cmd_logs\";class Qs{constructor(){this.name=\"SkinRendering\",this.eligibleForSkinRendering=!1}async onStackConfigLoadSync({config:e,stackConfig:t}){if(this.eligibleForSkinRendering=function(e,t){return!!e.pocOverrides?.skinRenderingSettings?.siteLevel?.[e.tagId]?.enabledSkinRenderAdaptation&&!e.pocOverrides?.skinRenderingSettings?.stackLevel?.[e.stack.stackId]?.disableSkinRenderAdaptation&&t.adUnits?.some((e=>e.sizes.some((e=>_(e,[1800,1e3])))))}(e,t),this.eligibleForSkinRendering){const{maxHeaderHeightPx:t,marginTopPx:i,siteContentWidthPx:n,additionalSkinRenderingCss:s}=e.pocOverrides?.skinRenderingSettings?.stackLevel?.[e.stack.stackId]?.style??e.pocOverrides?.skinRenderingSettings?.siteLevel?.[e.tagId]?.style??{};this.configuredMaxHeaderHeightPx=t,this.configuredMarginTopPx=i,this.configuredSiteContentWidthPx=n,this.configuredAdditionalSkinRenderingCss=s,m(\"[Skin] Configuration eligible for skin rendering.\")}}async onAfterPrebidReady({prebid:e,config:{pubstackWindow:t}}){this.pbjs=e,this.eligibleForSkinRendering&&(this.onBidWonHandler=this.onBidWon.bind(this),this.pbjs.getPbjs().onEvent(\"bidWon\",this.onBidWonHandler),Ze((()=>{this.onSlotRenderEndedHandler=this.onSlotRenderEnded.bind(this),t.googletag.pubads().addEventListener(\"slotRenderEnded\",this.onSlotRenderEndedHandler)})))}async clean(){this.onBidWonHandler&&(this.pbjs?.getPbjs().offEvent(\"bidWon\",this.onBidWonHandler),this.onBidWonHandler=void 0),this.onSlotRenderEndedHandler&&(window.googletag.pubads().removeEventListener(\"slotRenderEnded\",this.onSlotRenderEndedHandler),this.onSlotRenderEndedHandler=void 0)}onBidWon(e){this.shouldApplyPrebidSkinRendering(e)?this.applySkinCSS(e.adUnitCode,\"prebid\"):this.removeSkinRendering(e.adUnitCode)}onSlotRenderEnded(e){this.isFromGAM(e)?this.applySkinCSS(e.slot.getSlotElementId(),\"gam\"):e.size&&!_(e.size,[3,1])&&this.removeSkinRendering(e.slot.getSlotElementId())}removeSkinRendering(e){const t=document.getElementById(e);t&&t.classList.remove(Qs.SKIN_RENDERING_CSS_CLASS)}shouldApplyPrebidSkinRendering(e){const t=Ds,i=this.pbjs?.getPbjs();if(i){const n=t.some((t=>e.bidderCode===t||i.aliasRegistry[e.bidderCode]===t));return\"1800x1000\"===e.size&&!n}return v(\"shouldApplyPrebidSkinRendering: unable to get aliasRegistry: prebid is not defined\"),!1}isFromGAM(e){return!!e.size?.length&&1800===e.size[0]&&1e3===e.size[1]}applySkinCSS(e,t){const i=document.getElementById(e);if(i){if(\"gam\"===t)return;m(`[Skin] applying rendering for ${e} from ${t}`);const n=this.configuredMaxHeaderHeightPx??250,s=this.configuredMarginTopPx??0,a=this.configuredSiteContentWidthPx??1e3,r=this.configuredAdditionalSkinRenderingCss??\"\",o=1e3,d=(1800-a)/2,c=d+a,l=document.createElement(\"style\");l.setAttribute(\"data-kleanads\",\"true\"),l.textContent=`\\n        #${e}.${Qs.SKIN_RENDERING_CSS_CLASS} {\\n          /* leave security margin to help display top of creative */\\n          height: ${n}px;\\n          /* set it properly in page flow */\\n          display: block;\\n          margin-top: ${s}px;\\n        }\\n  \\n        #${e}.${Qs.SKIN_RENDERING_CSS_CLASS} > div {\\n          /* horizontally center creative */\\n          transform: translateX(-50%);\\n          position: absolute;\\n          left: 50%;\\n  \\n          /* clipping out the unused part of the creative to leave content visible */\\n          clip-path: polygon(0 0, 0% 100%, ${d}px ${o}px, ${d}px ${n}px, ${c}px ${n}px, ${c}px 100%, 100% 100%, 100% 0%);\\n        }\\n  \\n        ${r}\\n        `,document.head.appendChild(l),i.classList.add(Qs.SKIN_RENDERING_CSS_CLASS)}else b(`skin rendering impossible - adUnitDiv not found for ${e}`)}}Qs.SKIN_RENDERING_CSS_CLASS=\"pbstck_skin_rendering\";const Zs=[class{constructor(){this.name=\"Metas\",this.customFields=[],this.targetings=[]}load({config:e}){C(\"kleanads-version\",e.kleanadsVersion),this.customFields.push(\"kleanads-version\"),te.getInstance().uprTested&&(C(\"xp_variant\",`floor_optimization:${te.getInstance().uprEnabled}`),this.customFields.push(\"xp_variant\"))}async onStackConfigLoad({stackConfig:e}){C(\"config-version\",`${e.version}`),C(\"kleanads-stack-id\",e.stackId),this.customFields.push(\"config-version\",\"kleanads-stack-id\"),S(\"adm_stack\",`${e.stackId}_v${e.version}`),this.targetings.push(\"adm_stack\"),S(\"adm_stack_name\",function(e){if(e.stackName){const t=`_v${e.version}`;return`${e.stackName.substring(0,40-t.length)}${t}`}return`${e.stackId}_v${e.version}`}(e)),this.targetings.push(\"adm_stack_name\"),e.runningABTest.forEach((e=>{C(e.name,Array.isArray(e.value)?e.value.join(\",\"):e.value),this.customFields.push(e.name)}))}async clean(){this.customFields.forEach((e=>{try{!function(e){const t=document.querySelector(`meta[name=\"pbstck:${e}\"]`);t&&t.remove()}(e)}catch(t){b(`Unable to remove CustomField meta tag ${e}`,t)}})),this.customFields=[],this.targetings.forEach((e=>{try{!function(e){const t=document.querySelector(`meta[name=\"ad:${e}\"]`);t&&t.remove()}(e)}catch(t){b(`Unable to remove targeting meta tag ${e}`,t)}})),this.targetings=[]}},xt,gt,class{constructor(){this.name=\"ContainersModule\",this.firstStickyDefined=!1}load(){if(\"function\"==typeof customElements?.define&&\"function\"==typeof MutationObserver){if(customElements.get(\"pbstck-sticky\"))return;try{customElements.define(\"pbstck-sticky\",_s)}catch(e){v(`[ContainersModule] unable to define custom elements, error \"${e}\"`)}}else b('[ContainersModule] unable to define custom elements, error: \"browser not compatible\"')}async onPrepareAdUnits({toPreparedAdUnits:e,stackConfig:t}){for(const i of e??[]){const e=t.prebidConfig?.pbjsConfig.bidderAliases;i.parallax&&Ts(i,e),i.anchor&&!this.firstStickyDefined&&(Os(i),this.firstStickyDefined=!0)}}async clean(){}},ht,class{constructor(){this.name=\"Collector\",this._scriptAdded=!1}async onAfterConsent({config:e}){this._scriptAdded||(setTimeout((()=>{p(\"Downloading pubstack collector\"),K(`https://boot.pbstck.com/v1/tag/${e.tagId}`)}),200),this._scriptAdded=!0)}async clean(){}},os,Qs,class{constructor(){this.name=\"CssClass\"}async onAfterAdServerReady({adServer:e}){e.renderListener(this.applyClassBySlotRenderEndedEvent)}async onAfterPrebidReady({prebid:e}){m(\"[CssClassModule] onAfterPrebidReady event received\"),e.getPbjs().onEvent(\"bidWon\",this.applyClassByBidWon)}async applyClassBySlotRenderEndedEvent(e){const t=e.divId,i=document.getElementById(t);i&&(e.isEmpty?(i.classList.replace(Us,Ps),m(`[CSS Class] slot empty: ${t}`)):(i.classList.replace(Us,Ls),i.classList.replace(Ps,Ls),e.size?.length&&1800===e.size[0]&&1e3===e.size[1]?(i.classList.add(xs),i.setAttribute(Ns,\"gam\"),m(`[CSS Class] slot rendered is skin: ${t}`)):(i.classList.remove(xs),i.removeAttribute(Ns)),m(`[CSS Class] slot rendered: ${t}`)))}applyClassByBidWon(e){const t=document.getElementById(e.adUnitCode);\"1800x1000\"===e.size&&(t?.classList.add(xs),t?.setAttribute(Ns,\"prebid\"),Ds.includes(e.bidderCode)||t?.classList.add(\"adm-ad-skin-resizable\"),m(`[CSS Class] bidWon is skin: ${e.adUnitCode}`))}async onPrepareAdUnits({toPreparedAdUnits:e}){e&&e.forEach((e=>{const t=document.getElementById(e.divId);t&&t.classList.add(Us)}))}clean(){return Promise.resolve(void 0)}},class{constructor(){this.name=\"XplnModule\"}async onStackConfigLoad({config:e,stackConfig:t}){if(t.xplnConfig?.enabled&&t.xplnConfig?.publisherId){const i=t.xplnConfig.publisherId;((e,t)=>{const i=e.document.createElement(\"script\"),n=e.document.createElement(\"script\");i.innerHTML=`(function(x,p,l,n,a,i) {\\n          a=p.createElement(l);a.async=!0;a.src=n;a.xpln=x;\\n          i=p.currentScript||p.getElementsByTagName(l)[0];i.parentNode.insertBefore(a,i);\\n          })({xid:'${t}'},document,'script','https://cdn.xpln.tech/page.js');`,n.innerHTML=`(function(x,p,l,n,a,i) {\\n          self.xpln_targeting=function(){};\\n          a=x.createElement(p);a.async=!0;\\n          a.src=l+'${t}'+'/'+location.hostname+'.js';\\n          i=x.currentScript||x.getElementsByTagName(p)[0];i.parentNode.insertBefore(a,i);\\n          })(document,'script','https://cdn.xpln.tech/');`,i.type=\"text/javascript\",n.type=\"text/javascript\",i.setAttribute(\"data-kleanads\",\"true\"),n.setAttribute(\"data-kleanads\",\"true\"),e.document.head.appendChild(i),e.document.head.appendChild(n)})(e.pubstackWindow,i)}}async onAfterAdServerReady({config:e,stackConfig:t,adServer:i}){t?.xplnConfig&&(p(\"XplnModule declare xpln targeting when ready\"),i.registerExternalTargetingDeclaration((()=>Bs(e.pubstackWindow))))}async clean(){}},class{constructor(){this.name=\"PublicAccessModule\",this.cmd=[],this._refresh_init_listener=e=>{}}async onStackConfigLoadSync({config:e,stackConfig:t}){e.pubstackWindow._pbstckKleanAds.getBootstrapConfig=()=>{const{pubstackWindow:t,...i}=e;return i},e.pubstackWindow._pbstckKleanAds.getStackConfig=()=>t,e.pubstackWindow._pbstckKleanAds.apiReady=!0,this._refresh_init_listener=t=>{e.pubstackWindow._pbstckKleanAds.stopRefresh=e=>{t?.detail?.stopRefresh?.(e)},e.pubstackWindow._pbstckKleanAds.refreshApiReady=!0},window.addEventListener(Dn.REFRESH_INIT,this._refresh_init_listener)}async onPrepareAdUnits(){}async onAfterExternalApiReady({monetize:e}){Array.isArray(window.kleanads?.cmd)&&this.cmd.push(...window.kleanads.cmd.filter((e=>e instanceof Function))),window.kleanads={cmd:{push:(...e)=>{e.length&&e.forEach((e=>{e instanceof Function?(y(\"[KleanadsAPI] Valid callback input\",Js,{method:\"cmd.push\",valid:\"true\"}),e()):y(\"[KleanadsAPI] Invalid callback input\",Js,{method:\"cmd.push\",valid:\"false\",input:`${e}`})}))}},monetize:(t,...i)=>t&&\"string\"==typeof t&&0===i.length?(y(\"[KleanadsAPI] Valid monetize input\",Js,{method:\"monetize\",valid:\"true\"}),e(t)):(y(\"[KleanadsAPI] Invalid input\",Js,{method:\"monetize\",valid:\"false\",input:`${[t,...i]}`}),Promise.reject(\"KSERR_01 - invalid input\"))},this.cmd.forEach((e=>{y(\"[KleanadsAPI] Valid callback input\",Js,{method:\"cmd.push\",valid:\"true\"}),e()}))}async clean({config:e}){e.pubstackWindow._pbstckKleanAds.apiReady=!1,e.pubstackWindow._pbstckKleanAds.getBootstrapConfig=()=>{throw new Error(\"Not ready yet, wait for apiLoaded.\")},e.pubstackWindow._pbstckKleanAds.getStackConfig=()=>{throw new Error(\"Not ready yet, wait for apiLoaded.\")},window.removeEventListener(Dn.REFRESH_INIT,this._refresh_init_listener)}},class{constructor(){this.name=\"IasModule\"}async onAfterAdServerReady({config:e,stackConfig:t,adServer:i}){const n=t.iasConfig?.pubId;n&&i.registerExternalTargetingDeclaration((t=>this.declareIasTargetingsWhenReady(e.pubstackWindow,n,t)))}async clean(){}declareIasTargetingsWhenReady(e,t,i){return new Promise(((n,s)=>this.tryDeclareIasTargetings(e,0,t,i,n,s)))}async tryDeclareIasTargetings(e,t,i,n,s,a){if(t>15)return b(`${Ms} Could not declare IAS targetings because they could not be retrieved`),void a();const r=this.prepareSlots(n),o=await this.getTargetings(i,r,e);if(p(`${Ms} IAS targeting called`,o),o){const e=await o.json();return n.forEach((t=>{if(e.slots[t.getSlotElementId()]&&(void 0!==e.custom[\"ias-kw\"]&&(t.setTargeting(\"ias-kw\",e.custom[\"ias-kw\"]),Object.keys(e.brandSafety).forEach((i=>{t.setTargeting(i,e.brandSafety[i])}))),void 0!==e.fr&&t.setTargeting(\"fr\",e.fr),p(`${Ms} IAS targeting called for slot ${t.getSlotElementId()}`,e),t.getSlotElementId()in e.slots&&e.slots[t.getSlotElementId()].vw)){const i=e.slots[t.getSlotElementId()].vw.toString().replaceAll(\",\",\"%2C\");t.setTargeting(\"vw\",i)}})),m(`${Ms} IAS targeting called${t?\" after \"+t+\" tries\":\"\"}`),void s()}setTimeout((()=>this.tryDeclareIasTargetings(e,t+1,i,n,s,a)),300)}async getTargetings(e,t,i){let n=`https://pixel.adsafeprotected.com/services/pub?anId=${e}`;t.forEach((e=>{n=n.concat(`&slot=${e}`)})),n=n.concat(`&wr=${this.viewports(i)}&sr=${this.browserSize(i)}&sessionId=${At()}&url=${encodeURIComponent(i.location.href)}`),m(`${Ms} URL:`,n);try{return await fetch(n.toString())}catch(e){b(`${Ms} Error while fetching IAS targetings`,e)}}prepareSlots(e){const t=[];return e.length>0&&e.forEach((e=>{t.push(this.slotsToString(e))})),t}slotsToString(e){return`%7Bid:${e.getSlotElementId()},ss:[${e.getSizes().filter((e=>\"fluid\"!==e)).map((e=>`${e.width}.${e.height}`)).join(\",\")}],p:${e.getAdUnitPath()},t:display%7D`}viewports(e){return`${e.innerWidth}.${e.innerHeight}`}browserSize(e){return`${e.screen.width}.${e.screen.height}`}},class{constructor(){this.name=\"InstreamAnalytics\",this.consent=\"notAvailable\"}async onAfterConsentAccepted(){this.consent=\"accepted\"}async onAfterConsentRefused(){this.consent=\"refused\"}async onAfterPrebidReady({config:e,stackConfig:t,prebid:i}){this.pbjs=i.getPbjs(),this.onBidAcceptedHandler=function({config:e,stackConfig:t,pbjsVersion:i,userConsentState:n}){return s=>{if(s.vastXml&&t.adUnits.some((e=>e.isInstream&&e.externalAdServer))){const a=Gs(e,t,i,n,s);s.vastXml=Fs(s.vastXml,a)}}}({config:e,stackConfig:t,pbjsVersion:this.pbjs.version,userConsentState:this.consent}),this.pbjs.onEvent(\"bidAccepted\",this.onBidAcceptedHandler)}async clean(){this.onBidAcceptedHandler&&this.pbjs?.offEvent(\"bidAccepted\",this.onBidAcceptedHandler)}}];class ea{static getModules(){return Zs}}async function ta(e){if(window._kleanadslock)return void m(\"kleanads.js already started\");window._kleanadslock=!0,ye(ge.BEGIN_INIT);const t=async()=>{const t=await vs(e,ea.getModules().map((e=>new e)));t&&await ys(t)};if(e.pocOverrides?.waitForEventToInit){const i=setTimeout((()=>{v(\"Wait for init event is too long\")}),6e4),n=()=>{window.removeEventListener(e.pocOverrides?.waitForEventToInit||\"\",n),clearTimeout(i),t()};m(`[INIT] wait for event ${e.pocOverrides?.waitForEventToInit} to start kleanads`),window.addEventListener(e.pocOverrides?.waitForEventToInit,n)}else await t()}return window._pbstckKleanAds={initKleanAds:ta,apiReady:!1,getBootstrapConfig:()=>{throw new Error(\"Not ready yet, wait for apiReady.\")},getStackConfig:()=>{throw new Error(\"Not ready yet, wait for apiReady.\")},refreshApiReady:!1,stopRefresh:()=>{throw new Error(\"Not ready yet, wait for refreshApiReady.\")}},e.initKleanAds=ta,e}({});\n; window._pbstckKleanAds.initKleanAds({\"tagId\":\"b0f8046b-4b55-4f4a-a31a-4403b490a46c\",\"adCallTimeout\":3000,\"configUrl\":\"https://cdn-adm.pbstck.com\",\"screenSizeBreakpoints\":[{\"size\":0,\"device\":\"mobile\"},{\"size\":768,\"device\":\"desktop\"}],\"metricThrottling\":false,\"networkId\":124565442,\"context\":[{\"key\":\"site_name\",\"defaultValue\":\"\",\"otherValues\":[\"1136-5fa56f3d0ee6a\",\"1251-6141f9326fdd1\",\"1507-633d9df0acc0b\",\"1598-633ae63833c0b\",\"1668-6396ff2fdcbb0\",\"1729-63f799f009353\",\"1778-6450cbb23f199\",\"184-5e4c0a7f04adc\",\"197-5e3314dfe85d4\",\"2-5e1ee83770286\",\"2063-657c1e2f6ad48\",\"214-5df2721c4d352\",\"272-5de523fceebc8\",\"337-5f7ddbc7b80bb\",\"36-60ad2e60ca2cb\",\"401-5e5003431fc28\",\"54-6001b9335d0f7\",\"65-5e2f1886332fc\",\"986-5dcd563931e2a\",\"actugaming.net\",\"akibagamers.it\",\"altselection.com\",\"animeland.fr\",\"animenewsnetwork.com\",\"animotaku.fr\",\"ayther.fr\",\"cartoon-fantasy.net\",\"cinetrafic\",\"danstonchat.com\",\"dcplanet.fr\",\"ecranlarge\",\"electromenager-compare.com\",\"fifaultimateteam.it\",\"fredzone.org\",\"gaak.fr\",\"game-guide.fr\",\"gamekyo.com\",\"gamewave.fr\",\"genshin-impact.fr\",\"goodnite.fr\",\"halo.fr\",\"hearthstone-decks.com\",\"hitek.fr\",\"jeu.video\",\"jeuxonline.info\",\"judgehype.com\",\"julsa.fr\",\"lcd-compare.com\",\"mamytwink.com\",\"margxt.fr\",\"mdcu-comics.fr\",\"meilleure-innovation.com\",\"minecraft-tutos.com\",\"minecraft.fr\",\"neozone.org\",\"netflix-news.com\",\"nintendo-difference.com\",\"nintendo-town.fr\",\"p-nintendo.com\",\"parlerdamour.fr\",\"playerone.tv\",\"pokemon-france.com\",\"psthc.fr\",\"rci.fm\",\"rpgsoluce.com\",\"senscritique\",\"serie-news.com\",\"serieously.com\",\"sitegeek.fr\",\"team-aaa.com\",\"thrillercafe.it\",\"vakarm.net\",\"videolan.org\",\"videomuzic.eu\",\"voxgaming.fr\",\"warlegend.net\",\"wavendb.com\",\"wof.gg\",\"wol.gg\",\"wowisclassic.com\",\"xbox-mag.net\",\"xboxygen.com\",\"iphon.fr\"]},{\"key\":\"hb_footer\",\"defaultValue\":\"\",\"otherValues\":[\"cultureg\",\"pubstack\"]},{\"key\":\"subscriber\",\"defaultValue\":\"\",\"otherValues\":[\"false\",\"true\",\"yes\",\"no\",\"oui\",\"non\"]},{\"key\":\"exclude\",\"defaultValue\":\"\",\"otherValues\":[\"yes\",\"no\"]},{\"key\":\"refresh\",\"defaultValue\":\"\",\"otherValues\":[\"yes\",\"no\"]},{\"key\":\"test\",\"defaultValue\":\"\",\"otherValues\":[\"yes\"]},{\"key\":\"parallax\",\"defaultValue\":\"\",\"otherValues\":[\"true\",\"false\"]},{\"key\":\"video_corner\",\"defaultValue\":\"\",\"otherValues\":[\"yes\"]},{\"key\":\"hp\",\"defaultValue\":\"\",\"otherValues\":[\"yes\",\"no\"]},{\"key\":\"ab_test_enforced\",\"defaultValue\":\"false\",\"otherValues\":[\"true\"]},{\"key\":\"ab_test\",\"defaultValue\":\"\",\"otherValues\":[\"yes\"]},{\"key\":\"safari\",\"defaultValue\":\"\",\"otherValues\":[\"yes\"]},{\"key\":\"iab_cat\",\"defaultValue\":\"\",\"otherValues\":[\"full\",\"empty\",\"light\"]},{\"key\":\"no_s2s\",\"defaultValue\":\"\",\"otherValues\":[\"yes\"]},{\"key\":\"ios\",\"defaultValue\":\"\",\"otherValues\":[\"yes\"]}],\"pubstackDeclarationTargetingKeys\":[],\"priceRuleBuckets\":[{\"max\":\"5\",\"increment\":\"0.05\"}],\"globalRefreshConfig\":{\"prebidOrderIds\":[3245735221,3245735215]},\"pocOverrides\":{\"consentlessMode\":\"GAM\",\"refreshAlwaysInViewAdUnitNames\":[\"Actugaming_cgFooterHB\",\"altselection.com_cgFooterHB_Desktop\",\"altselection.com_cgFooterHB_Mobile\",\"ayther.fr_cgFooterHB_mobile\",\"cinetrafic.fr_cgFooterHB\",\"danstonchat.com_cgFooterHB_Desktop\",\"danstonchat.com_cgFooterHB_Mobile\",\"Ecranlarge_cgFooter_sticky\",\"Ecranlarge_cgFooterHB\",\"footer-hb-desktop\",\"footer-hb-mobile\",\"footer-hb-mobile_alwaysInView\",\"Fredzone_cgFooter_sticky\",\"Fredzone_cgFooterHB\",\"gamekyo.com_cgFooterHB_Desktop\",\"gamekyo.com_cgFooterHB_Mobile\",\"Gamewave_cgFooterHB\",\"gamewave.fr_cgFooterHB_Desktop\",\"genshin-impact.fr_cgFooterHB_Desktop\",\"genshin-impact.fr_cgFooterHB_Mobile\",\"goodnite.fr_cgFooterHB_Desktop\",\"goodnite.fr_cgFooterHB_Mobile\",\"jeuxonline.info_cgFooterHB\",\"Judgehype_cgFooter_sticky\",\"Judgehype_cgFooterHB\",\"judgehype.com_footer-hb-desktop\",\"Julsa_cgFooterHB\",\"Mamytwink_cgFooter_sticky\",\"Mamytwink_cgFooterHB\",\"manga-sanctuary.com_cgFooterHB\",\"margxt.fr_cgFooterHB\",\"MI_cgFooter_sticky\",\"MI_cgFooterHB\",\"Minecraft_cgFooterHB\",\"minecraft.fr_footer-hb-desktop\",\"netflix-news.com_cgFooterHB\",\"parlerdamour.fr_cgFooterHB_Desktop\",\"parlerdamour.fr_cgFooterHB_Mobile\",\"PSTHC_cgFooterHB\",\"psthc.fr_footer-hb-desktop\",\"rci.fm_cgFooterHB_Desktop\",\"rci.fm_cgFooterHB_Mobile\",\"Senscritique_cgFooterHB\",\"Senscritique_cgFooterHB_Mobile\",\"Serieously_cgFooterHB\",\"Serieously_cgFooterHB_sticky\",\"sitegeek.fr_cgFooterHB\",\"team-aaa.com_cgFooterHB\",\"VLC_cgFooterHB\",\"voxgaming.fr_footer-hb-desktop\",\"warlegend.net_cgFooterHB_Desktop\",\"warlegend.net_cgFooterHB_Mobile\",\"wavendb.com_cgFooterHB_Desktop\",\"wavendb.com_cgFooterHB_Mobile\",\"wowisclassic.com_cgFooterHB_Desktop\",\"wowisclassic.com_cgFooterHB_Mobile\",\"xbox-mag.net_cgFooterHB\",\"xboxygen.com_cgFooterHB_Desktop\",\"xboxygen.com_cgFooterHB_Mobile\"]},\"stacks\":[{\"scopeId\":\"384a552d-30a0-4886-a5c3-cd139636c5b6\",\"stackName\":\"Default\",\"siteId\":\"b0f8046b-4b55-4f4a-a31a-4403b490a46c\",\"stackId\":\"381495bf-9656-4c01-bc57-dd3719d59d87\",\"versions\":[{\"version\":61,\"ratio\":100}],\"conditions\":null,\"priority\":null}],\"extraScripts\":[],\"multiformat\":{\"bidders\":[\"adagio\",\"appnexus\",\"criteo\"]},\"newPrebidUrl\":\"https://cdn-adm.pbstck.com/kleanads-prebid/9.35.0-4135d92559edba8df8b73ab1d62b63352e924cb4.js\",\"kleanadsVersion\":\"2505161540\"}); })();",
    "",
    "",
    "",
    "",
    "",
    "",
    "",
    "\n/* <![CDATA[ */\nvar xm_vars = {\"wp_home\":\"https:\\/\\/xbox-mag.net\",\"theme_path\":\"https:\\/\\/xbox-mag.net\\/content\\/themes\\/xboxmag\",\"is_local\":null,\"ajaxurl\":\"https:\\/\\/xbox-mag.net\\/wp\\/wp-admin\\/admin-ajax.php\"};\n/* ]]> */\n",
    "",
    "",
    "\n/* <![CDATA[ */\nvar _wpcf7 = {\"loaderUrl\":\"https:\\/\\/xbox-mag.net\\/content\\/plugins\\/contact-form-7\\/images\\/ajax-loader.gif\",\"sending\":\"Envoi en cours ...\",\"cached\":\"1\"};\n/* ]]> */\n",
    "",
    "",
    "if(/hero-academia|mha|my-hero-ones-justice|one-piece|naruto|boruto/.test(top.location.href)||/My Hero Academia|MHA|My Hero One's Justice|One Piece|Naruto|Boruto/.test(top.document.title)){var pxMHOJ=new Image(1,1);pxMHOJ.src=\"//www.smartadserver.com/diffx/track/compgb.ashx?keyword\\x3dmhoj\\x26exptime\\x3d365\";document.body.appendChild(pxMHOJ)};"
  ],
  "styles": []
}